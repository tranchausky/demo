
<meta charSet="utf-8"/>
<textarea id="text" rows="24" cols="50">
{
  "wireMagic": "pb3",
  "pens": [ {
  
  } ],
  "wsWinStyles": [ {
  
  } ],
  "wpWinPositions": [ {
  
  } ],
  "events": [ {
    "tStartMs": 10120,
    "dDurationMs": 5180,
    "segs": [ {
      "utf8": "아직은 밤의 향기처럼"
    } ]
  }, {
    "tStartMs": 15300,
    "dDurationMs": 6760,
    "segs": [ {
      "utf8": "이 적막 속에 널 느낄 수 있어"
    } ]
  }, {
    "tStartMs": 22060,
    "dDurationMs": 5260,
    "segs": [ {
      "utf8": "그렇게 또 걷는 이 길"
    } ]
  }, {
    "tStartMs": 27320,
    "dDurationMs": 4480,
    "segs": [ {
      "utf8": "스며 들었던 그 추억에"
    } ]
  }, {
    "tStartMs": 31800,
    "dDurationMs": 5280,
    "segs": [ {
      "utf8": "다시 널 안고 싶어"
    } ]
  }, {
    "tStartMs": 37080,
    "dDurationMs": 8920,
    "segs": [ {
      "utf8": "가슴은 널 놓쳤던 기억에 점점 아파 와도"
    } ]
  }, {
    "tStartMs": 46000,
    "dDurationMs": 6880,
    "segs": [ {
      "utf8": "우리는 결국 이 날들을 이겨"
    } ]
  }, {
    "tStartMs": 52880,
    "dDurationMs": 5220,
    "segs": [ {
      "utf8": "다시 사랑하게 될 꺼야"
    } ]
  }, {
    "tStartMs": 58100,
    "dDurationMs": 6860,
    "segs": [ {
      "utf8": "내 좁은 세상엔 너만 살아"
    } ]
  }, {
    "tStartMs": 64960,
    "dDurationMs": 5140,
    "segs": [ {
      "utf8": "너로만 가득해온 그 날들"
    } ]
  }, {
    "tStartMs": 70100,
    "dDurationMs": 12180,
    "segs": [ {
      "utf8": "깨고 싶지 않은 일분 일초가 내게는 전부인 거야"
    } ]
  }, {
    "tStartMs": 82880,
    "dDurationMs": 5880,
    "segs": [ {
      "utf8": "널 가득 담았던 그 순간"
    } ]
  }, {
    "tStartMs": 97020,
    "dDurationMs": 5260,
    "segs": [ {
      "utf8": "천천히 너의 손을 잡고"
    } ]
  }, {
    "tStartMs": 102280,
    "dDurationMs": 6840,
    "segs": [ {
      "utf8": "다시 걷는 이 길 다시금 새로워"
    } ]
  }, {
    "tStartMs": 109120,
    "dDurationMs": 5160,
    "segs": [ {
      "utf8": "이제는 너를 기억하고"
    } ]
  }, {
    "tStartMs": 114280,
    "dDurationMs": 9720,
    "segs": [ {
      "utf8": "진심을 다해 우리 모습 마음에 새겨두고"
    } ]
  }, {
    "tStartMs": 124000,
    "dDurationMs": 3860,
    "segs": [ {
      "utf8": "힘겨웠던 지난날"
    } ]
  }, {
    "tStartMs": 127860,
    "dDurationMs": 4780,
    "segs": [ {
      "utf8": "이별은 잠시 묻어도 돼"
    } ]
  }, {
    "tStartMs": 133100,
    "dDurationMs": 6740,
    "segs": [ {
      "utf8": "우리 심장은 아주 예전부터"
    } ]
  }, {
    "tStartMs": 139840,
    "dDurationMs": 5220,
    "segs": [ {
      "utf8": "서로를 원해왔으니까"
    } ]
  }, {
    "tStartMs": 145060,
    "dDurationMs": 6540,
    "segs": [ {
      "utf8": "내 좁은 세상엔 너만 살아"
    } ]
  }, {
    "tStartMs": 152000,
    "dDurationMs": 5020,
    "segs": [ {
      "utf8": "너로만 가득해온 그 날들"
    } ]
  }, {
    "tStartMs": 157020,
    "dDurationMs": 6900,
    "segs": [ {
      "utf8": "깨고 싶지 않은 일분 일초가"
    } ]
  }, {
    "tStartMs": 163920,
    "dDurationMs": 5880,
    "segs": [ {
      "utf8": "내게는 전부인 거야"
    } ]
  }, {
    "tStartMs": 169800,
    "dDurationMs": 4900,
    "segs": [ {
      "utf8": "널 가득 담아낼 그 순간"
    } ]
  }, {
    "tStartMs": 174700,
    "dDurationMs": 9000,
    "segs": [ {
      "utf8": "한참이나 돌아서 다시 만난 널"
    } ]
  }, {
    "tStartMs": 183700,
    "dDurationMs": 12300,
    "segs": [ {
      "utf8": "이제는 놓지 않을게 내 손을 잡고 함께해줘"
    } ]
  }, {
    "tStartMs": 196000,
    "dDurationMs": 7000,
    "segs": [ {
      "utf8": "이 넓은 세상엔 니가 살아"
    } ]
  }, {
    "tStartMs": 203000,
    "dDurationMs": 5180,
    "segs": [ {
      "utf8": "내가 그리워했던 그 모습"
    } ]
  }, {
    "tStartMs": 208180,
    "dDurationMs": 6780,
    "segs": [ {
      "utf8": "깨고 싶지 않은 일분 일초가"
    } ]
  }, {
    "tStartMs": 214960,
    "dDurationMs": 5840,
    "segs": [ {
      "utf8": "내게는 전부인 거야"
    } ]
  }, {
    "tStartMs": 220800,
    "dDurationMs": 9700,
    "segs": [ {
      "utf8": "널 가득 담아낼 지금부터"
    } ]
  } ]
}


</textarea>
<button onclick="change()">change</button>
<input type="text" id="find" value="utf8"/>
<textarea id="textview" rows="24" cols="50" disabled></textarea>
<script>
var resubtobj = [];
var moreword = [];
function change(){
	resubtobj = [];
	moreword = [];
	var b = JSON.parse(document.getElementById("text").value);
	var key = document.getElementById("find").value;
	//console.log(b)
	loop(b,key)
	var text = moreword.join(' ');
	resubtobj.push(text);
	//console.log(resubtobj)
	var rs = resubtobj.join('\r')
	document.getElementById("textview").value = rs
	
}

function loop(obj, kvalue){
	for (const key in obj) {

		if (obj.hasOwnProperty(key)) {

			//console.log(`${key}: ${obj[key]}`);
			if(obj[key] instanceof Object){
				loop(obj[key], kvalue)
			}else{
				//console.log(key,kvalue);
				if(key == kvalue){
					//console.log(`${key}: ${obj[key]}`);
					var atvalue = obj[key];
					if(atvalue.slice(0, 1) == ' '){
						moreword.push(atvalue.trim());
					}else{
						var text = moreword.join(' ');
						console.log(text)
						resubtobj.push(text);
						moreword = [];
						moreword.push(atvalue);
					}
					
				}
			}
			
		}
	}
	
}
</script>

<br>
<br>
<p>Example link:</p>
<p style="word-break: break-all;">https://www.youtube.com/api/timedtext?v=fTXd-DpN3AI&ei=ZCbbZIWJBK2P2roP0YyHoA4&caps=asr&opi=112496729&xoaf=5&hl=en&ip=0.0.0.0&ipbits=0&expire=1692109012&sparams=ip%2Cipbits%2Cexpire%2Cv%2Cei%2Ccaps%2Copi%2Cxoaf&signature=CC7C8E3818EDB1E29EECAD00CE16AE677AD1357C.E145050BD8EAD37F5C610BE6B7FB18D5F094F525&key=yt8&lang=vi&fmt=json3&xorb=2&xobt=3&xovt=3&cbr=Chrome&cbrver=115.0.0.0&c=WEB&cver=2.20230810.05.00&cplayer=UNIPLAYER&cos=Windows&cosver=10.0&cplatform=DESKTOP</p>