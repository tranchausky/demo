"use strict";function _typeof(e){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}!function(n,o){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?o(exports,require("prettier/standalone")):"function"==typeof define&&define.amd?define(["exports","prettier/standalone"],o):o(((n=n||self).prettierPlugins=n.prettierPlugins||{},n.prettierPlugins.php={}),n.prettier)}(void 0,function(n,t){"use strict";var Oo=String.fromCharCode;function a(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function s(o,t){var e=Object.keys(o);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(o);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(o,t).enumerable})),e.push.apply(e,a)}return e}function oe(n,t){return function(e){if(Array.isArray(e))return e}(n)||function(a,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(a)){var e,l=[],i=!0,_=!1;try{for(var d,p=a[Symbol.iterator]();!(i=(d=p.next()).done)&&(l.push(d.value),!t||l.length!==t);i=!0);}catch(n){_=!0,e=n}finally{try{i||null==p.return||p.return()}finally{if(_)throw e}}return l}}(n,t)||l(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(n,t){if(n){if("string"==typeof n)return _(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);return"Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e?Array.from(e):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?_(n,t):void 0}}function _(o,t){(null==t||t>o.length)&&(t=o.length);for(var a=0,r=Array(t);a<t;a++)r[a]=o[a];return r}function d(n){if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(n=l(n))){var a=0,_=function(){};return{s:_,n:function(){return a>=n.length?{done:!0}:{done:!1,value:n[a++]}},e:function(e){throw e},f:_}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,d,p=!0,c=!1;return{s:function(){i=n[Symbol.iterator]()},n:function(){var e=i.next();return p=e.done,e},e:function(e){c=!0,d=e},f:function(){try{p||null==i.return||i.return()}finally{if(c)throw d}}}}function T(e){return"."!=e&&","!=e&&!isNaN(parseFloat(e))&&isFinite(e)}function k(o,t){for(var e=Object.keys(o),a=e.length;a--;){var i=e[a],s=o[i];null===s?delete t[i]:"function"==typeof s?t[i]=s.bind(t):Array.isArray(s)?t[i]=Array.isArray(t[i])?t[i].concat(s):s:t[i]="object"==_typeof(s)&&"object"==_typeof(t[i])?k(s,t[i]):s}return t}function x(n,t){return 1<parseInt(Ro[0])?n[t]:n}function i(e){return vo[e]}function E(e){return["block","program","namespace","class","interface","trait","traituse","declare"].includes(e.kind)}function f(n){var t=n.body;return t?("block"===t.kind&&(t=t.children),t[0]):null}function y(n){var t=n.children||n.body||n.adaptations;return Array.isArray(t)?t:null}function A(n){var t=n.getParentNode();return t?y(t):null}function g(e){return 0<e.length?e[e.length-1]:null}function v(a){var t=a.getValue();if("program"===t.kind){var e=y(t);return e&&0!==e.length&&"inline"===e[0].kind}if("switch"===t.kind){if(!t.body)return!1;var i=y(t.body);if(0===i.length)return!1;var n=oe(i,1)[0];if(!n.body)return!1;var s=y(n.body);return 0!==s.length&&"inline"===s[0].kind}var r=f(t);return!!r&&"inline"===r.kind}function ge(n,t){var e=n.children;0===e.length?Ho(n,t):Mo(e[0],t)}function Le(n,t){"block"===n.kind?ge(n,t):Mo(n,t)}function Be(a,t,e,i,n,s){var r=Zo(a,n,s),o=a.charAt(r);return t&&"identifier"===t.kind&&e&&("function"===e.kind||"method"===e.kind)&&")"===o?(Go(e,n),!0):e&&("function"===e.kind||"method"===e.kind)&&i&&"block"===i.kind&&(ge(i,n),!0)}function Ge(a,t,e,i,n,s){if(!e||"if"!==e.kind||!i)return!1;var r=Zo(a,n,s);return")"===a.charAt(r)?(Go(t,n),!0):t===e.body&&i===e.alternate?(Ho(e,n),!0):"if"===i.kind?(Le(i.body,n),!0):e.body===i&&(Mo(i,n),!0)}function Ve(n,o,e){if(n&&["class","interface","trait"].includes(n.kind)){if(o&&n.extends)if(Array.isArray(n.extends)){if(n.extends.some(function(n){if(o&&o===n)return Ho(o,e),!0}))return!0;}else if(o===n.extends)return Ho(o,e),!0;if(o&&n.implements&&n.implements.some(function(n){if(o&&o===n)return Ho(o,e),!0}))return!0;if(!(n.body&&0<n.body.length))return Ho(n,e),!0}return!1}function We(l,t,e,i,n){if(t&&("function"===t.kind||"method"===t.kind)){for(var s=0,_=0;_<t.arguments.length;_++)s=n.locEnd(t.arguments[_])>s?n.locEnd(t.arguments[_]):s;var d=t.body&&n.locStart(i)>s&&n.locEnd(i)<n.locStart(t.body),p=Zo(l,i,n);if(t.type&&d&&")"!==l.charAt(p))return n.locEnd(i)<n.locStart(t.type)?(Ho(t.type,i),!0):(Go(t.type,i),!0)}return!1}function Qe(o,t,e,a,n){return e&&["function","method","parameter"].includes(e.kind)&&"typereference"===t.kind&&"identifier"===a.kind&&(Go(t,n),!0)}function Ye(n,t){return n&&["label","goto"].includes(n.kind)&&(Go(n,t),!0)}function je(o,t,e,a){return e&&"inline"===e.kind?(e.leadingComments||(e.leadingComments=[]),e.leadingComments.includes(a)||e.leadingComments.push(a),!0):!(o||e||!t||"inline"!==t.kind)&&(Ho(t,a),!0)}function et(n,t,e){return n&&"try"===n.kind&&t&&("block"===t.kind?(ge(t,e),!0):"try"===t.kind?(Le(t.always,e),!0):"catch"===t.kind&&(Le(t.body,e),!0))}function ct(o,t,e,a){return e||t||!o||"namespace"!==o.kind||o.withBrackets?!(t||!o||"namespace"!==o.kind||o.withBrackets)&&(Ho(o,a),!0):(Go(o,a),!0)}function Tt(o,t,e,a){return o&&"declare"===o.kind&&(!t||"noop"!==t.kind)&&(e&&o.directives[0]!==e?e&&t&&(Mo(e,a),!0):("none"===o.mode?Go(o,a):Ho(o,a),!0))}function vt(a,t,e,i,n,s){if(!e||"while"!==e.kind||!i)return!1;var r=Zo(a,n,s);return")"===a.charAt(r)?(Go(t,n),!0):"block"===i.kind&&(ge(i,n),!0)}function Wt(n,t){return n.getValue().printed=!0,t.printer.printComment(n,t)}function eo(n,t,e){return n.getNode()===t.cursorNode&&n.getValue()?$o([jo,e,jo]):e}function to(){}function no(n,t){return parseFloat(n)>=parseFloat(t)}function oo(n,t){return!!n.trailingCommaPHP&&no(n.phpVersion,t)}function ao(e){switch(e.braceStyle){case"1tbs":return!1;case"psr-2":default:return!0;}}function ro(n,t,e){return rn(["->",n.call(e,"offset")])}function io(o,t,e){var a=o.getValue(),n=!["variable","identifier"].includes(a.offset.kind);return rn(["::",n?"{":"",o.call(e,"offset"),n?"}":""])}function so(o,t,e){var a=o.getValue(),n=a.offset&&"number"===a.offset.kind||zn(o,"encapsed");return rn(["[",a.offset?ln(rn([un(rn([n?"":fn,o.call(e,"offset")])),n?"":fn])):"","]"])}function lo(e){return"array"===e.kind&&(0<e.items.length||e.comments)||"function"===e.kind||"method"===e.kind||"closure"===e.kind}function _o(n){var t=gn(n),e=Nn(n);return!wn(t)&&!Dn(t)&&lo(t)&&(!e||e.kind!==t.kind)}function po(o){if(2!==o.length)return!1;var t=oe(o,2),e=t[0],a=t[1];return!(e.comments&&e.comments.length||"function"!==e.kind&&"method"!==e.kind&&"closure"!==e.kind||"retif"===a.kind||lo(a))}function co(m,y,e){function t(){return ln(rn(["(",un(rn([hn,rn(s)])),c,hn,")"]),{shouldBreak:!0})}var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"arguments",n=m.getValue()[i];if(0===n.length)return rn(["(",oa.printDanglingComments(m,y,!0),")"]);var _=!1,A=!1,g=n.length-1,s=m.map(function(o,t){var n=o.getNode(),r=[e(o)];return t===g||(Zn(y.originalText,n,y)?(0===t&&(A=!0),_=!0,r.push(",",pn,pn)):r.push(",",hn)),rn(r)},i),a=m.getValue(),l=gn(n),c=["call","new","unset","isset"].includes(a.kind)&&oo(y,"7.3")?un(rn([l&&jn(l)?pn:"",","])):"",u=po(n),d=_o(n);if(u||d){var p,h=(u?s.slice(1).some(En):s.slice(0,-1).some(En))||_,T=0;m.each(function(o){u&&0===T&&(p=[rn([o.call(function(n){return e(n,{expandFirstArg:!0})}),1<s.length?",":"",A?pn:hn,A?pn:""])].concat(s.slice(1))),d&&T===n.length-1&&(p=s.slice(0,-1).concat(o.call(function(n){return e(n,{expandLastArg:!0})}))),T++},i);var N=s.some(En),x=rn(["(",rn(p),")"]);return rn([N?sn:"",cn([N?dn(t(),x):x,rn(u?["(",ln(p[0],{shouldBreak:!0}),rn(p.slice(1)),")"]:["(",rn(s.slice(0,-1)),ln(gn(p),{shouldBreak:!0}),")"]),ln(rn(["(",un(rn([hn,rn(s)])),dn(c),hn,")"]),{shouldBreak:!0})],{shouldBreak:h})])}return ln(rn(["(",un(rn([fn,rn(s)])),dn(c),fn,")"]),{shouldBreak:s.some(En)||_})}function To(e){return"array"===e.kind&&0!==e.items.length}function ko(e){return"array"===e.right.kind&&0!==e.right.items.length}function uo(o,t,e){var a=o.getValue();switch(a.kind){case"propertylookup":return ro(o,0,e);case"staticlookup":return io(o,0,e);case"offsetlookup":return so(o,0,e);default:return"Have not implemented lookup kind ".concat(a.kind," yet.");}}function xo(n){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=t.opening;if("heredoc"===n.type)return void 0===e||e?"<<<".concat(n.label):n.label;var o={string:"\"",shell:"`"};return o[n.type]?o[n.type]:"Unimplemented encapsed type ".concat(n.type)}function Eo(o,a,e){var r=[],n=[];return o.each(function(o){r.push(rn(n)),r.push(ln(e(o))),n=[",",hn],o.getValue()&&Zn(a.originalText,o.getValue(),a)&&n.push(fn)},"items"),rn(r)}function fo(_,t){if(0===t.length)return _;var d=0;return t.reduce(function(t,e){var n=e.start,i=e.end,r=e.alignment,o=e.before,s=e.after,a=rn([o||"",rn(_.slice(n,i)),s||""]),l=t.concat(_.slice(d,n),r?xn(ln(rn([kn(Array(r).join(" "),a)]))):ln(a),i===_.length-1?_.slice(i):"");return d=i,l},[])}function mo(D,t,e){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"children",n=D.getValue(),s=D.getParentNode(),r=-1,P=[],y=[];D.map(function(o,a){var l=o.getValue(),c="inline"===l.kind,_=e(o),d=n[i],p=d[a+1],u=!Cn(o)&&!c&&(p&&"case"===p.kind?!Bn(D):p&&"inline"!==p.kind),T=rn([_,u?pn:"",u&&Zn(t.originalText,l,t)?pn:""]),f=0===a,x=d.length-1===a,E="block"===n.kind&&s&&["function","closure","method","try","catch"].includes(s.kind),m=E&&f?"":" ";if(c||!c&&x&&0<=r){var h=r;if(c&&(r=a),c&&!f||!c&&x){var v=(c?h:r)+1,A=x&&!c?a+1:a,g=d[c?h:r],N=g?Hn(g.raw):"",C=1<A-v,S=C?E&&!g||Gn(n)&&0===v?"":pn:"",b=C&&"halt"!==l.kind?E&&x?"":pn:"";C&&(m=""),y.push({start:v,end:A,alignment:N,before:S,after:b})}}if(c){var L=p&&"echo"===p.kind&&p.shortForm?"<?=":"<?php",O=l.leadingComments&&l.leadingComments.length?rn([f&&"namespace"!==n.kind&&!E?L:"","namespace"!==n.kind&&E?"":pn,oa.printComments(l.leadingComments,t),pn,"?>"]):Gn(n)&&f&&"namespace"!==n.kind?"":rn([m,"?>"]),I=l.comments&&l.comments.length?rn([L,pn,oa.printComments(l.comments,t),pn,"?>"]):Gn(n)&&x?"":rn([L," "]);T=rn([O,T,I])}P.push(T)},i);var a=fo(P,y);if("program"===n.kind&&!n.extra.parseAsEval){var l=[],p=oe(n.children,1),c=p[0],_=!c||"inline"!==c.kind;if(_){var d=t.originalText.trim().match(/^<\?(php|=)(\s+)?\S/),u=rn([d&&d[2]&&d[2].includes("\n")?rn([pn,2<d[2].split("\n").length?pn:""]):" ",n.comments?oa.printComments(n.comments,t):""]),T=c&&"echo"===c.kind&&c.shortForm;l.push(rn([T?"<?=":"<?php",u]))}l.push(rn(a));var k=t.originalText.trim().endsWith("?>");if(k){var x=gn(n.children),E=x?rn([An(t.originalText,t.locEnd(x),t.locEnd(n))?pn:" ",Zn(t.originalText,x,t)?pn:""]):n.comments?pn:"";l.push(an(rn([E,"?>"])))}return rn(l)}return rn(a)}function yo(o,a,e,t){return rn(o.map(function(o){var t=[];return t.push(e(o)),Cn(o)||(t.push(pn),Zn(a.originalText,o.getValue(),a)&&t.push(pn)),rn(t)},t))}function ho(l,_,e){var t=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"extends",n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:" ",i=5<arguments.length&&void 0!==arguments[5]?arguments[5]:" ",r=l.getValue(),o=Rn(r[t])?rn([pn,l.call(function(e){return oa.printDanglingComments(e,_,!0)},t),pn]):n,s=Array.isArray(r[t])?ln(rn([on(",",l.map(function(o){var t=e(o);return Rn(o.getValue())?rn([pn,oa.printDanglingComments(o,_,!0),pn,t]):rn([i,t])},t))])):rn([i,l.call(e,t)]);return un(rn([o,t,En(o)?un(s):s]))}function Ao(o,t,e){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"body",n=o.getValue();if(!n[a])return";";var i=o.call(e,a);return rn([n.shortForm?":":" {",un(rn(["block"!==n[a].kind||n[a].children&&0<n[a].children.length||n[a].comments&&0<n[a].comments.length?rn([Fn(o)?"switch"===n.kind?" ":"":pn,i]):""])),"if"===n.kind&&"body"===a?"":rn([Mn(o)?pn:"",n.shortForm?rn(["end",n.kind,";"]):"}"])])}function go(a,t,e,i,n,s,r){if(!i)return t;var o=No(a,i,n,s,r);return ln(rn([t,e,o]))}function No(a,t,e,i,n){var s=i?"&":"";if(oa.hasLeadingOwnLineComment(n.originalText,t,n))return un(rn([pn,s,e]));var r="cast"===t.kind?t.expr:t;return("bin"!==r.kind||ko(r))&&("retif"!==r.kind||(r.trueExpr||To(r.falseExpr))&&("bin"!==r.test.kind||ko(r.test)))&&("variable"!==a.kind&&"string"!==a.kind&&!Un(a)||("string"!==r.kind||Co(r))&&!function n(t){return!!Un(t)&&("variable"===t.what.kind||Kn(t.what)||n(t.what))}(r))?rn([" ",s,e]):ln(un(rn([hn,s,e])))}function Co(e){return e.raw.includes("\n")}function So(n,t,e){return("string"===n.kind||"encapsed"===n.kind&&("string"===n.type||"shell"===n.type))&&Co(n)&&!vn(t,e.locStart(n),{backwards:!0})}function Lo(e){return e&&e.default||e}function Io(a,t){var e=t.extend,i=t.override,n={};for(var s in a)n["languageId"==s?"linguistLanguageId":s]=a[s];if(e)for(var r in e)n[r]=(n[r]||[]).concat(e[r]);for(var o in i)n[o]=i[o];return n}t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;var bo=["\n","\r"],r=["\n","\r",";"],o=r.concat(["\t"," ",",","]",")","/","=","!"]),h=function(e){this.engine=e,this.tok=this.engine.tokens.names,this.EOF=1,this.debug=!1,this.all_tokens=!0,this.comment_tokens=!1,this.mode_eval=!1,this.asp_tags=!1,this.short_tags=!1,this.version=704,this.yyprevcol=0,this.keywords={__class__:this.tok.T_CLASS_C,__trait__:this.tok.T_TRAIT_C,__function__:this.tok.T_FUNC_C,__method__:this.tok.T_METHOD_C,__line__:this.tok.T_LINE,__file__:this.tok.T_FILE,__dir__:this.tok.T_DIR,__namespace__:this.tok.T_NS_C,exit:this.tok.T_EXIT,die:this.tok.T_EXIT,function:this.tok.T_FUNCTION,const:this.tok.T_CONST,return:this.tok.T_RETURN,try:this.tok.T_TRY,catch:this.tok.T_CATCH,finally:this.tok.T_FINALLY,throw:this.tok.T_THROW,if:this.tok.T_IF,elseif:this.tok.T_ELSEIF,endif:this.tok.T_ENDIF,else:this.tok.T_ELSE,while:this.tok.T_WHILE,endwhile:this.tok.T_ENDWHILE,do:this.tok.T_DO,for:this.tok.T_FOR,endfor:this.tok.T_ENDFOR,foreach:this.tok.T_FOREACH,endforeach:this.tok.T_ENDFOREACH,declare:this.tok.T_DECLARE,enddeclare:this.tok.T_ENDDECLARE,instanceof:this.tok.T_INSTANCEOF,as:this.tok.T_AS,switch:this.tok.T_SWITCH,endswitch:this.tok.T_ENDSWITCH,case:this.tok.T_CASE,default:this.tok.T_DEFAULT,break:this.tok.T_BREAK,continue:this.tok.T_CONTINUE,goto:this.tok.T_GOTO,echo:this.tok.T_ECHO,print:this.tok.T_PRINT,class:this.tok.T_CLASS,interface:this.tok.T_INTERFACE,trait:this.tok.T_TRAIT,extends:this.tok.T_EXTENDS,implements:this.tok.T_IMPLEMENTS,new:this.tok.T_NEW,clone:this.tok.T_CLONE,var:this.tok.T_VAR,eval:this.tok.T_EVAL,include:this.tok.T_INCLUDE,include_once:this.tok.T_INCLUDE_ONCE,require:this.tok.T_REQUIRE,require_once:this.tok.T_REQUIRE_ONCE,namespace:this.tok.T_NAMESPACE,use:this.tok.T_USE,insteadof:this.tok.T_INSTEADOF,global:this.tok.T_GLOBAL,isset:this.tok.T_ISSET,empty:this.tok.T_EMPTY,__halt_compiler:this.tok.T_HALT_COMPILER,static:this.tok.T_STATIC,abstract:this.tok.T_ABSTRACT,final:this.tok.T_FINAL,private:this.tok.T_PRIVATE,protected:this.tok.T_PROTECTED,public:this.tok.T_PUBLIC,unset:this.tok.T_UNSET,list:this.tok.T_LIST,array:this.tok.T_ARRAY,callable:this.tok.T_CALLABLE,or:this.tok.T_LOGICAL_OR,and:this.tok.T_LOGICAL_AND,xor:this.tok.T_LOGICAL_XOR},this.castKeywords={int:this.tok.T_INT_CAST,integer:this.tok.T_INT_CAST,real:this.tok.T_DOUBLE_CAST,double:this.tok.T_DOUBLE_CAST,float:this.tok.T_DOUBLE_CAST,string:this.tok.T_STRING_CAST,binary:this.tok.T_STRING_CAST,array:this.tok.T_ARRAY_CAST,object:this.tok.T_OBJECT_CAST,bool:this.tok.T_BOOL_CAST,boolean:this.tok.T_BOOL_CAST,unset:this.tok.T_UNSET_CAST}};h.prototype.setInput=function(e){return this._input=e,this.size=e.length,this.yylineno=1,this.offset=0,this.yyprevcol=0,this.yytext="",this.yylloc={first_offset:0,first_line:1,first_column:0,prev_offset:0,prev_line:1,prev_column:0,last_line:1,last_column:0},this.tokens=[],703<this.version?this.keywords.fn=this.tok.T_FN:delete this.keywords.fn,this.done=this.offset>=this.size,!this.all_tokens&&this.mode_eval?(this.conditionStack=["INITIAL"],this.begin("ST_IN_SCRIPTING")):(this.conditionStack=[],this.begin("INITIAL")),this.heredoc_label={label:"",length:0,indentation:0,indentation_uses_spaces:!1,finished:!1,first_encaps_node:!1,toString:function(){this.label}},this},h.prototype.input=function(){var e=this._input[this.offset];return e?(this.yytext+=e,this.offset++,"\r"===e&&"\n"===this._input[this.offset]&&(this.yytext+="\n",this.offset++),"\n"===e||"\r"===e?(this.yylloc.last_line=++this.yylineno,this.yyprevcol=this.yylloc.last_column,this.yylloc.last_column=0):this.yylloc.last_column++,e):""},h.prototype.unput=function(n){if(1===n)this.offset--,"\n"===this._input[this.offset]&&"\r"===this._input[this.offset-1]&&(this.offset--,n++),"\r"===this._input[this.offset]||"\n"===this._input[this.offset]?(this.yylloc.last_line--,this.yylineno--,this.yylloc.last_column=this.yyprevcol):this.yylloc.last_column--,this.yytext=this.yytext.substring(0,this.yytext.length-n);else if(0<n)if(this.offset-=n,n<this.yytext.length){this.yytext=this.yytext.substring(0,this.yytext.length-n),this.yylloc.last_line=this.yylloc.first_line,this.yylloc.last_column=this.yyprevcol=this.yylloc.first_column;for(var o,a=0;a<this.yytext.length;a++)o=this.yytext[a],"\r"===o?(o=this.yytext[++a],this.yyprevcol=this.yylloc.last_column,this.yylloc.last_line++,this.yylloc.last_column=0,"\n"!==o&&("\r"===o?this.yylloc.last_line++:this.yylloc.last_column++)):"\n"===o?(this.yyprevcol=this.yylloc.last_column,this.yylloc.last_line++,this.yylloc.last_column=0):this.yylloc.last_column++;this.yylineno=this.yylloc.last_line}else this.yytext="",this.yylloc.last_line=this.yylineno=this.yylloc.first_line,this.yylloc.last_column=this.yylloc.first_column;return this},h.prototype.tryMatch=function(e){return e===this.ahead(e.length)},h.prototype.tryMatchCaseless=function(e){return e===this.ahead(e.length).toLowerCase()},h.prototype.ahead=function(n){var t=this._input.substring(this.offset,this.offset+n);return"\r"===t[t.length-1]&&"\n"===this._input[this.offset+n+1]&&(t+="\n"),t},h.prototype.consume=function(n){for(var t,o=0;o<n&&(t=this._input[this.offset],!!t);o++)this.yytext+=t,this.offset++,"\r"===t&&"\n"===this._input[this.offset]&&(this.yytext+="\n",this.offset++,o++),"\n"===t||"\r"===t?(this.yylloc.last_line=++this.yylineno,this.yyprevcol=this.yylloc.last_column,this.yylloc.last_column=0):this.yylloc.last_column++;return this},h.prototype.getState=function(){return{yytext:this.yytext,offset:this.offset,yylineno:this.yylineno,yyprevcol:this.yyprevcol,yylloc:{first_offset:this.yylloc.first_offset,first_line:this.yylloc.first_line,first_column:this.yylloc.first_column,last_line:this.yylloc.last_line,last_column:this.yylloc.last_column},heredoc_label:this.heredoc_label}},h.prototype.setState=function(e){return this.yytext=e.yytext,this.offset=e.offset,this.yylineno=e.yylineno,this.yyprevcol=e.yyprevcol,this.yylloc=e.yylloc,e.heredoc_label&&(this.heredoc_label=e.heredoc_label),this},h.prototype.appendToken=function(n,t){return this.tokens.push([n,t]),this},h.prototype.lex=function(){this.yylloc.prev_offset=this.offset,this.yylloc.prev_line=this.yylloc.last_line,this.yylloc.prev_column=this.yylloc.last_column;var e=this.next()||this.lex();if(!this.all_tokens){for(;e===this.tok.T_WHITESPACE||!this.comment_tokens&&(e===this.tok.T_COMMENT||e===this.tok.T_DOC_COMMENT)||e===this.tok.T_OPEN_TAG;)e=this.next()||this.lex();if(e==this.tok.T_OPEN_TAG_WITH_ECHO)return this.tok.T_ECHO;if(e===this.tok.T_CLOSE_TAG)return";"}return this.yylloc.prev_offset||(this.yylloc.prev_offset=this.yylloc.first_offset,this.yylloc.prev_line=this.yylloc.first_line,this.yylloc.prev_column=this.yylloc.first_column),e},h.prototype.begin=function(e){if(this.conditionStack.push(e),this.curCondition=e,this.stateCb=this["match"+e],"function"!=typeof this.stateCb)throw new Error("Undefined condition state \""+e+"\"");return this},h.prototype.popState=function(){var e=0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0];if(this.curCondition=this.conditionStack[this.conditionStack.length-1],this.stateCb=this["match"+this.curCondition],"function"!=typeof this.stateCb)throw new Error("Undefined condition state \""+this.curCondition+"\"");return e},h.prototype.next=function(){var n;if(this._input||(this.done=!0),this.yylloc.first_offset=this.offset,this.yylloc.first_line=this.yylloc.last_line,this.yylloc.first_column=this.yylloc.last_column,this.yytext="",this.done)return this.yylloc.prev_offset=this.yylloc.first_offset,this.yylloc.prev_line=this.yylloc.first_line,this.yylloc.prev_column=this.yylloc.first_column,this.EOF;if(0<this.tokens.length?("object"==_typeof((n=this.tokens.shift())[1])?this.setState(n[1]):this.consume(n[1]),n=n[0]):n=this.stateCb.apply(this,[]),this.offset>=this.size&&0===this.tokens.length&&(this.done=!0),this.debug){var o=n;o="number"==typeof o?this.engine.tokens.values[o]:"\""+o+"\"";var a=new Error(o+"\tfrom "+this.yylloc.first_line+","+this.yylloc.first_column+"\t - to "+this.yylloc.last_line+","+this.yylloc.last_column+"\t\""+this.yytext+"\"");console.error(a.stack)}return n},[{T_COMMENT:function(){for(;this.offset<this.size;){var e=this.input();if("\n"===e||"\r"===e)return this.tok.T_COMMENT;if("?"===e&&!this.aspTagMode&&">"===this._input[this.offset])return this.unput(1),this.tok.T_COMMENT;if("%"===e&&this.aspTagMode&&">"===this._input[this.offset])return this.unput(1),this.tok.T_COMMENT}return this.tok.T_COMMENT},T_DOC_COMMENT:function(){var n=this.input(),o=this.tok.T_COMMENT;if("*"===n){if(n=this.input(),this.is_WHITESPACE()&&(o=this.tok.T_DOC_COMMENT),"/"===n)return o;this.unput(1)}for(;this.offset<this.size;)if("*"===(n=this.input())&&"/"===this._input[this.offset]){this.input();break}return o}},{nextINITIAL:function(){return 1<this.conditionStack.length&&"INITIAL"===this.conditionStack[this.conditionStack.length-1]?this.popState():this.begin("ST_IN_SCRIPTING"),this},matchINITIAL:function(){for(;this.offset<this.size;){var e=this.input();if("<"==e)if("?"==(e=this.ahead(1))){if(this.tryMatch("?=")){this.unput(1).appendToken(this.tok.T_OPEN_TAG_WITH_ECHO,3).nextINITIAL();break}if(this.tryMatchCaseless("?php")&&(" "===(e=this._input[this.offset+4])||"\t"===e||"\n"===e||"\r"===e)){this.unput(1).appendToken(this.tok.T_OPEN_TAG,6).nextINITIAL();break}if(this.short_tags){this.unput(1).appendToken(this.tok.T_OPEN_TAG,2).nextINITIAL();break}}else if(this.asp_tags&&"%"==e){if(this.tryMatch("%=")){this.aspTagMode=!0,this.unput(1).appendToken(this.tok.T_OPEN_TAG_WITH_ECHO,3).nextINITIAL();break}this.aspTagMode=!0,this.unput(1).appendToken(this.tok.T_OPEN_TAG,2).nextINITIAL();break}}return 0<this.yytext.length&&this.tok.T_INLINE_HTML}},{consume_NUM:function(){var o=this.yytext[0],a="."===o;if("0"===o)if("x"===(o=this.input())||"X"===o){if("_"!==(o=this.input())&&this.is_HEX())return this.consume_HNUM();this.unput(o?2:1)}else if("b"===o||"B"===o){if("_"!==(o=this.input())&&"0"===o||"1"===o)return this.consume_BNUM();this.unput(o?2:1)}else this.is_NUM()||o&&this.unput(1);for(;this.offset<this.size;){var r=o;if("_"===(o=this.input())){if("_"===r){this.unput(2);break}if("."===r){this.unput(1);break}if("e"===r||"E"===r){this.unput(2);break}}else{if("."===o){if(a){this.unput(1);break}if("_"===r){this.unput(2);break}a=!0;continue}if("e"===o||"E"===o){if("_"===r){this.unput(1);break}var i=2;if("+"!==(o=this.input())&&"-"!==o||(i=3,o=this.input()),this.is_NUM_START())return this.consume_LNUM(),this.tok.T_DNUMBER;this.unput(o?i:i-1);break}}if(!this.is_NUM()){o&&this.unput(1);break}}return a?this.tok.T_DNUMBER:9>this.yytext.length||10>this.yytext.length||10==this.yytext.length&&"2147483648">this.yytext?this.tok.T_LNUMBER:this.tok.T_DNUMBER},consume_HNUM:function(){for(;this.offset<this.size;){var e=this.input();if(!this.is_HEX()){e&&this.unput(1);break}}return this.tok.T_LNUMBER},consume_LNUM:function(){for(;this.offset<this.size;){var e=this.input();if(!this.is_NUM()){e&&this.unput(1);break}}return this.tok.T_LNUMBER},consume_BNUM:function(){for(var e;this.offset<this.size;)if("0"!==(e=this.input())&&"1"!==e&&"_"!==e){e&&this.unput(1);break}return this.tok.T_LNUMBER}},{matchST_LOOKING_FOR_PROPERTY:function(){var e=this.input();if("-"===e){if(">"===(e=this.input()))return this.tok.T_OBJECT_OPERATOR;e&&this.unput(1)}else{if(this.is_WHITESPACE())return this.tok.T_WHITESPACE;if(this.is_LABEL_START())return this.consume_LABEL(),this.popState(),this.tok.T_STRING}return this.popState(),e&&this.unput(1),!1},matchST_LOOKING_FOR_VARNAME:function(){var e=this.input();if(this.popState(),this.begin("ST_IN_SCRIPTING"),this.is_LABEL_START()){if(this.consume_LABEL(),"["===(e=this.input())||"}"===e)return this.unput(1),this.tok.T_STRING_VARNAME;this.unput(this.yytext.length)}else e&&this.unput(1);return!1},matchST_VAR_OFFSET:function(){var e=this.input();if(this.is_NUM_START())return this.consume_NUM(),this.tok.T_NUM_STRING;if("]"===e)return this.popState(),"]";if("$"===e){if(this.input(),this.is_LABEL_START())return this.consume_LABEL(),this.tok.T_VARIABLE;throw new Error("Unexpected terminal")}if(this.is_LABEL_START())return this.consume_LABEL(),this.tok.T_STRING;if(this.is_WHITESPACE()||"\\"===e||"'"===e||"#"===e)return this.tok.T_ENCAPSED_AND_WHITESPACE;if("["===e||"{"===e||"}"===e||"\""===e||"`"===e||this.is_TOKEN())return e;throw new Error("Unexpected terminal")}},{matchST_IN_SCRIPTING:function(){var n=this.input();switch(n){case" ":case"\t":case"\n":case"\r":case"\r\n":return this.T_WHITESPACE();case"#":return this.T_COMMENT();case"/":return"/"===this._input[this.offset]?this.T_COMMENT():"*"===this._input[this.offset]?(this.input(),this.T_DOC_COMMENT()):this.consume_TOKEN();case"'":return this.T_CONSTANT_ENCAPSED_STRING();case"\"":return this.ST_DOUBLE_QUOTES();case"`":return this.begin("ST_BACKQUOTE"),"`";case"?":if(!this.aspTagMode&&this.tryMatch(">")){this.input();var o=this._input[this.offset];return"\n"!==o&&"\r"!==o||this.input(),1<this.conditionStack.length&&this.begin("INITIAL"),this.tok.T_CLOSE_TAG}return this.consume_TOKEN();case"%":return this.aspTagMode&&">"===this._input[this.offset]?(this.input(),"\n"!==(n=this._input[this.offset])&&"\r"!==n||this.input(),this.aspTagMode=!1,1<this.conditionStack.length&&this.begin("INITIAL"),this.tok.T_CLOSE_TAG):this.consume_TOKEN();case"{":return this.begin("ST_IN_SCRIPTING"),"{";case"}":return 2<this.conditionStack.length&&this.popState(),"}";default:if("."===n){if(n=this.input(),this.is_NUM_START())return this.consume_NUM();n&&this.unput(1)}if(this.is_NUM_START())return this.consume_NUM();if(this.is_LABEL_START())return this.consume_LABEL().T_STRING();if(this.is_TOKEN())return this.consume_TOKEN();}throw new Error("Bad terminal sequence \""+n+"\" at line "+this.yylineno+" (offset "+this.offset+")")},T_WHITESPACE:function(){for(;this.offset<this.size;){var e=this.input();if(" "!==e&&"\t"!==e&&"\n"!==e&&"\r"!==e){e&&this.unput(1);break}}return this.tok.T_WHITESPACE}},{T_CONSTANT_ENCAPSED_STRING:function(){for(var e;this.offset<this.size;)if("\\"==(e=this.input()))this.input();else if("'"==e)break;return this.tok.T_CONSTANT_ENCAPSED_STRING},is_HEREDOC:function(){var o=this.offset;if("<"===this._input[this.offset-1]&&"<"===this._input[this.offset]&&"<"===this._input[this.offset+1]){if(this.offset+=3,this.is_TABSPACE())for(;this.offset<this.size&&(this.offset++,this.is_TABSPACE()););var t=this._input[this.offset-1];if("'"===t||"\""===t?this.offset++:t=null,this.is_LABEL_START()){for(var a=this.offset-1;this.offset<this.size&&(this.offset++,this.is_LABEL()););var r=this._input.substring(a,this.offset-1);if((!t||t===this._input[this.offset-1])&&(t&&this.offset++,bo.includes(this._input[this.offset-1])))return this.heredoc_label.label=r,this.heredoc_label.length=r.length,this.heredoc_label.finished=!1,a=this.offset-o,this.offset=o,this.consume(a),"'"===t?this.begin("ST_NOWDOC"):this.begin("ST_HEREDOC"),this.prematch_ENDOFDOC(),this.tok.T_START_HEREDOC}}return this.offset=o,!1},ST_DOUBLE_QUOTES:function(){for(var n;this.offset<this.size;)if("\\"==(n=this.input()))this.input();else{if("\""==n)break;if("$"==n){if("{"==(n=this.input())||this.is_LABEL_START()){this.unput(2);break}n&&this.unput(1)}else if("{"==n){if("$"==(n=this.input())){this.unput(2);break}n&&this.unput(1)}}if("\""==n)return this.tok.T_CONSTANT_ENCAPSED_STRING;var o=1;return"b"!==this.yytext[0]&&"B"!==this.yytext[0]||(o=2),2<this.yytext.length&&this.appendToken(this.tok.T_ENCAPSED_AND_WHITESPACE,this.yytext.length-o),this.unput(this.yytext.length-o),this.begin("ST_DOUBLE_QUOTES"),this.yytext},isDOC_MATCH:function(_,d){var e=this._input[_-2];if(!bo.includes(e))return!1;var i=!1,p=!1,T=0,k=this._input[_-1];if(703<=this.version){for(;"\t"===k||" "===k;)" "===k?i=!0:"\t"===k&&(p=!0),k=this._input[_+T],T++;if(_+=T,bo.includes(this._input[_-1]))return!1}if(this._input.substring(_-1,_-1+this.heredoc_label.length)===this.heredoc_label.label){var u=this._input[_-1+this.heredoc_label.length];if((703<=this.version?o:r).includes(u)){if(!d)this.heredoc_label.indentation=T,this.heredoc_label.indentation_uses_spaces=i,this.heredoc_label.first_encaps_node=!0;else if(this.consume(T),i&&p)throw new Error("Parse error:  mixing spaces and tabs in ending marker at line "+this.yylineno+" (offset "+this.offset+")");return!0}}return!1},prematch_ENDOFDOC:function(){this.heredoc_label.indentation_uses_spaces=!1,this.heredoc_label.indentation=0,this.heredoc_label.first_encaps_node=!0;for(var e=this.offset+1;e<this._input.length;){if(this.isDOC_MATCH(e,!1))return;if(!bo.includes(this._input[e-1]))for(;!bo.includes(this._input[e++])&&e<this._input.length;);e++}},matchST_NOWDOC:function(){if(this.isDOC_MATCH(this.offset,!0))return this.consume(this.heredoc_label.length),this.popState(),this.tok.T_END_HEREDOC;for(var e=this._input[this.offset-1];this.offset<this.size;)if(!bo.includes(e))e=this.input();else if(e=this.input(),this.isDOC_MATCH(this.offset,!0))return this.unput(1).popState(),this.appendToken(this.tok.T_END_HEREDOC,this.heredoc_label.length),this.tok.T_ENCAPSED_AND_WHITESPACE;return this.tok.T_ENCAPSED_AND_WHITESPACE},matchST_HEREDOC:function(){var n=this.input();if(this.isDOC_MATCH(this.offset,!0))return this.consume(this.heredoc_label.length-1),this.popState(),this.tok.T_END_HEREDOC;for(;this.offset<this.size;)if("\\"===n&&(n=this.input(),bo.includes(n)||(n=this.input())),bo.includes(n)){if(n=this.input(),this.isDOC_MATCH(this.offset,!0))return this.unput(1).popState(),this.appendToken(this.tok.T_END_HEREDOC,this.heredoc_label.length),this.tok.T_ENCAPSED_AND_WHITESPACE;}else if("$"===n){if("{"===(n=this.input()))return this.begin("ST_LOOKING_FOR_VARNAME"),2<this.yytext.length?(this.appendToken(this.tok.T_DOLLAR_OPEN_CURLY_BRACES,2),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START()){var o=this.offset,e=this.consume_VARIABLE();return this.yytext.length>this.offset-o+2?(this.appendToken(e,this.offset-o+2),this.unput(this.offset-o+2),this.tok.T_ENCAPSED_AND_WHITESPACE):e}}else if(!("{"===n))n=this.input();else if("$"===(n=this.input()))return this.begin("ST_IN_SCRIPTING"),2<this.yytext.length?(this.appendToken(this.tok.T_CURLY_OPEN,1),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):(this.unput(1),this.tok.T_CURLY_OPEN);return this.tok.T_ENCAPSED_AND_WHITESPACE},consume_VARIABLE:function(){this.consume_LABEL();var e=this.input();if("["==e)return this.unput(1),this.begin("ST_VAR_OFFSET"),this.tok.T_VARIABLE;if("-"===e){if(">"===this.input())return this.input(),this.is_LABEL_START()&&this.begin("ST_LOOKING_FOR_PROPERTY"),this.unput(3),this.tok.T_VARIABLE;this.unput(2)}else e&&this.unput(1);return this.tok.T_VARIABLE},matchST_BACKQUOTE:function(){var n=this.input();if("$"===n){if("{"===(n=this.input()))return this.begin("ST_LOOKING_FOR_VARNAME"),this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START())return this.consume_VARIABLE()}else if("{"===n){if("$"===this._input[this.offset])return this.begin("ST_IN_SCRIPTING"),this.tok.T_CURLY_OPEN;}else if("`"===n)return this.popState(),"`";for(;this.offset<this.size;){if("\\"===n)this.input();else{if("`"===n){this.unput(1),this.popState(),this.appendToken("`",1);break}if("$"===n){if("{"===(n=this.input()))return this.begin("ST_LOOKING_FOR_VARNAME"),2<this.yytext.length?(this.appendToken(this.tok.T_DOLLAR_OPEN_CURLY_BRACES,2),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START()){var o=this.offset,e=this.consume_VARIABLE();return this.yytext.length>this.offset-o+2?(this.appendToken(e,this.offset-o+2),this.unput(this.offset-o+2),this.tok.T_ENCAPSED_AND_WHITESPACE):e}continue}if("{"===n){if("$"===(n=this.input()))return this.begin("ST_IN_SCRIPTING"),2<this.yytext.length?(this.appendToken(this.tok.T_CURLY_OPEN,1),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):(this.unput(1),this.tok.T_CURLY_OPEN);continue}}n=this.input()}return this.tok.T_ENCAPSED_AND_WHITESPACE},matchST_DOUBLE_QUOTES:function(){var n=this.input();if("$"===n){if("{"===(n=this.input()))return this.begin("ST_LOOKING_FOR_VARNAME"),this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START())return this.consume_VARIABLE()}else if("{"===n){if("$"===this._input[this.offset])return this.begin("ST_IN_SCRIPTING"),this.tok.T_CURLY_OPEN;}else if("\""===n)return this.popState(),"\"";for(;this.offset<this.size;){if("\\"===n)this.input();else{if("\""===n){this.unput(1),this.popState(),this.appendToken("\"",1);break}if("$"===n){if("{"===(n=this.input()))return this.begin("ST_LOOKING_FOR_VARNAME"),2<this.yytext.length?(this.appendToken(this.tok.T_DOLLAR_OPEN_CURLY_BRACES,2),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START()){var o=this.offset,e=this.consume_VARIABLE();return this.yytext.length>this.offset-o+2?(this.appendToken(e,this.offset-o+2),this.unput(this.offset-o+2),this.tok.T_ENCAPSED_AND_WHITESPACE):e}n&&this.unput(1)}else if("{"===n){if("$"===(n=this.input()))return this.begin("ST_IN_SCRIPTING"),2<this.yytext.length?(this.appendToken(this.tok.T_CURLY_OPEN,1),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):(this.unput(1),this.tok.T_CURLY_OPEN);n&&this.unput(1)}}n=this.input()}return this.tok.T_ENCAPSED_AND_WHITESPACE}},{T_STRING:function(){var n=this.yytext.toLowerCase(),t=this.keywords[n];if("number"!=typeof t)if("yield"===n)700<=this.version&&this.tryMatch(" from")?(this.consume(5),t=this.tok.T_YIELD_FROM):t=this.tok.T_YIELD;else if(t=this.tok.T_STRING,"b"===n||"B"===n){var o=this.input(1);if("\""===o)return this.ST_DOUBLE_QUOTES();if("'"===o)return this.T_CONSTANT_ENCAPSED_STRING();o&&this.unput(1)}return t},consume_TOKEN:function(){var n=this._input[this.offset-1],t=this.tokenTerminals[n];return t?t.apply(this,[]):this.yytext},tokenTerminals:{$:function(){return this.offset++,this.is_LABEL_START()?(this.offset--,this.consume_LABEL(),this.tok.T_VARIABLE):(this.offset--,"$")},"-":function(){var e=this._input[this.offset];return">"===e?(this.begin("ST_LOOKING_FOR_PROPERTY").input(),this.tok.T_OBJECT_OPERATOR):"-"===e?(this.input(),this.tok.T_DEC):"="===e?(this.input(),this.tok.T_MINUS_EQUAL):"-"},"\\":function(){return this.tok.T_NS_SEPARATOR},"/":function(){return"="===this._input[this.offset]?(this.input(),this.tok.T_DIV_EQUAL):"/"},":":function(){return":"===this._input[this.offset]?(this.input(),this.tok.T_DOUBLE_COLON):":"},"(":function(){var o=this.offset;if(this.input(),this.is_TABSPACE()&&this.consume_TABSPACE().input(),this.is_LABEL_START()){var t=this.yytext.length;this.consume_LABEL();var e=this.yytext.substring(t-1).toLowerCase(),a=this.castKeywords[e];if("number"==typeof a&&(this.input(),this.is_TABSPACE()&&this.consume_TABSPACE().input(),")"===this._input[this.offset-1]))return a}return this.unput(this.offset-o),"("},"=":function(){var e=this._input[this.offset];return">"===e?(this.input(),this.tok.T_DOUBLE_ARROW):"="===e?"="===this._input[this.offset+1]?(this.consume(2),this.tok.T_IS_IDENTICAL):(this.input(),this.tok.T_IS_EQUAL):"="},"+":function(){var e=this._input[this.offset];return"+"===e?(this.input(),this.tok.T_INC):"="===e?(this.input(),this.tok.T_PLUS_EQUAL):"+"},"!":function(){return"="===this._input[this.offset]?"="===this._input[this.offset+1]?(this.consume(2),this.tok.T_IS_NOT_IDENTICAL):(this.input(),this.tok.T_IS_NOT_EQUAL):"!"},"?":function(){return 700<=this.version&&"?"===this._input[this.offset]?704<=this.version&&"="===this._input[this.offset+1]?(this.consume(2),this.tok.T_COALESCE_EQUAL):(this.input(),this.tok.T_COALESCE):"?"},"<":function(){var e=this._input[this.offset];return"<"===e?"="===(e=this._input[this.offset+1])?(this.consume(2),this.tok.T_SL_EQUAL):"<"===e&&this.is_HEREDOC()?this.tok.T_START_HEREDOC:(this.input(),this.tok.T_SL):"="===e?(this.input(),700<=this.version&&">"===this._input[this.offset]?(this.input(),this.tok.T_SPACESHIP):this.tok.T_IS_SMALLER_OR_EQUAL):">"===e?(this.input(),this.tok.T_IS_NOT_EQUAL):"<"},">":function(){var e=this._input[this.offset];return"="===e?(this.input(),this.tok.T_IS_GREATER_OR_EQUAL):">"===e?"="===(e=this._input[this.offset+1])?(this.consume(2),this.tok.T_SR_EQUAL):(this.input(),this.tok.T_SR):">"},"*":function(){var e=this._input[this.offset];return"="===e?(this.input(),this.tok.T_MUL_EQUAL):"*"===e?(this.input(),"="===this._input[this.offset]?(this.input(),this.tok.T_POW_EQUAL):this.tok.T_POW):"*"},".":function(){var e=this._input[this.offset];return"="===e?(this.input(),this.tok.T_CONCAT_EQUAL):"."===e&&"."===this._input[this.offset+1]?(this.consume(2),this.tok.T_ELLIPSIS):"."},"%":function(){return"="===this._input[this.offset]?(this.input(),this.tok.T_MOD_EQUAL):"%"},"&":function(){var e=this._input[this.offset];return"="===e?(this.input(),this.tok.T_AND_EQUAL):"&"===e?(this.input(),this.tok.T_BOOLEAN_AND):"&"},"|":function(){var e=this._input[this.offset];return"="===e?(this.input(),this.tok.T_OR_EQUAL):"|"===e?(this.input(),this.tok.T_BOOLEAN_OR):"|"},"^":function(){return"="===this._input[this.offset]?(this.input(),this.tok.T_XOR_EQUAL):"^"}}},{is_NUM:function(){var e=this._input.charCodeAt(this.offset-1);return 47<e&&58>e||95===e},is_NUM_START:function(){var e=this._input.charCodeAt(this.offset-1);return 47<e&&58>e},is_LABEL:function(){var e=this._input.charCodeAt(this.offset-1);return 96<e&&123>e||64<e&&91>e||95===e||47<e&&58>e||126<e},is_LABEL_START:function(){var e=this._input.charCodeAt(this.offset-1);return 64<e&&91>e||96<e&&123>e||95===e||126<e},consume_LABEL:function(){for(;this.offset<this.size;){var e=this.input();if(!this.is_LABEL()){e&&this.unput(1);break}}return this},is_TOKEN:function(){var e=this._input[this.offset-1];return-1!==";:,.\\[]()|^&+-/*=%!~$<>?@".indexOf(e)},is_WHITESPACE:function(){var e=this._input[this.offset-1];return" "===e||"\t"===e||"\n"===e||"\r"===e},is_TABSPACE:function(){var e=this._input[this.offset-1];return" "===e||"\t"===e},consume_TABSPACE:function(){for(;this.offset<this.size;){var e=this.input();if(!this.is_TABSPACE()){e&&this.unput(1);break}}return this},is_HEX:function(){var e=this._input.charCodeAt(this.offset-1);return 47<e&&58>e||64<e&&71>e||96<e&&103>e||95===e}}].forEach(function(n){for(var t in n)h.prototype[t]=n[t]});var c=h,u={"\\":"\\",$:"$",n:"\n",r:"\r",t:"\t",f:Oo(12),v:Oo(11),e:Oo(27)},m=function(n,t){this.lexer=n,this.ast=t,this.tok=n.tok,this.EOF=n.EOF,this.token=null,this.prev=null,this.debug=!1,this.version=704,this.extractDoc=!1,this.extractTokens=!1,this.suppressErrors=!1;var e=function(e){return[e,null]};this.entries={IDENTIFIER:new Map([this.tok.T_ABSTRACT,this.tok.T_ARRAY,this.tok.T_AS,this.tok.T_BREAK,this.tok.T_CALLABLE,this.tok.T_CASE,this.tok.T_CATCH,this.tok.T_CLASS,this.tok.T_CLASS_C,this.tok.T_CLONE,this.tok.T_CONST,this.tok.T_CONTINUE,this.tok.T_DECLARE,this.tok.T_DEFAULT,this.tok.T_DIR,this.tok.T_DO,this.tok.T_ECHO,this.tok.T_ELSE,this.tok.T_ELSEIF,this.tok.T_EMPTY,this.tok.T_ENDDECLARE,this.tok.T_ENDFOR,this.tok.T_ENDFOREACH,this.tok.T_ENDIF,this.tok.T_ENDSWITCH,this.tok.T_ENDWHILE,this.tok.T_EVAL,this.tok.T_EXIT,this.tok.T_EXTENDS,this.tok.T_FILE,this.tok.T_FINAL,this.tok.T_FINALLY,this.tok.T_FN,this.tok.T_FOR,this.tok.T_FOREACH,this.tok.T_FUNC_C,this.tok.T_FUNCTION,this.tok.T_GLOBAL,this.tok.T_GOTO,this.tok.T_IF,this.tok.T_IMPLEMENTS,this.tok.T_INCLUDE,this.tok.T_INCLUDE_ONCE,this.tok.T_INSTANCEOF,this.tok.T_INSTEADOF,this.tok.T_INTERFACE,this.tok.T_ISSET,this.tok.T_LINE,this.tok.T_LIST,this.tok.T_LOGICAL_AND,this.tok.T_LOGICAL_OR,this.tok.T_LOGICAL_XOR,this.tok.T_METHOD_C,this.tok.T_NAMESPACE,this.tok.T_NEW,this.tok.T_NS_C,this.tok.T_PRINT,this.tok.T_PRIVATE,this.tok.T_PROTECTED,this.tok.T_PUBLIC,this.tok.T_REQUIRE,this.tok.T_REQUIRE_ONCE,this.tok.T_RETURN,this.tok.T_STATIC,this.tok.T_SWITCH,this.tok.T_THROW,this.tok.T_TRAIT,this.tok.T_TRY,this.tok.T_UNSET,this.tok.T_USE,this.tok.T_VAR,this.tok.T_WHILE,this.tok.T_YIELD].map(e)),VARIABLE:new Map([this.tok.T_VARIABLE,"$","&",this.tok.T_NS_SEPARATOR,this.tok.T_STRING,this.tok.T_NAMESPACE,this.tok.T_STATIC].map(e)),SCALAR:new Map([this.tok.T_CONSTANT_ENCAPSED_STRING,this.tok.T_START_HEREDOC,this.tok.T_LNUMBER,this.tok.T_DNUMBER,this.tok.T_ARRAY,"[",this.tok.T_CLASS_C,this.tok.T_TRAIT_C,this.tok.T_FUNC_C,this.tok.T_METHOD_C,this.tok.T_LINE,this.tok.T_FILE,this.tok.T_DIR,this.tok.T_NS_C,"\"","b\"","B\"","-",this.tok.T_NS_SEPARATOR].map(e)),T_MAGIC_CONST:new Map([this.tok.T_CLASS_C,this.tok.T_TRAIT_C,this.tok.T_FUNC_C,this.tok.T_METHOD_C,this.tok.T_LINE,this.tok.T_FILE,this.tok.T_DIR,this.tok.T_NS_C].map(e)),T_MEMBER_FLAGS:new Map([this.tok.T_PUBLIC,this.tok.T_PRIVATE,this.tok.T_PROTECTED,this.tok.T_STATIC,this.tok.T_ABSTRACT,this.tok.T_FINAL].map(e)),EOS:new Map([";",this.EOF,this.tok.T_INLINE_HTML].map(e)),EXPR:new Map(["@","-","+","!","~","(","`",this.tok.T_LIST,this.tok.T_CLONE,this.tok.T_INC,this.tok.T_DEC,this.tok.T_NEW,this.tok.T_ISSET,this.tok.T_EMPTY,this.tok.T_INCLUDE,this.tok.T_INCLUDE_ONCE,this.tok.T_REQUIRE,this.tok.T_REQUIRE_ONCE,this.tok.T_EVAL,this.tok.T_INT_CAST,this.tok.T_DOUBLE_CAST,this.tok.T_STRING_CAST,this.tok.T_ARRAY_CAST,this.tok.T_OBJECT_CAST,this.tok.T_BOOL_CAST,this.tok.T_UNSET_CAST,this.tok.T_EXIT,this.tok.T_PRINT,this.tok.T_YIELD,this.tok.T_STATIC,this.tok.T_FUNCTION,this.tok.T_FN,this.tok.T_VARIABLE,"$",this.tok.T_NS_SEPARATOR,this.tok.T_STRING,this.tok.T_STRING,this.tok.T_CONSTANT_ENCAPSED_STRING,this.tok.T_START_HEREDOC,this.tok.T_LNUMBER,this.tok.T_DNUMBER,this.tok.T_ARRAY,"[",this.tok.T_CLASS_C,this.tok.T_TRAIT_C,this.tok.T_FUNC_C,this.tok.T_METHOD_C,this.tok.T_LINE,this.tok.T_FILE,this.tok.T_DIR,this.tok.T_NS_C].map(e))}};m.prototype.getTokenName=function(e){return T(e)?e==this.EOF?"the end of file (EOF)":this.lexer.engine.tokens.values[e]:"'"+e+"'"},m.prototype.parse=function(o,t){this._errors=[],this.filename=t||"eval",this.currentNamespace=[""],this._docs=this.extractDoc?[]:null,this._tokens=this.extractTokens?[]:null,this._docIndex=0,this._lastNode=null,this.lexer.setInput(o),this.lexer.all_tokens=this.extractTokens,this.lexer.comment_tokens=this.extractDoc,this.length=this.lexer._input.length,this.innerList=!1,this.innerListForm=!1;var e=this.node("program"),a=[];for(this.next();this.token!=this.EOF;)a.push(this.read_start());0===a.length&&this.extractDoc&&this._docs.length>this._docIndex&&a.push(this.node("noop")()),this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset];var n=e(a,this._errors,this._docs,this._tokens);if(this.debug){var i=this.ast.checkNodes();if(0<i.length)throw i.forEach(function(e){e.position&&console.log("Node at line "+e.position.line+", column "+e.position.column),console.log(e.stack.join("\n"))}),new Error("Some nodes are not closed")}return n},m.prototype.raiseError=function(o,a,e,i){if(o+=" on line "+this.lexer.yylloc.first_line,!this.suppressErrors){var n=new SyntaxError(o,this.filename,this.lexer.yylloc.first_line);throw n.lineNumber=this.lexer.yylloc.first_line,n.fileName=this.filename,n.columnNumber=this.lexer.yylloc.first_column,n}var s=this.ast.prepare("error",null,this)(o,i,this.lexer.yylloc.first_line,e);return this._errors.push(s),s},m.prototype.error=function(o){var t="Parse Error : syntax error",a=this.getTokenName(this.token),r="";if(this.token!==this.EOF){if(T(this.token)){var l=this.text();10<l.length&&(l=l.substring(0,7)+"..."),a="'"+l+"' ("+a+")"}t+=", unexpected "+a}return o&&!Array.isArray(o)&&((T(o)||1===o.length)&&(r=", expecting "+this.getTokenName(o)),t+=r),this.raiseError(t,r,o,a)},m.prototype.node=function(n){if(this.extractDoc){var t=null;this._docIndex<this._docs.length&&(t=this._docs.slice(this._docIndex),this._docIndex=this._docs.length,this.debug&&(console.log(new Error("Append docs on "+n)),console.log(t)));var o=this.ast.prepare(n,t,this);return o.postBuild=function(n){if(this._docIndex<this._docs.length)if(this._lastNode){for(var t=this.prev[2],e=this._docIndex;e<this._docs.length&&!(this._docs[e].offset>t);e++);e>this._docIndex&&(this._lastNode.setTrailingComments(this._docs.slice(this._docIndex,e)),this._docIndex=e)}else this.token===this.EOF&&(n.setTrailingComments(this._docs.slice(this._docIndex)),this._docIndex=this._docs.length);this._lastNode=n}.bind(this),o}return this.ast.prepare(n,null,this)},m.prototype.expectEndOfStatement=function(e){if(";"===this.token)e&&";"===this.lexer.yytext&&e.includeToken(this);else if(this.token!==this.tok.T_INLINE_HTML&&this.token!==this.EOF)return this.error(";"),!1;return this.next(),!0};var N=["parser.next","parser.node","parser.showlog"];m.prototype.showlog=function(){for(var o,a=new Error().stack.split("\n"),e=2;e<a.length;e++){o=a[e].trim();for(var r=!1,l=0;l<N.length;l++)if(o.substring(3,3+N[l].length)===N[l]){r=!0;break}if(!r)break}return console.log("Line "+this.lexer.yylloc.first_line+" : "+this.getTokenName(this.token)+">"+this.lexer.yytext+"< @-->"+o),this},m.prototype.expect=function(e){if(Array.isArray(e)){if(-1===e.indexOf(this.token))return this.error(e),!1;}else if(this.token!=e)return this.error(e),!1;return!0},m.prototype.text=function(){return this.lexer.yytext},m.prototype.next=function(){if(";"===this.token&&";"!==this.lexer.yytext||(this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset]),this.lex(),this.debug&&this.showlog(),this.extractDoc)for(;this.token===this.tok.T_COMMENT||this.token===this.tok.T_DOC_COMMENT;)this.token===this.tok.T_COMMENT?this._docs.push(this.read_comment()):this._docs.push(this.read_doc_comment());return this},m.prototype.lex=function(){if(this.extractTokens)do{if(this.token=this.lexer.lex()||this.EOF,this.token===this.EOF)return this;var e=this.lexer.yytext;if(e=this.lexer.engine.tokens.values.hasOwnProperty(this.token)?[this.lexer.engine.tokens.values[this.token],e,this.lexer.yylloc.first_line,this.lexer.yylloc.first_offset,this.lexer.offset]:[null,e,this.lexer.yylloc.first_line,this.lexer.yylloc.first_offset,this.lexer.offset],this._tokens.push(e),this.token===this.tok.T_CLOSE_TAG)return this.token=";",this;if(this.token===this.tok.T_OPEN_TAG_WITH_ECHO)return this.token=this.tok.T_ECHO,this}while(this.token===this.tok.T_WHITESPACE||!this.extractDoc&&(this.token===this.tok.T_COMMENT||this.token===this.tok.T_DOC_COMMENT)||this.token===this.tok.T_OPEN_TAG);else this.token=this.lexer.lex()||this.EOF;return this},m.prototype.is=function(e){return Array.isArray(e)?-1!==e.indexOf(this.token):this.entries[e].has(this.token)},[{read_array:function(){var o=null,a=!1,r=this.node("array");this.token===this.tok.T_ARRAY?(this.next().expect("("),o=")"):(a=!0,o="]");var i=[];return this.next().token!==o&&(i=this.read_array_pair_list(a)),this.expect(o),this.next(),r(a,i)},read_array_pair_list:function(n){var t=this;return this.read_list(function(){return t.read_array_pair(n)},",",!0)},read_array_pair:function(a){if((a||")"!==this.token)&&(!a||"]"!==this.token)){if(","===this.token)return this.node("noop")();var t=this.node("entry"),e=null,l=null,_=!1,d=!1;if("&"===this.token)this.next(),_=!0,l=this.read_variable(!0,!1);else if(this.token===this.tok.T_ELLIPSIS&&704<=this.version)this.next(),"&"===this.token&&this.error(),d=!0,l=this.read_expr();else{var p=this.read_expr();this.token===this.tok.T_DOUBLE_ARROW?(this.next(),e=p,"&"===this.token?(this.next(),_=!0,l=this.read_variable(!0,!1)):l=this.read_expr()):l=p}return t(e,l,_,d)}}},{read_class_declaration_statement:function(){var o=this.node("class"),t=this.read_class_modifiers();if(this.token!==this.tok.T_CLASS)return this.error(this.tok.T_CLASS),this.next(),null;this.next().expect(this.tok.T_STRING);var e=this.node("identifier"),a=this.text();this.next(),e=e(a);var n=this.read_extends_from(),s=this.read_implements_list();return this.expect("{"),o(e,n,s,this.next().read_class_body(),t)},read_class_modifiers:function(){return[0,0,this.read_class_modifier()]},read_class_modifier:function(){return this.token===this.tok.T_ABSTRACT?(this.next(),1):this.token===this.tok.T_FINAL?(this.next(),2):0},read_class_body:function(){for(var o=[];this.token!==this.EOF&&"}"!==this.token;)if(!(this.token!==this.tok.T_COMMENT))o.push(this.read_comment());else if(this.token===this.tok.T_DOC_COMMENT)o.push(this.read_doc_comment());else if(this.token!==this.tok.T_USE){var a=this.read_member_flags(!1);if(this.token===this.tok.T_CONST){var e=this.read_constant_list(a);this.expect(";")&&this.next(),o=o.concat(e)}else if(this.token===this.tok.T_VAR&&(this.next().expect(this.tok.T_VARIABLE),a[0]=null,a[1]=0),this.token===this.tok.T_FUNCTION)o.push(this.read_function(!1,a));else if(this.token===this.tok.T_VARIABLE||704<=this.version&&("?"===this.token||this.token===this.tok.T_CALLABLE||this.token===this.tok.T_ARRAY||this.token===this.tok.T_NS_SEPARATOR||this.token===this.tok.T_STRING||this.token===this.tok.T_NAMESPACE)){var n=this.read_variable_list(a);this.expect(";"),this.next(),o=o.concat(n)}else this.error([this.tok.T_CONST,this.tok.T_VARIABLE,this.tok.T_FUNCTION]),this.next()}else o=o.concat(this.read_trait_use_statement());return this.expect("}"),this.next(),o},read_variable_list:function(n){var t=this.node("propertystatement"),e=this.read_list(function(){var o=this.node("property"),t=oe(this.read_optional_type(),2),e=t[0],a=t[1];this.expect(this.tok.T_VARIABLE);var n=this.node("identifier"),i=this.text().substring(1);return this.next(),n=n(i),";"===this.token||","===this.token?o(n,null,e,a):"="===this.token?o(n,this.next().read_expr(),e,a):(this.expect([",",";","="]),o(n,null,e,a))},",");return t(null,e,n)},read_constant_list:function(n){this.expect(this.tok.T_CONST)&&this.next();var t=this.node("classconstant"),e=this.read_list(function(){var o=this.node("constant"),t=null,a=null;if(this.token===this.tok.T_STRING||700<=this.version&&this.is("IDENTIFIER")){t=this.node("identifier");var r=this.text();this.next(),t=t(r)}else this.expect("IDENTIFIER");return this.expect("=")&&(a=this.next().read_expr()),o(t,a)},",");return t(null,e,n)},read_member_flags:function(o){var t=[-1,-1,-1];if(this.is("T_MEMBER_FLAGS")){var e=0,a=0;do{switch(this.token){case this.tok.T_PUBLIC:e=0,a=0;break;case this.tok.T_PROTECTED:e=0,a=1;break;case this.tok.T_PRIVATE:e=0,a=2;break;case this.tok.T_STATIC:e=1,a=1;break;case this.tok.T_ABSTRACT:e=2,a=1;break;case this.tok.T_FINAL:e=2,a=2;}o&&(0==e&&2==a?(this.expect([this.tok.T_PUBLIC,this.tok.T_PROTECTED]),a=-1):2==e&&1==a&&(this.error(),a=-1)),-1===t[e]?-1!==a&&(t[e]=a):this.error()}while(this.next().is("T_MEMBER_FLAGS"))}return-1==t[1]&&(t[1]=0),-1==t[2]&&(t[2]=0),t},read_optional_type:function(){var n=!1;"?"===this.token&&(n=!0,this.next());var o=this.read_type();if(n&&!o&&this.raiseError("Expecting a type definition combined with nullable operator"),!n&&!o)return[!1,null];if("|"===this.token){o=[o];do{this.next();var a=this.read_type();if(!a){this.raiseError("Expecting a type definition");break}o.push(a)}while("|"===this.token)}return[n,o]},read_interface_declaration_statement:function(){var o=this.node("interface");if(this.token!==this.tok.T_INTERFACE)return this.error(this.tok.T_INTERFACE),this.next(),null;this.next().expect(this.tok.T_STRING);var t=this.node("identifier"),a=this.text();this.next(),t=t(a);var r=this.read_interface_extends_list();return this.expect("{"),o(t,r,this.next().read_interface_body())},read_interface_body:function(){for(var o=[];this.token!==this.EOF&&"}"!==this.token;)if(!(this.token!==this.tok.T_COMMENT))o.push(this.read_comment());else if(this.token!==this.tok.T_DOC_COMMENT){var a=this.read_member_flags(!0);if(this.token==this.tok.T_CONST){var e=this.read_constant_list(a);this.expect(";")&&this.next(),o=o.concat(e)}else if(this.token===this.tok.T_FUNCTION){var r=this.read_function_declaration(2,a);r.parseFlags(a),o.push(r),this.expect(";")&&this.next()}else this.error([this.tok.T_CONST,this.tok.T_FUNCTION]),this.next()}else o.push(this.read_doc_comment());return this.expect("}")&&this.next(),o},read_trait_declaration_statement:function(){var n=this.node("trait");if(this.token!==this.tok.T_TRAIT)return this.error(this.tok.T_TRAIT),this.next(),null;this.next().expect(this.tok.T_STRING);var t=this.node("identifier"),o=this.text();return this.next(),t=t(o),this.expect("{"),n(t,this.next().read_class_body())},read_trait_use_statement:function(){var n=this.node("traituse");this.expect(this.tok.T_USE)&&this.next();for(var t=[this.read_namespace_name()],e=null;","===this.token;)t.push(this.next().read_namespace_name());if("{"===this.token){for(e=[];this.next().token!==this.EOF&&"}"!==this.token;)e.push(this.read_trait_use_alias()),this.expect(";");this.expect("}")&&this.next()}else this.expect(";")&&this.next();return n(t,e)},read_trait_use_alias:function(){var a,l=this.node(),e=null;if(this.is("IDENTIFIER")){a=this.node("identifier");var _=this.text();this.next(),a=a(_)}else if(!(a=this.read_namespace_name(),this.token===this.tok.T_DOUBLE_COLON))a=a.name;else if(this.next(),this.token===this.tok.T_STRING||700<=this.version&&this.is("IDENTIFIER")){e=a,a=this.node("identifier");var n=this.text();this.next(),a=a(n)}else this.expect(this.tok.T_STRING);if(this.token===this.tok.T_INSTEADOF)return l("traitprecedence",e,a,this.next().read_name_list());if(this.token===this.tok.T_AS){var s=null,d=null;if(this.next().is("T_MEMBER_FLAGS")&&(s=this.read_member_flags()),this.token===this.tok.T_STRING||700<=this.version&&this.is("IDENTIFIER")){d=this.node("identifier");var p=this.text();this.next(),d=d(p)}else!1===s&&this.expect(this.tok.T_STRING);return l("traitalias",e,a,d,s)}return this.expect([this.tok.T_AS,this.tok.T_INSTEADOF]),l("traitalias",e,a,null,null)}},{read_comment:function(){var o=this.text(),t=this.ast.prepare("/*"===o.substring(0,2)?"commentblock":"commentline",null,this),a=this.lexer.yylloc.first_offset,r=this.prev;return this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset],this.lex(),(t=t(o)).offset=a,this.prev=r,t},read_doc_comment:function(){var o=this.ast.prepare("commentblock",null,this),a=this.lexer.yylloc.first_offset,e=this.text(),r=this.prev;return this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset],this.lex(),(o=o(e)).offset=a,this.prev=r,o}},{read_expr:function(n){var o=this.node();if("@"===this.token)return n||(n=this.next().read_expr()),o("silent",n);if(n||(n=this.read_expr_item()),"|"===this.token)return o("bin","|",n,this.next().read_expr());if("&"===this.token)return o("bin","&",n,this.next().read_expr());if("^"===this.token)return o("bin","^",n,this.next().read_expr());if("."===this.token)return o("bin",".",n,this.next().read_expr());if("+"===this.token)return o("bin","+",n,this.next().read_expr());if("-"===this.token)return o("bin","-",n,this.next().read_expr());if("*"===this.token)return o("bin","*",n,this.next().read_expr());if("/"===this.token)return o("bin","/",n,this.next().read_expr());if("%"===this.token)return o("bin","%",n,this.next().read_expr());if(this.token===this.tok.T_POW)return o("bin","**",n,this.next().read_expr());if(this.token===this.tok.T_SL)return o("bin","<<",n,this.next().read_expr());if(this.token===this.tok.T_SR)return o("bin",">>",n,this.next().read_expr());if(this.token===this.tok.T_BOOLEAN_OR)return o("bin","||",n,this.next().read_expr());if(this.token===this.tok.T_LOGICAL_OR)return o("bin","or",n,this.next().read_expr());if(this.token===this.tok.T_BOOLEAN_AND)return o("bin","&&",n,this.next().read_expr());if(this.token===this.tok.T_LOGICAL_AND)return o("bin","and",n,this.next().read_expr());if(this.token===this.tok.T_LOGICAL_XOR)return o("bin","xor",n,this.next().read_expr());if(this.token===this.tok.T_IS_IDENTICAL)return o("bin","===",n,this.next().read_expr());if(this.token===this.tok.T_IS_NOT_IDENTICAL)return o("bin","!==",n,this.next().read_expr());if(this.token===this.tok.T_IS_EQUAL)return o("bin","==",n,this.next().read_expr());if(this.token===this.tok.T_IS_NOT_EQUAL)return o("bin","!=",n,this.next().read_expr());if("<"===this.token)return o("bin","<",n,this.next().read_expr());if(">"===this.token)return o("bin",">",n,this.next().read_expr());if(this.token===this.tok.T_IS_SMALLER_OR_EQUAL)return o("bin","<=",n,this.next().read_expr());if(this.token===this.tok.T_IS_GREATER_OR_EQUAL)return o("bin",">=",n,this.next().read_expr());if(this.token===this.tok.T_SPACESHIP)return o("bin","<=>",n,this.next().read_expr());if(this.token===this.tok.T_INSTANCEOF&&(n=o("bin","instanceof",n,this.next().read_class_name_reference()),";"!==this.token&&this.token!==this.tok.T_INLINE_HTML&&this.token!==this.EOF&&(n=this.read_expr(n))),this.token===this.tok.T_COALESCE)return o("bin","??",n,this.next().read_expr());if("?"===this.token){var e=null;return":"!==this.next().token&&(e=this.read_expr()),this.expect(":")&&this.next(),o("retif",n,e,this.read_expr())}return o.destroy(n),n},read_expr_cast:function(e){return this.node("cast")(e,this.text(),this.next().read_expr())},read_isset_variable:function(){return this.read_expr()},read_isset_variables:function(){return this.read_function_list(this.read_isset_variable,",")},read_internal_functions_in_yacc:function(){var o=null;switch(this.token){case this.tok.T_ISSET:o=this.node("isset"),this.next().expect("(")&&this.next();var a=this.read_isset_variables();this.expect(")")&&this.next(),o=o(a);break;case this.tok.T_EMPTY:o=this.node("empty"),this.next().expect("(")&&this.next();var e=this.read_expr();this.expect(")")&&this.next(),o=o(e);break;case this.tok.T_INCLUDE:o=this.node("include")(!1,!1,this.next().read_expr());break;case this.tok.T_INCLUDE_ONCE:o=this.node("include")(!0,!1,this.next().read_expr());break;case this.tok.T_EVAL:o=this.node("eval"),this.next().expect("(")&&this.next();var r=this.read_expr();this.expect(")")&&this.next(),o=o(r);break;case this.tok.T_REQUIRE:o=this.node("include")(!1,!0,this.next().read_expr());break;case this.tok.T_REQUIRE_ONCE:o=this.node("include")(!0,!0,this.next().read_expr());}return o},read_optional_expr:function(e){return this.token===e?null:this.read_expr()},read_exit_expr:function(){var e=null;return"("===this.token&&(this.next(),e=this.read_optional_expr(")"),this.expect(")")&&this.next()),e},read_expr_item:function(){var d,p;if("+"===this.token)return this.node("unary")("+",this.next().read_expr());if("-"===this.token)return this.node("unary")("-",this.next().read_expr());if("!"===this.token)return this.node("unary")("!",this.next().read_expr());if("~"===this.token)return this.node("unary")("~",this.next().read_expr());if("("===this.token)return(p=this.next().read_expr()).parenthesizedExpression=!0,this.expect(")")&&this.next(),this.handleDereferencable(p);if("`"===this.token)return this.read_encapsed_string("`");if(this.token===this.tok.T_LIST){var T=null,k=this.innerList;d=this.node("list"),k||(T=this.node("assign")),this.next().expect("(")&&this.next(),this.innerList||(this.innerList=!0);var n=this.read_array_pair_list(!1);this.expect(")")&&this.next();for(var s=!1,x=0;x<n.length;x++)if(null!==n[x]&&"noop"!==n[x].kind){s=!0;break}return s||this.raiseError("Fatal Error :  Cannot use empty list on line "+this.lexer.yylloc.first_line),k?d(n,!1):(this.innerList=!1,this.expect("=")?T(d(n,!1),this.next().read_expr(),"="):d(n,!1))}if(this.token===this.tok.T_CLONE)return this.node("clone")(this.next().read_expr());switch(this.token){case this.tok.T_INC:return this.node("pre")("+",this.next().read_variable(!1,!1));case this.tok.T_DEC:return this.node("pre")("-",this.next().read_variable(!1,!1));case this.tok.T_NEW:return this.read_new_expr();case this.tok.T_ISSET:case this.tok.T_EMPTY:case this.tok.T_INCLUDE:case this.tok.T_INCLUDE_ONCE:case this.tok.T_EVAL:case this.tok.T_REQUIRE:case this.tok.T_REQUIRE_ONCE:return this.read_internal_functions_in_yacc();case this.tok.T_INT_CAST:return this.read_expr_cast("int");case this.tok.T_DOUBLE_CAST:return this.read_expr_cast("float");case this.tok.T_STRING_CAST:return this.read_expr_cast(-1===this.text().indexOf("binary")?"string":"binary");case this.tok.T_ARRAY_CAST:return this.read_expr_cast("array");case this.tok.T_OBJECT_CAST:return this.read_expr_cast("object");case this.tok.T_BOOL_CAST:return this.read_expr_cast("bool");case this.tok.T_UNSET_CAST:return this.read_expr_cast("unset");case this.tok.T_EXIT:var E="die"===this.lexer.yytext.toLowerCase();return d=this.node("exit"),this.next(),d(this.read_exit_expr(),E);case this.tok.T_PRINT:return this.node("print")(this.next().read_expr());case this.tok.T_YIELD:var f=null,m=null;return d=this.node("yield"),this.next().is("EXPR")&&(f=this.read_expr(),this.token===this.tok.T_DOUBLE_ARROW&&(m=f,f=this.next().read_expr())),d(f,m);case this.tok.T_YIELD_FROM:return(d=this.node("yieldfrom"))(p=this.next().read_expr());case this.tok.T_FN:case this.tok.T_FUNCTION:return this.read_inline_function();case this.tok.T_STATIC:var y=[this.token,this.lexer.getState()];if(this.next(),this.token===this.tok.T_FUNCTION||704<=this.version&&this.token===this.tok.T_FN)return this.read_inline_function([0,1,0]);this.lexer.tokens.push(y),this.next();}if(this.is("VARIABLE")){d=this.node();var c="identifier"===(p=this.read_variable(!1,!1)).kind||"staticlookup"===p.kind&&"identifier"===p.offset.kind;switch(this.token){case"=":return c&&this.error("VARIABLE"),"&"==this.next().token?this.read_assignref(d,p):d("assign",p,this.read_expr(),"=");case this.tok.T_PLUS_EQUAL:return c&&this.error("VARIABLE"),d("assign",p,this.next().read_expr(),"+=");case this.tok.T_MINUS_EQUAL:return c&&this.error("VARIABLE"),d("assign",p,this.next().read_expr(),"-=");case this.tok.T_MUL_EQUAL:return c&&this.error("VARIABLE"),d("assign",p,this.next().read_expr(),"*=");case this.tok.T_POW_EQUAL:return c&&this.error("VARIABLE"),d("assign",p,this.next().read_expr(),"**=");case this.tok.T_DIV_EQUAL:return c&&this.error("VARIABLE"),d("assign",p,this.next().read_expr(),"/=");case this.tok.T_CONCAT_EQUAL:return c&&this.error("VARIABLE"),d("assign",p,this.next().read_expr(),".=");case this.tok.T_MOD_EQUAL:return c&&this.error("VARIABLE"),d("assign",p,this.next().read_expr(),"%=");case this.tok.T_AND_EQUAL:return c&&this.error("VARIABLE"),d("assign",p,this.next().read_expr(),"&=");case this.tok.T_OR_EQUAL:return c&&this.error("VARIABLE"),d("assign",p,this.next().read_expr(),"|=");case this.tok.T_XOR_EQUAL:return c&&this.error("VARIABLE"),d("assign",p,this.next().read_expr(),"^=");case this.tok.T_SL_EQUAL:return c&&this.error("VARIABLE"),d("assign",p,this.next().read_expr(),"<<=");case this.tok.T_SR_EQUAL:return c&&this.error("VARIABLE"),d("assign",p,this.next().read_expr(),">>=");case this.tok.T_COALESCE_EQUAL:return c&&this.error("VARIABLE"),d("assign",p,this.next().read_expr(),"??=");case this.tok.T_INC:return c&&this.error("VARIABLE"),this.next(),d("post","+",p);case this.tok.T_DEC:return c&&this.error("VARIABLE"),this.next(),d("post","-",p);default:d.destroy(p);}}else{if(this.is("SCALAR")){if(d=this.node(),"array"===(p=this.read_scalar()).kind&&p.shortForm&&"="===this.token){var u=this.node("list")(p.items,!0);return p.loc&&(u.loc=p.loc),d("assign",u,this.next().read_expr(),"=")}return d.destroy(p),this.handleDereferencable(p)}this.error("EXPR"),this.next()}return p},read_assignref:function(n,t){var e;return this.next(),this.token===this.tok.T_NEW?(700<=this.version&&this.error(),e=this.read_new_expr()):e=this.read_variable(!1,!1),n("assignref",t,e)},read_inline_function:function(o){if(this.token===this.tok.T_FUNCTION)return this.read_function(!0,o);704<=!this.version&&this.raiseError("Arrow Functions are not allowed");var t=this.node("arrowfunc");this.expect(this.tok.T_FN)&&this.next();var e=this.is_reference();this.expect("(")&&this.next();var a=this.read_parameter_list();this.expect(")")&&this.next();var n=!1,i=null;return":"===this.token&&("?"===this.next().token&&(n=!0,this.next()),i=this.read_type()),this.expect(this.tok.T_DOUBLE_ARROW)&&this.next(),t(a,e,this.read_expr(),i,n,!!o)},read_new_expr:function(){var a=this.node("new");this.expect(this.tok.T_NEW)&&this.next();var t=[];if(this.token===this.tok.T_CLASS){var l=this.node("class");"("===this.next().token&&(t=this.read_argument_list());var i=this.read_extends_from(),n=this.read_implements_list(),s=null;return this.expect("{")&&(s=this.next().read_class_body()),a(l(null,i,n,s,[0,0,0]),t)}var _=this.read_new_class_name();return"("===this.token&&(t=this.read_argument_list()),a(_,t)},read_new_class_name:function(){if(this.token===this.tok.T_NS_SEPARATOR||this.token===this.tok.T_STRING||this.token===this.tok.T_NAMESPACE){var e=this.read_namespace_name(!0);return this.token===this.tok.T_DOUBLE_COLON&&(e=this.read_static_getter(e)),e}return this.is("VARIABLE")?this.read_variable(!0,!1):void this.expect([this.tok.T_STRING,"VARIABLE"])},handleDereferencable:function(e){for(;this.token!==this.EOF;)if(this.token===this.tok.T_OBJECT_OPERATOR||this.token===this.tok.T_DOUBLE_COLON)e=this.recursive_variable_chain_scan(e,!1,!1,!0);else if(this.token===this.tok.T_CURLY_OPEN||"["===this.token)e=this.read_dereferencable(e);else{if("("!==this.token)return e;e=this.node("call")(e,this.read_argument_list())}return e}},{is_reference:function(){return"&"==this.token&&(this.next(),!0)},is_variadic:function(){return this.token===this.tok.T_ELLIPSIS&&(this.next(),!0)},read_function:function(n,t){var e=this.read_function_declaration(n?1:t?2:0,t&&1===t[1]);return t&&1==t[2]?(e.parseFlags(t),this.expect(";")&&this.next()):(this.expect("{")&&(e.body=this.read_code_block(!1),e.loc&&e.body.loc&&(e.loc.end=e.body.loc.end)),!n&&t&&e.parseFlags(t)),e},read_function_declaration:function(_,t){var e="function";1===_?e="closure":2==_&&(e="method");var d=this.node(e);this.expect(this.tok.T_FUNCTION)&&this.next();var n=this.is_reference(),s=!1,p=[],T=null,k=!1;if(1!==_){var u=this.node("identifier");2===_?700<=this.version?this.token===this.tok.T_STRING||this.is("IDENTIFIER")?(s=this.text(),this.next()):704>this.version&&this.error("IDENTIFIER"):this.token===this.tok.T_STRING?(s=this.text(),this.next()):this.error("IDENTIFIER"):700<=this.version?this.token===this.tok.T_STRING?(s=this.text(),this.next()):704<=this.version?this.expect("(")||this.next():(this.error(this.tok.T_STRING),this.next()):(this.expect(this.tok.T_STRING)&&(s=this.text()),this.next()),s=u(s)}this.expect("(")&&this.next();var l=this.read_parameter_list();return this.expect(")")&&this.next(),1===_&&(p=this.read_lexical_vars()),":"===this.token&&("?"===this.next().token&&(k=!0,this.next()),T=this.read_type()),1===_?d(l,n,p,T,k,t):d(s,l,n,T,k)},read_lexical_vars:function(){var e=[];return this.token===this.tok.T_USE&&(this.next(),this.expect("(")&&this.next(),e=this.read_lexical_var_list(),this.expect(")")&&this.next()),e},read_lexical_var_list:function(){return this.read_list(this.read_lexical_var,",")},read_lexical_var:function(){if("&"===this.token)return this.read_byref(this.read_lexical_var.bind(this));var n=this.node("variable");this.expect(this.tok.T_VARIABLE);var t=this.text().substring(1);return this.next(),n(t,!1)},read_parameter_list:function(){var e=[];if(")"!=this.token)for(;this.token!=this.EOF;){if(e.push(this.read_parameter()),","!=this.token){if(")"==this.token)break;this.error([",",")"]);break}this.next()}return e},read_parameter:function(){var a,l=this.node("parameter"),e=null,_=null,d=!1;"?"===this.token&&(this.next(),d=!0),a=this.read_type(),d&&!a&&this.raiseError("Expecting a type definition combined with nullable operator");var p=this.is_reference(),r=this.is_variadic();if(this.expect(this.tok.T_VARIABLE)){e=this.node("identifier");var o=this.text().substring(1);this.next(),e=e(o)}return"="==this.token&&(_=this.next().read_expr()),l(e,a,_,p,r,d)},read_argument_list:function(){var e=[];return this.expect("(")&&this.next(),")"!==this.token&&(e=this.read_non_empty_argument_list()),this.expect(")")&&this.next(),e},read_non_empty_argument_list:function(){var n=!1;return this.read_function_list(function(){var t=this.read_argument();return t&&(n&&this.raiseError("Unexpected argument after a variadic argument"),"variadic"===t.kind&&(n=!0)),t}.bind(this),",")},read_argument:function(){return this.token===this.tok.T_ELLIPSIS?this.node("variadic")(this.next().read_expr()):this.read_expr()},read_type:function(){var o=this.node();if(this.token===this.tok.T_ARRAY||this.token===this.tok.T_CALLABLE){var t=this.text();return this.next(),o("typereference",t.toLowerCase(),t)}if(this.token===this.tok.T_STRING){var e=this.text(),a=[this.token,this.lexer.getState()];return this.next(),this.token!==this.tok.T_NS_SEPARATOR&&-1<this.ast.typereference.types.indexOf(e.toLowerCase())?o("typereference",e.toLowerCase(),e):(this.lexer.tokens.push(a),this.next(),o.destroy(),this.read_namespace_name())}return this.token===this.tok.T_NAMESPACE||this.token===this.tok.T_NS_SEPARATOR?(o.destroy(),this.read_namespace_name()):(o.destroy(),null)}},{read_if:function(){var o=this.node("if"),t=this.next().read_if_expr(),e=null,a=null,l=!1;if(":"===this.token){l=!0,this.next(),e=this.node("block");for(var _=[];this.token!==this.EOF&&this.token!==this.tok.T_ENDIF;){if(this.token===this.tok.T_ELSEIF){a=this.read_elseif_short();break}if(this.token===this.tok.T_ELSE){a=this.read_else_short();break}_.push(this.read_inner_statement())}e=e(null,_),this.expect(this.tok.T_ENDIF)&&this.next(),this.expectEndOfStatement()}else e=this.read_statement(),this.token===this.tok.T_ELSEIF?a=this.read_if():this.token===this.tok.T_ELSE&&(a=this.next().read_statement());return o(t,e,a,l)},read_if_expr:function(){this.expect("(")&&this.next();var e=this.read_expr();return this.expect(")")&&this.next(),e},read_elseif_short:function(){var o=null,a=this.node("if"),e=this.next().read_if_expr();this.expect(":")&&this.next();for(var r=this.node("block"),n=[];this.token!=this.EOF&&this.token!==this.tok.T_ENDIF;){if(this.token===this.tok.T_ELSEIF){o=this.read_elseif_short();break}if(this.token===this.tok.T_ELSE){o=this.read_else_short();break}n.push(this.read_inner_statement())}return a(e,r(null,n),o,!0)},read_else_short:function(){this.next().expect(":")&&this.next();for(var n=this.node("block"),t=[];this.token!=this.EOF&&this.token!==this.tok.T_ENDIF;)t.push(this.read_inner_statement());return n(null,t)}},{read_while:function(){var o=this.node("while");this.expect(this.tok.T_WHILE)&&this.next();var t,a=null,r=!1;return this.expect("(")&&this.next(),t=this.read_expr(),this.expect(")")&&this.next(),":"===this.token?(r=!0,a=this.read_short_form(this.tok.T_ENDWHILE)):a=this.read_statement(),o(t,a,r)},read_do:function(){var n=this.node("do");this.expect(this.tok.T_DO)&&this.next();var t,o=null;return t=this.read_statement(),this.expect(this.tok.T_WHILE)&&(this.next().expect("(")&&this.next(),o=this.read_expr(),this.expect(")")&&this.next(),this.expect(";")&&this.next()),n(o,t)},read_for:function(){var o=this.node("for");this.expect(this.tok.T_FOR)&&this.next();var t=[],a=[],l=[],_=null,d=!1;return this.expect("(")&&this.next(),";"===this.token?this.next():(t=this.read_list(this.read_expr,","),this.expect(";")&&this.next()),";"===this.token?this.next():(a=this.read_list(this.read_expr,","),this.expect(";")&&this.next()),")"===this.token?this.next():(l=this.read_list(this.read_expr,","),this.expect(")")&&this.next()),":"===this.token?(d=!0,_=this.read_short_form(this.tok.T_ENDFOR)):_=this.read_statement(),o(t,a,l,_,d)},read_foreach:function(){var o=this.node("foreach");this.expect(this.tok.T_FOREACH)&&this.next();var t,a=null,l=null,_=null,d=!1;return this.expect("(")&&this.next(),t=this.read_expr(),this.expect(this.tok.T_AS)&&(this.next(),l=this.read_foreach_variable(),this.token===this.tok.T_DOUBLE_ARROW&&(a=l,l=this.next().read_foreach_variable())),a&&"list"===a.kind&&this.raiseError("Fatal Error : Cannot use list as key element"),this.expect(")")&&this.next(),":"===this.token?(d=!0,_=this.read_short_form(this.tok.T_ENDFOREACH)):_=this.read_statement(),o(t,a,l,_,d)},read_foreach_variable:function(){if(this.token===this.tok.T_LIST||"["===this.token){var n="["===this.token,t=this.node("list");this.next(),!n&&this.expect("(")&&this.next();var e=this.read_array_pair_list(n);return this.expect(n?"]":")")&&this.next(),t(e,n)}return this.read_variable(!1,!1)}},{read_start:function(){return this.token==this.tok.T_NAMESPACE?this.read_namespace():this.read_top_statement()}},{read_namespace:function(){var n,o,a=this.node("namespace");return this.expect(this.tok.T_NAMESPACE)&&this.next(),o="{"==this.token?{name:[""]}:this.read_namespace_name(),this.currentNamespace=o,";"==this.token?(this.currentNamespace=o,n=this.next().read_top_statements(),this.expect(this.EOF),a(o.name,n,!1)):"{"==this.token?(this.currentNamespace=o,n=this.next().read_top_statements(),this.expect("}")&&this.next(),0===n.length&&this.extractDoc&&this._docs.length>this._docIndex&&n.push(this.node("noop")()),a(o.name,n,!0)):"("===this.token?(o.resolution=this.ast.reference.RELATIVE_NAME,o.name=o.name.substring(1),a.destroy(),this.node("call")(o,this.read_argument_list())):(this.error(["{",";"]),this.currentNamespace=o,n=this.read_top_statements(),this.expect(this.EOF),a(o,n,!1))},read_namespace_name:function(o){var t=this.node(),e=!1;this.token===this.tok.T_NAMESPACE&&(this.next().expect(this.tok.T_NS_SEPARATOR)&&this.next(),e=!0);var a=this.read_list(this.tok.T_STRING,this.tok.T_NS_SEPARATOR,!0);if(!e&&1===a.length&&(o||"("!==this.token)){if("parent"===a[0].toLowerCase())return t("parentreference",a[0]);if("self"===a[0].toLowerCase())return t("selfreference",a[0])}return t("name",a,e)},read_use_statement:function(){var o=this.node("usegroup"),a=[],r=null;this.expect(this.tok.T_USE)&&this.next();var s=this.read_use_type();return a.push(this.read_use_declaration(!1)),","===this.token?a=a.concat(this.next().read_use_declarations(!1)):"{"===this.token&&(r=a[0].name,a=this.next().read_use_declarations(null===s),this.expect("}")&&this.next()),o=o(r,s,a),this.expect(";")&&this.next(),o},read_class_name_reference:function(){return this.read_variable(!0,!1)},read_use_declaration:function(o){var t=this.node("useitem"),e=null;o&&(e=this.read_use_type());var a=this.read_namespace_name(),n=this.read_use_alias();return t(a.name,n,e)},read_use_declarations:function(n){for(var t=[this.read_use_declaration(n)];","===this.token;){if(this.next(),n){if(this.token!==this.tok.T_FUNCTION&&this.token!==this.tok.T_CONST&&this.token!==this.tok.T_STRING)break;}else if(this.token!==this.tok.T_STRING&&this.token!==this.tok.T_NS_SEPARATOR)break;t.push(this.read_use_declaration(n))}return t},read_use_alias:function(){var n=null;if(this.token===this.tok.T_AS&&this.next().expect(this.tok.T_STRING)){var o=this.node("identifier"),e=this.text();this.next(),n=o(e)}return n},read_use_type:function(){return this.token===this.tok.T_FUNCTION?(this.next(),this.ast.useitem.TYPE_FUNCTION):this.token===this.tok.T_CONST?(this.next(),this.ast.useitem.TYPE_CONST):null}},{resolve_special_chars:function(n,t){return t?n.replace(/\\"/,"\"").replace(/\\([\\$nrtfve]|[xX][0-9a-fA-F]{1,2}|[0-7]{1,3}|u{([0-9a-fA-F]+)})/g,function(n,t,e){var o=String.fromCodePoint;return u[t]?u[t]:"x"===t[0]||"X"===t[0]?o(parseInt(t.substr(1),16)):"u"===t[0]?o(parseInt(e,16)):o(parseInt(t,8))}):n.replace(/\\\\/g,"\\").replace(/\\'/g,"'")},remove_heredoc_leading_whitespace_chars:function(a,l,e,i){if(0===l)return a;this.check_heredoc_indentation_level(a,l,e,i);var n=e?" ":"\t",s=new RegExp("\\n".concat(n,"{").concat(l,"}"),"g"),r=new RegExp("^".concat(n,"{").concat(l,"}"));return i&&(a=a.replace(r,"")),a.replace(s,"\n")},check_heredoc_indentation_level:function(_,t,e,i){var n=_.length,s=0,d=0,p=!0,c=e?" ":"\t",a=!1;if(!i){if(-1===(s=_.indexOf("\n")))return;s++}for(;s<n;)p?_[s]===c?d++:a=!0:p=!1,"\n"!==_[s]&&a&&d<t?this.raiseError("Invalid body indentation level (expecting an indentation at least ".concat(t,")")):a=!1,"\n"===_[s]&&(p=!0,d=0),s++},read_dereferencable_scalar:function(){var o=null;switch(this.token){case this.tok.T_CONSTANT_ENCAPSED_STRING:var a=this.node("string"),r=this.text(),i=0;"b"!==r[0]&&"B"!==r[0]||(i=1);var l="\""===r[i];this.next(),a=a(l,this.resolve_special_chars(r.substring(i+1,r.length-1),l),1==i,r),o=this.token===this.tok.T_DOUBLE_COLON?this.read_static_getter(a):a;break;case this.tok.T_ARRAY:case"[":o=this.read_array();}return o},read_scalar:function(){if(this.is("T_MAGIC_CONST"))return this.get_magic_constant();var a,l;switch(this.token){case this.tok.T_LNUMBER:case this.tok.T_DNUMBER:var _=this.node("number");return a=this.text(),this.next(),_(a,null);case this.tok.T_START_HEREDOC:if("ST_NOWDOC"===this.lexer.curCondition){var i=this.lexer.yylloc.first_offset;l=this.node("nowdoc"),a=this.next().text(),0<this.lexer.heredoc_label.indentation&&(a=a.substring(0,a.length-this.lexer.heredoc_label.indentation));var n=a[a.length-1];"\n"===n?a="\r"===a[a.length-2]?a.substring(0,a.length-2):a.substring(0,a.length-1):"\r"===n&&(a=a.substring(0,a.length-1)),this.expect(this.tok.T_ENCAPSED_AND_WHITESPACE)&&this.next(),this.expect(this.tok.T_END_HEREDOC)&&this.next();var s=this.lexer._input.substring(i,this.lexer.yylloc.first_offset);return l=l(this.remove_heredoc_leading_whitespace_chars(a,this.lexer.heredoc_label.indentation,this.lexer.heredoc_label.indentation_uses_spaces,this.lexer.heredoc_label.first_encaps_node),s,this.lexer.heredoc_label.label)}return this.read_encapsed_string(this.tok.T_END_HEREDOC);case"\"":return this.read_encapsed_string("\"");case"b\"":case"B\"":return this.read_encapsed_string("\"",!0);case this.tok.T_CONSTANT_ENCAPSED_STRING:case this.tok.T_ARRAY:case"[":return this.read_dereferencable_scalar();default:var r=this.error("SCALAR");return this.next(),r;}},read_dereferencable:function(o){var t,a,r=this.node("offsetlookup");return"["===this.token?(a=this.next().read_expr(),this.expect("]")&&this.next(),t=r(o,a)):this.token===this.tok.T_DOLLAR_OPEN_CURLY_BRACES&&(t=r(o,a=this.read_encapsed_string_item(!1))),t},read_encapsed_string_item:function(_){var t,d,p,T=this.node("encapsedpart"),s=null,k=!1,x=this.node();if(this.token===this.tok.T_ENCAPSED_AND_WHITESPACE){var E=this.text();this.next(),x=x("string",!1,703<=this.version&&!this.lexer.heredoc_label.finished?this.remove_heredoc_leading_whitespace_chars(this.resolve_special_chars(E,_),this.lexer.heredoc_label.indentation,this.lexer.heredoc_label.indentation_uses_spaces,this.lexer.heredoc_label.first_encaps_node):E,!1,E)}else if(this.token===this.tok.T_DOLLAR_OPEN_CURLY_BRACES){if(s="simple",k=!0,p=null,this.next().token===this.tok.T_STRING_VARNAME){p=this.node("variable");var a=this.text();this.next(),"["===this.token?(p=p(a,!1),d=this.node("offsetlookup"),t=this.next().read_expr(),this.expect("]")&&this.next(),x=d(p,t)):x=p(a,!1)}else x=x("variable",this.read_expr(),!1);this.expect("}")&&this.next()}else if(this.token===this.tok.T_CURLY_OPEN)s="complex",x.destroy(),x=this.next().read_variable(!1,!1),this.expect("}")&&this.next();else if(!(this.token===this.tok.T_VARIABLE)){this.expect(this.tok.T_ENCAPSED_AND_WHITESPACE);var l=this.text();this.next(),x.destroy(),x=x("string",!1,l,!1,l)}else if(s="simple",x.destroy(),x=this.read_simple_variable(),"["===this.token&&(d=this.node("offsetlookup"),t=this.next().read_encaps_var_offset(),this.expect("]")&&this.next(),x=d(x,t)),this.token===this.tok.T_OBJECT_OPERATOR){d=this.node("propertylookup"),this.next().expect(this.tok.T_STRING);var u=this.node("identifier");p=this.text(),this.next(),x=d(x,u(p))}return this.lexer.heredoc_label.first_encaps_node=!1,T(x,s,k)},read_encapsed_string:function(_){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],e=this.lexer.yylloc.first_offset,i=this.node("encapsed");this.next();var d=this.lexer.yylloc.prev_offset-(t?1:0),s=[],r=null;for(r="`"===_?this.ast.encapsed.TYPE_SHELL:"\""===_?this.ast.encapsed.TYPE_STRING:this.ast.encapsed.TYPE_HEREDOC;this.token!==_&&this.token!==this.EOF;)s.push(this.read_encapsed_string_item(!0));if(0<s.length&&"encapsedpart"===s[s.length-1].kind&&"string"===s[s.length-1].expression.kind){var p=s[s.length-1].expression,c=p.value[p.value.length-1];"\n"===c?"\r"===p.value[p.value.length-2]?p.value=p.value.substring(0,p.value.length-2):p.value=p.value.substring(0,p.value.length-1):"\r"===c&&(p.value=p.value.substring(0,p.value.length-1))}this.expect(_)&&this.next();var a=this.lexer._input.substring("heredoc"===r?e:d-1,this.lexer.yylloc.first_offset);return i=i(s,a,r),_===this.tok.T_END_HEREDOC&&(i.label=this.lexer.heredoc_label.label,this.lexer.heredoc_label.finished=!0),i},get_magic_constant:function(){var n=this.node("magic"),t=this.text();return this.next(),n(t.toUpperCase(),t)}},{read_top_statements:function(){for(var n,o=[];this.token!==this.EOF&&"}"!==this.token;)n=this.read_top_statement(),n&&(Array.isArray(n)?o=o.concat(n):o.push(n));return o},read_top_statement:function(){switch(this.token){case this.tok.T_FUNCTION:return this.read_function(!1,!1);case this.tok.T_ABSTRACT:case this.tok.T_FINAL:case this.tok.T_CLASS:return this.read_class_declaration_statement();case this.tok.T_INTERFACE:return this.read_interface_declaration_statement();case this.tok.T_TRAIT:return this.read_trait_declaration_statement();case this.tok.T_USE:return this.read_use_statement();case this.tok.T_CONST:var n=this.node("constantstatement"),t=this.next().read_const_list();return this.expectEndOfStatement(),n(null,t);case this.tok.T_NAMESPACE:return this.read_namespace();case this.tok.T_HALT_COMPILER:var e=this.node("halt");return this.next().expect("(")&&this.next(),this.expect(")")&&this.next(),this.expect(";"),this.lexer.done=!0,e(this.lexer._input.substring(this.lexer.offset));default:return this.read_statement();}},read_inner_statements:function(){for(var n,o=[];this.token!=this.EOF&&"}"!==this.token;)n=this.read_inner_statement(),n&&(Array.isArray(n)?o=o.concat(n):o.push(n));return o},read_const_list:function(){return this.read_list(function(){this.expect(this.tok.T_STRING);var n=this.node("constant"),t=this.node("identifier"),o=this.text();return this.next(),t=t(o),this.expect("=")?n(t,this.next().read_expr()):n(t,null)},",",!1)},read_declare_list:function(){for(var o=[];this.token!=this.EOF&&")"!==this.token;){this.expect(this.tok.T_STRING);var t=this.node("declaredirective"),e=this.node("identifier"),a=this.text();this.next(),e=e(a);var n=null;if(this.expect("=")&&(n=this.next().read_expr()),o.push(t(e,n)),","!==this.token)break;this.next()}return o},read_inner_statement:function(){switch(this.token){case this.tok.T_FUNCTION:return this.read_function(!1,!1);case this.tok.T_ABSTRACT:case this.tok.T_FINAL:case this.tok.T_CLASS:return this.read_class_declaration_statement();case this.tok.T_INTERFACE:return this.read_interface_declaration_statement();case this.tok.T_TRAIT:return this.read_trait_declaration_statement();case this.tok.T_HALT_COMPILER:this.raiseError("__HALT_COMPILER() can only be used from the outermost scope");var e=this.node("halt");return this.next().expect("(")&&this.next(),this.expect(")")&&this.next(),e=e(this.lexer._input.substring(this.lexer.offset)),this.expect(";")&&this.next(),e;default:return this.read_statement();}},read_statement:function(){switch(this.token){case"{":return this.read_code_block(!1);case this.tok.T_IF:return this.read_if();case this.tok.T_SWITCH:return this.read_switch();case this.tok.T_FOR:return this.read_for();case this.tok.T_FOREACH:return this.read_foreach();case this.tok.T_WHILE:return this.read_while();case this.tok.T_DO:return this.read_do();case this.tok.T_COMMENT:return this.read_comment();case this.tok.T_DOC_COMMENT:return this.read_doc_comment();case this.tok.T_RETURN:var _=this.node("return");this.next();var t=this.read_optional_expr(";");return this.expectEndOfStatement(),_(t);case this.tok.T_BREAK:case this.tok.T_CONTINUE:var e=this.node(this.token===this.tok.T_CONTINUE?"continue":"break");this.next();var i=this.read_optional_expr(";");return this.expectEndOfStatement(),e(i);case this.tok.T_GLOBAL:var n=this.node("global"),s=this.next().read_list(this.read_simple_variable,",");return this.expectEndOfStatement(),n(s);case this.tok.T_STATIC:var r=[this.token,this.lexer.getState()],o=this.node();if(this.next().token===this.tok.T_DOUBLE_COLON){this.lexer.tokens.push(r);var h=this.next().read_expr();return this.expectEndOfStatement(h),o("expressionstatement",h)}if(this.token===this.tok.T_FUNCTION)return this.read_function(!0,[0,1,0]);var a=this.read_variable_declarations();return this.expectEndOfStatement(),o("static",a);case this.tok.T_ECHO:var l=this.node("echo"),c=this.text(),u=this.next().read_function_list(this.read_expr,",");return this.expectEndOfStatement(),l(u,"<?="===c||"<%="===c);case this.tok.T_INLINE_HTML:var d=this.text(),p=0<this.lexer.yylloc.first_offset?this.lexer._input[this.lexer.yylloc.first_offset-1]:null,B="\r"===p||"\n"===p;B&&"\n"===p&&1<this.lexer.yylloc.first_offset&&"\r"===this.lexer._input[this.lexer.yylloc.first_offset-2]&&(p="\r\n");var T=this.node("inline");return this.next(),T(d,B?p+d:d);case this.tok.T_UNSET:var k=this.node("unset");this.next().expect("(")&&this.next();var x=this.read_function_list(this.read_variable,",");return this.expect(")")&&this.next(),this.expect(";")&&this.next(),k(x);case this.tok.T_DECLARE:var E,F=this.node("declare"),y=[];this.next().expect("(")&&this.next();var v=this.read_declare_list();if(this.expect(")")&&this.next(),":"===this.token){for(this.next();this.token!=this.EOF&&this.token!==this.tok.T_ENDDECLARE;)y.push(this.read_top_statement());0===y.length&&this.extractDoc&&this._docs.length>this._docIndex&&y.push(this.node("noop")()),this.expect(this.tok.T_ENDDECLARE)&&this.next(),this.expectEndOfStatement(),E=this.ast.declare.MODE_SHORT}else if("{"===this.token){for(this.next();this.token!=this.EOF&&"}"!==this.token;)y.push(this.read_top_statement());0===y.length&&this.extractDoc&&this._docs.length>this._docIndex&&y.push(this.node("noop")()),this.expect("}")&&this.next(),E=this.ast.declare.MODE_BLOCK}else this.expect(";")&&this.next(),E=this.ast.declare.MODE_NONE;return F(v,y,E);case this.tok.T_TRY:return this.read_try();case this.tok.T_THROW:var A=this.node("throw"),g=this.next().read_expr();return this.expectEndOfStatement(),A(g);case";":return this.next(),null;case this.tok.T_STRING:var N=this.node(),C=[this.token,this.lexer.getState()],S=this.text(),b=this.node("identifier");if(":"===this.next().token)return b=b(S),this.next(),N("label",b);b.destroy(),N.destroy(),this.lexer.tokens.push(C);var M=this.node("expressionstatement"),O=this.next().read_expr();return this.expectEndOfStatement(O),M(O);case this.tok.T_GOTO:var I=this.node("goto"),R=null;if(this.next().expect(this.tok.T_STRING)){R=this.node("identifier");var H=this.text();this.next(),R=R(H),this.expectEndOfStatement()}return I(R);default:var D=this.node("expressionstatement"),P=this.read_expr();return this.expectEndOfStatement(P),D(P);}},read_code_block:function(n){var t=this.node("block");this.expect("{")&&this.next();var e=n?this.read_top_statements():this.read_inner_statements();return 0===e.length&&this.extractDoc&&this._docs.length>this._docIndex&&e.push(this.node("noop")()),this.expect("}")&&this.next(),t(null,e)}},{read_switch:function(){var n=this.node("switch");this.expect(this.tok.T_SWITCH)&&this.next(),this.expect("(")&&this.next();var t=this.read_expr();this.expect(")")&&this.next();var e=":"===this.token;return n(t,this.read_switch_case_list(),e)},read_switch_case_list:function(){var n=null,o=this.node("block"),e=[];for("{"===this.token?n="}":":"===this.token?n=this.tok.T_ENDSWITCH:this.expect(["{",":"]),this.next(),";"===this.token&&this.next();this.token!==this.EOF&&this.token!==n;)e.push(this.read_case_list(n));return 0===e.length&&this.extractDoc&&this._docs.length>this._docIndex&&e.push(this.node("noop")()),this.expect(n)&&this.next(),n===this.tok.T_ENDSWITCH&&this.expectEndOfStatement(),o(null,e)},read_case_list:function(o){var t=this.node("case"),e=null;this.token===this.tok.T_CASE?e=this.next().read_expr():this.token===this.tok.T_DEFAULT?this.next():this.expect([this.tok.T_CASE,this.tok.T_DEFAULT]),this.expect([":",";"])&&this.next();for(var a=this.node("block"),n=[];this.token!==this.EOF&&this.token!==o&&this.token!==this.tok.T_CASE&&this.token!==this.tok.T_DEFAULT;)n.push(this.read_inner_statement());return t(e,a(null,n))}},{read_try:function(){this.expect(this.tok.T_TRY);for(var a,l=this.node("try"),t=null,_=[],i=this.next().read_statement();this.token===this.tok.T_CATCH;){a=this.node("catch"),this.next().expect("(")&&this.next();var n=this.read_list(this.read_namespace_name,"|",!1),r=this.read_variable(!0,!1);this.expect(")"),_.push(a(this.next().read_statement(),n,r))}return this.token===this.tok.T_FINALLY&&(t=this.next().read_statement()),l(i,_,t)}},{read_short_form:function(n){var t=this.node("block"),e=[];for(this.expect(":")&&this.next();this.token!=this.EOF&&this.token!==n;)e.push(this.read_inner_statement());return 0===e.length&&this.extractDoc&&this._docs.length>this._docIndex&&e.push(this.node("noop")()),this.expect(n)&&this.next(),this.expectEndOfStatement(),t(null,e)},read_function_list:function(n,t){var e=[];do{if(this.token==t&&703<=this.version&&0<e.length){e.push(this.node("noop")());break}if(e.push(n.apply(this,[])),this.token!=t)break;if(")"==this.next().token&&703<=this.version)break}while(this.token!=this.EOF);return e},read_list:function(o,t,e){var a=[];if(this.token==t&&(e&&a.push("function"==typeof o?this.node("noop")():null),this.next()),"function"==typeof o)do{var n=o.apply(this,[]);if(n&&a.push(n),this.token!=t)break}while(this.next().token!=this.EOF);else{if(!this.expect(o))return[];for(a.push(this.text());this.next().token!=this.EOF&&this.token==t&&this.next().token==o;)a.push(this.text())}return a},read_name_list:function(){return this.read_list(this.read_namespace_name,",",!1)},read_byref:function(n){var t=this.node("byref");this.next(),t=t(null);var o=n();return o&&(this.ast.swapLocations(o,t,o,this),o.byref=!0),o},read_variable_declarations:function(){return this.read_list(function(){var n=this.node("staticvariable"),t=this.node("variable");if(this.expect(this.tok.T_VARIABLE)){var o=this.text().substring(1);this.next(),t=t(o,!1)}else t=t("#ERR",!1);return"="===this.token?n(t,this.next().read_expr()):t},",")},read_extends_from:function(){return this.token===this.tok.T_EXTENDS?this.next().read_namespace_name():null},read_interface_extends_list:function(){return this.token===this.tok.T_EXTENDS?this.next().read_name_list():null},read_implements_list:function(){return this.token===this.tok.T_IMPLEMENTS?this.next().read_name_list():null}},{read_variable:function(o,t){var e;if("&"===this.token)return this.read_byref(this.read_variable.bind(this,o,t));if(this.is([this.tok.T_VARIABLE,"$"]))e=this.read_reference_variable(t);else if(this.is([this.tok.T_NS_SEPARATOR,this.tok.T_STRING,this.tok.T_NAMESPACE])){e=this.node();var a=this.read_namespace_name();if(this.token!=this.tok.T_DOUBLE_COLON&&"("!=this.token&&-1===["parentreference","selfreference"].indexOf(a.kind)){var n=a.name.toLowerCase();"true"===n?e=a.destroy(e("boolean",!0,a.name)):"false"===n?e=a.destroy(e("boolean",!1,a.name)):"null"===n?e=a.destroy(e("nullkeyword",a.name)):(e.destroy(a),e=a)}else e.destroy(a),e=a}else if(this.token===this.tok.T_STATIC){e=this.node("staticreference");var s=this.text();this.next(),e=e(s)}else this.expect("VARIABLE");return this.token===this.tok.T_DOUBLE_COLON&&(e=this.read_static_getter(e,t)),this.recursive_variable_chain_scan(e,o,t)},read_static_getter:function(o,t){var e,a,r=this.node("staticlookup");return this.next().is([this.tok.T_VARIABLE,"$"])?e=this.read_reference_variable(t):this.token===this.tok.T_STRING||this.token===this.tok.T_CLASS||700<=this.version&&this.is("IDENTIFIER")?(e=this.node("identifier"),a=this.text(),this.next(),e=e(a)):"{"===this.token?(e=this.node("literal"),a=this.next().read_expr(),this.expect("}")&&this.next(),e=e("literal",a,null),this.expect("(")):(this.error([this.tok.T_VARIABLE,this.tok.T_STRING]),e=this.node("identifier"),a=this.text(),this.next(),e=e(a)),r(o,e)},read_what:function(){var n=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=null,o=null;switch(this.next().token){case this.tok.T_STRING:t=this.node("identifier"),o=this.text(),this.next(),t=t(o),n&&this.token===this.tok.T_OBJECT_OPERATOR&&this.error();break;case this.tok.T_VARIABLE:t=this.node("variable"),o=this.text().substring(1),this.next(),t=t(o,!1);break;case"$":t=this.node(),this.next().expect(["$","{",this.tok.T_VARIABLE]),"{"===this.token?(o=this.next().read_expr(),this.expect("}")&&this.next(),t=t("variable",o,!0)):t=t("variable",o=this.read_expr(),!1);break;case"{":t=this.node("encapsedpart"),o=this.next().read_expr(),this.expect("}")&&this.next(),t=t(o,"complex",!1);break;default:this.error([this.tok.T_STRING,this.tok.T_VARIABLE,"$","{"]),t=this.node("identifier"),o=this.text(),this.next(),t=t(o);}return t},recursive_variable_chain_scan:function(o,a,e){var i,l;t:for(;this.token!=this.EOF;)switch(this.token){case"(":if(a)return o;o=this.node("call")(o,this.read_argument_list());break;case"[":case"{":var _="["===this.token;(i=this.node("offsetlookup"),this.next(),l=!1,e)?(l=this.read_encaps_var_offset(),this.expect(_?"]":"}")&&this.next()):(_?"]"!==this.token:"}"!==this.token)?(l=this.read_expr(),this.expect(_?"]":"}")&&this.next()):this.next(),o=i(o,l);break;case this.tok.T_DOUBLE_COLON:"staticlookup"===o.kind&&"identifier"===o.offset.kind&&this.error(),o=(i=this.node("staticlookup"))(o,this.read_what(!0));break;case this.tok.T_OBJECT_OPERATOR:o=(i=this.node("propertylookup"))(o,this.read_what());break;default:break t;}return o},read_encaps_var_offset:function(){var o=this.node();if(this.token===this.tok.T_STRING){var a=this.text();this.next(),o=o("identifier",a)}else if(this.token===this.tok.T_NUM_STRING){var e=this.text();this.next(),o=o("number",e,null)}else if("-"===this.token){this.next();var i=-1*this.text();this.expect(this.tok.T_NUM_STRING)&&this.next(),o=o("number",i,null)}else if(this.token===this.tok.T_VARIABLE){var n=this.text().substring(1);this.next(),o=o("variable",n,!1)}else{this.expect([this.tok.T_STRING,this.tok.T_NUM_STRING,"-",this.tok.T_VARIABLE]);var s=this.text();this.next(),o=o("identifier",s)}return o},read_reference_variable:function(o){for(var t,a,r=this.read_simple_variable();this.token!=this.EOF;){if(a=this.node(),"{"!=this.token||o){a.destroy();break}t=this.next().read_expr(),this.expect("}")&&this.next(),r=a("offsetlookup",r,t)}return r},read_simple_variable:function(){var o,a=this.node("variable");if(this.expect([this.tok.T_VARIABLE,"$"])&&this.token===this.tok.T_VARIABLE)o=this.text().substring(1),this.next(),a=a(o,!1);else switch("$"===this.token&&this.next(),this.token){case"{":var r=this.next().read_expr();this.expect("}")&&this.next(),a=a(r,!0);break;case"$":a=a(this.read_simple_variable(),!1);break;case this.tok.T_VARIABLE:o=this.text().substring(1);var i=this.node("variable");this.next(),a=a(i(o,!1),!1);break;default:this.error(["{","$",this.tok.T_VARIABLE]),o=this.text(),this.next(),a=a(o,!1);}return a}}].forEach(function(n){for(var t in n){if(m.prototype.hasOwnProperty(t))throw new Error("Function "+t+" is already defined - collision");m.prototype[t]=n[t]}});var C=m,S={values:{101:"T_HALT_COMPILER",102:"T_USE",103:"T_ENCAPSED_AND_WHITESPACE",104:"T_OBJECT_OPERATOR",105:"T_STRING",106:"T_DOLLAR_OPEN_CURLY_BRACES",107:"T_STRING_VARNAME",108:"T_CURLY_OPEN",109:"T_NUM_STRING",110:"T_ISSET",111:"T_EMPTY",112:"T_INCLUDE",113:"T_INCLUDE_ONCE",114:"T_EVAL",115:"T_REQUIRE",116:"T_REQUIRE_ONCE",117:"T_NAMESPACE",118:"T_NS_SEPARATOR",119:"T_AS",120:"T_IF",121:"T_ENDIF",122:"T_WHILE",123:"T_DO",124:"T_FOR",125:"T_SWITCH",126:"T_BREAK",127:"T_CONTINUE",128:"T_RETURN",129:"T_GLOBAL",130:"T_STATIC",131:"T_ECHO",132:"T_INLINE_HTML",133:"T_UNSET",134:"T_FOREACH",135:"T_DECLARE",136:"T_TRY",137:"T_THROW",138:"T_GOTO",139:"T_FINALLY",140:"T_CATCH",141:"T_ENDDECLARE",142:"T_LIST",143:"T_CLONE",144:"T_PLUS_EQUAL",145:"T_MINUS_EQUAL",146:"T_MUL_EQUAL",147:"T_DIV_EQUAL",148:"T_CONCAT_EQUAL",149:"T_MOD_EQUAL",150:"T_AND_EQUAL",151:"T_OR_EQUAL",152:"T_XOR_EQUAL",153:"T_SL_EQUAL",154:"T_SR_EQUAL",155:"T_INC",156:"T_DEC",157:"T_BOOLEAN_OR",158:"T_BOOLEAN_AND",159:"T_LOGICAL_OR",160:"T_LOGICAL_AND",161:"T_LOGICAL_XOR",162:"T_SL",163:"T_SR",164:"T_IS_IDENTICAL",165:"T_IS_NOT_IDENTICAL",166:"T_IS_EQUAL",167:"T_IS_NOT_EQUAL",168:"T_IS_SMALLER_OR_EQUAL",169:"T_IS_GREATER_OR_EQUAL",170:"T_INSTANCEOF",171:"T_INT_CAST",172:"T_DOUBLE_CAST",173:"T_STRING_CAST",174:"T_ARRAY_CAST",175:"T_OBJECT_CAST",176:"T_BOOL_CAST",177:"T_UNSET_CAST",178:"T_EXIT",179:"T_PRINT",180:"T_YIELD",181:"T_YIELD_FROM",182:"T_FUNCTION",183:"T_DOUBLE_ARROW",184:"T_DOUBLE_COLON",185:"T_ARRAY",186:"T_CALLABLE",187:"T_CLASS",188:"T_ABSTRACT",189:"T_TRAIT",190:"T_FINAL",191:"T_EXTENDS",192:"T_INTERFACE",193:"T_IMPLEMENTS",194:"T_VAR",195:"T_PUBLIC",196:"T_PROTECTED",197:"T_PRIVATE",198:"T_CONST",199:"T_NEW",200:"T_INSTEADOF",201:"T_ELSEIF",202:"T_ELSE",203:"T_ENDSWITCH",204:"T_CASE",205:"T_DEFAULT",206:"T_ENDFOR",207:"T_ENDFOREACH",208:"T_ENDWHILE",209:"T_CONSTANT_ENCAPSED_STRING",210:"T_LNUMBER",211:"T_DNUMBER",212:"T_LINE",213:"T_FILE",214:"T_DIR",215:"T_TRAIT_C",216:"T_METHOD_C",217:"T_FUNC_C",218:"T_NS_C",219:"T_START_HEREDOC",220:"T_END_HEREDOC",221:"T_CLASS_C",222:"T_VARIABLE",223:"T_OPEN_TAG",224:"T_OPEN_TAG_WITH_ECHO",225:"T_CLOSE_TAG",226:"T_WHITESPACE",227:"T_COMMENT",228:"T_DOC_COMMENT",229:"T_ELLIPSIS",230:"T_COALESCE",231:"T_POW",232:"T_POW_EQUAL",233:"T_SPACESHIP",234:"T_COALESCE_EQUAL",235:"T_FN"},names:{T_HALT_COMPILER:101,T_USE:102,T_ENCAPSED_AND_WHITESPACE:103,T_OBJECT_OPERATOR:104,T_STRING:105,T_DOLLAR_OPEN_CURLY_BRACES:106,T_STRING_VARNAME:107,T_CURLY_OPEN:108,T_NUM_STRING:109,T_ISSET:110,T_EMPTY:111,T_INCLUDE:112,T_INCLUDE_ONCE:113,T_EVAL:114,T_REQUIRE:115,T_REQUIRE_ONCE:116,T_NAMESPACE:117,T_NS_SEPARATOR:118,T_AS:119,T_IF:120,T_ENDIF:121,T_WHILE:122,T_DO:123,T_FOR:124,T_SWITCH:125,T_BREAK:126,T_CONTINUE:127,T_RETURN:128,T_GLOBAL:129,T_STATIC:130,T_ECHO:131,T_INLINE_HTML:132,T_UNSET:133,T_FOREACH:134,T_DECLARE:135,T_TRY:136,T_THROW:137,T_GOTO:138,T_FINALLY:139,T_CATCH:140,T_ENDDECLARE:141,T_LIST:142,T_CLONE:143,T_PLUS_EQUAL:144,T_MINUS_EQUAL:145,T_MUL_EQUAL:146,T_DIV_EQUAL:147,T_CONCAT_EQUAL:148,T_MOD_EQUAL:149,T_AND_EQUAL:150,T_OR_EQUAL:151,T_XOR_EQUAL:152,T_SL_EQUAL:153,T_SR_EQUAL:154,T_INC:155,T_DEC:156,T_BOOLEAN_OR:157,T_BOOLEAN_AND:158,T_LOGICAL_OR:159,T_LOGICAL_AND:160,T_LOGICAL_XOR:161,T_SL:162,T_SR:163,T_IS_IDENTICAL:164,T_IS_NOT_IDENTICAL:165,T_IS_EQUAL:166,T_IS_NOT_EQUAL:167,T_IS_SMALLER_OR_EQUAL:168,T_IS_GREATER_OR_EQUAL:169,T_INSTANCEOF:170,T_INT_CAST:171,T_DOUBLE_CAST:172,T_STRING_CAST:173,T_ARRAY_CAST:174,T_OBJECT_CAST:175,T_BOOL_CAST:176,T_UNSET_CAST:177,T_EXIT:178,T_PRINT:179,T_YIELD:180,T_YIELD_FROM:181,T_FUNCTION:182,T_DOUBLE_ARROW:183,T_DOUBLE_COLON:184,T_ARRAY:185,T_CALLABLE:186,T_CLASS:187,T_ABSTRACT:188,T_TRAIT:189,T_FINAL:190,T_EXTENDS:191,T_INTERFACE:192,T_IMPLEMENTS:193,T_VAR:194,T_PUBLIC:195,T_PROTECTED:196,T_PRIVATE:197,T_CONST:198,T_NEW:199,T_INSTEADOF:200,T_ELSEIF:201,T_ELSE:202,T_ENDSWITCH:203,T_CASE:204,T_DEFAULT:205,T_ENDFOR:206,T_ENDFOREACH:207,T_ENDWHILE:208,T_CONSTANT_ENCAPSED_STRING:209,T_LNUMBER:210,T_DNUMBER:211,T_LINE:212,T_FILE:213,T_DIR:214,T_TRAIT_C:215,T_METHOD_C:216,T_FUNC_C:217,T_NS_C:218,T_START_HEREDOC:219,T_END_HEREDOC:220,T_CLASS_C:221,T_VARIABLE:222,T_OPEN_TAG:223,T_OPEN_TAG_WITH_ECHO:224,T_CLOSE_TAG:225,T_WHITESPACE:226,T_COMMENT:227,T_DOC_COMMENT:228,T_ELLIPSIS:229,T_COALESCE:230,T_POW:231,T_POW_EQUAL:232,T_SPACESHIP:233,T_COALESCE_EQUAL:234,T_FN:235}},b=function(n,t,e){this.source=n,this.start=t,this.end=e},L=function(n,t,e){this.line=n,this.column=t,this.offset=e},O=function(n,t,e){this.kind=n,t&&(this.leadingComments=t),e&&(this.loc=e)};O.prototype.setTrailingComments=function(e){this.trailingComments=e},O.prototype.destroy=function(e){if(!e)throw new Error("Node already initialized, you must swap with another node");return this.leadingComments&&(e.leadingComments?e.leadingComments=Array.concat(this.leadingComments,e.leadingComments):e.leadingComments=this.leadingComments),this.trailingComments&&(e.trailingComments?e.trailingComments=Array.concat(this.trailingComments,e.trailingComments):e.trailingComments=this.trailingComments),e},O.prototype.includeToken=function(e){return this.loc&&(this.loc.end&&(this.loc.end.line=e.lexer.yylloc.last_line,this.loc.end.column=e.lexer.yylloc.last_column,this.loc.end.offset=e.lexer.offset),e.ast.withSource&&(this.loc.source=e.lexer._input.substring(this.loc.start.offset,e.lexer.offset))),this},O.extends=function(n,t){return t.prototype=Object.create(this.prototype),t.extends=this.extends,t.prototype.constructor=t,t.kind=n,t};var I=O,R=I.extends("expression",function(n,t,e){I.apply(this,[n||"expression",t,e])}),w=R.extends("array",function(o,t,e,a){R.apply(this,["array",e,a]),this.items=t,this.shortForm=o}),D=R.extends("arrowfunc",function(a,t,e,i,n,s,r,o){R.apply(this,["arrowfunc",r,o]),this.arguments=a,this.byref=t,this.body=e,this.type=i,this.nullable=n,this.isStatic=s||!1}),P=R.extends("assign",function(o,t,e,a,n){R.apply(this,["assign",a,n]),this.left=o,this.right=t,this.operator=e}),U=R.extends("assignref",function(o,t,e,a){R.apply(this,["assignref",e,a]),this.left=o,this.right=t}),B=R.extends("operation",function(n,t,e){R.apply(this,[n||"operation",t,e])}),F=B.extends("bin",function(o,t,e,a,n){B.apply(this,["bin",a,n]),this.type=o,this.left=t,this.right=e}),M=I.extends("statement",function(n,t,e){I.apply(this,[n||"statement",t,e])}),H=M.extends("block",function(o,t,e,a){M.apply(this,[o||"block",e,a]),this.children=t.filter(Boolean)}),G=R.extends("literal",function(o,t,e,a,n){R.apply(this,[o||"literal",a,n]),this.value=t,e&&(this.raw=e)}),V=G.extends("boolean",function(o,t,e,a){G.apply(this,["boolean",o,t,e,a])}),W=M.extends("break",function(n,t,e){M.apply(this,["break",t,e]),this.level=n}),Q=R.extends("byref",function(n,t,e){R.apply(this,["byref",t,e]),this.what=n}),Y=R.extends("call",function(o,t,e,a){R.apply(this,["call",e,a]),this.what=o,this.arguments=t}),j=M.extends("case",function(o,t,e,a){M.apply(this,["case",e,a]),this.test=o,this.body=t}),$=B.extends("cast",function(o,t,e,a,n){B.apply(this,["cast",a,n]),this.type=o,this.raw=t,this.expr=e}),z=M.extends("catch",function(o,t,e,a,n){M.apply(this,["catch",a,n]),this.body=o,this.what=t,this.variable=e}),K=M.extends("declaration",function(o,t,e,a){M.apply(this,[o||"declaration",e,a]),this.name=t});K.prototype.parseFlags=function(e){this.isAbstract=1===e[2],this.isFinal=2===e[2],"class"!==this.kind&&(-1===e[0]?this.visibility="":null===e[0]?this.visibility=null:0===e[0]?this.visibility="public":1===e[0]?this.visibility="protected":2===e[0]&&(this.visibility="private"),this.isStatic=1===e[1])};var X=K,J=X.extends("class",function(a,t,e,i,n,s,r){X.apply(this,["class",a,s,r]),this.isAnonymous=!a,this.extends=t,this.implements=e,this.body=i,this.parseFlags(n)}),q=M.extends("constantstatement",function(o,t,e,a){M.apply(this,[o||"constantstatement",e,a]),this.constants=t}),Z=q.extends("classconstant",function(o,t,e,a,n){q.apply(this,[o||"classconstant",t,a,n]),this.parseFlags(e)});Z.prototype.parseFlags=function(e){-1===e[0]?this.visibility="":null===e[0]?this.visibility=null:0===e[0]?this.visibility="public":1===e[0]?this.visibility="protected":2===e[0]&&(this.visibility="private")};var tt=R.extends("clone",function(n,t,e){R.apply(this,["clone",t,e]),this.what=n}),it=R.extends("closure",function(a,t,e,i,n,s,r,o){R.apply(this,["closure",r,o]),this.uses=e,this.arguments=a,this.byref=t,this.type=i,this.nullable=n,this.isStatic=s||!1,this.body=null}),nt=I.extends("comment",function(o,t,e,a){I.apply(this,[o,e,a]),this.value=t}),st=nt.extends("commentblock",function(n,t,e){nt.apply(this,["commentblock",n,t,e])}),rt=nt.extends("commentline",function(n,t,e){nt.apply(this,["commentline",n,t,e])}),ot=I.extends("constant",function(o,t,e,a){I.apply(this,["constant",e,a]),this.name=o,this.value=t}),ht=M.extends("continue",function(n,t,e){M.apply(this,["continue",t,e]),this.level=n}),at=H.extends("declare",function(o,t,e,a,n){H.apply(this,["declare",t,a,n]),this.directives=o,this.mode=e});at.MODE_SHORT="short",at.MODE_BLOCK="block",at.MODE_NONE="none";var lt=I.extends("declaredirective",function(o,t,e,a){I.apply(this,["declaredirective",e,a]),this.key=o,this.value=t}),ut=M.extends("do",function(o,t,e,a){M.apply(this,["do",e,a]),this.test=o,this.body=t}),_t=M.extends("echo",function(o,t,e,a){M.apply(this,["echo",e,a]),this.shortForm=t,this.expressions=o}),dt=R.extends("empty",function(n,t,e){R.apply(this,["empty",t,e]),this.expression=n}),pt=G.extends("encapsed",function(o,t,e,a,n){G.apply(this,["encapsed",o,t,a,n]),this.type=e});pt.TYPE_STRING="string",pt.TYPE_SHELL="shell",pt.TYPE_HEREDOC="heredoc",pt.TYPE_OFFSET="offset";var ft=R.extends("encapsedpart",function(o,t,e,a,n){R.apply(this,["encapsedpart",a,n]),this.expression=o,this.syntax=t,this.curly=e}),kt=R.extends("entry",function(o,t,e,a,n,i){R.apply(this,["entry",n,i]),this.key=o,this.value=t,this.byRef=e,this.unpack=a}),xt=I.extends("error",function(o,t,e,a,n,i){I.apply(this,["error",n,i]),this.message=o,this.token=t,this.line=e,this.expected=a}),Et=R.extends("eval",function(n,t,e){R.apply(this,["eval",t,e]),this.source=n}),mt=R.extends("exit",function(o,t,e,a){R.apply(this,["exit",e,a]),this.expression=o,this.useDie=t}),yt=M.extends("expressionstatement",function(n,t,e){M.apply(this,["expressionstatement",t,e]),this.expression=n}),At=M.extends("for",function(a,t,e,i,n,s,r){M.apply(this,["for",s,r]),this.init=a,this.test=t,this.increment=e,this.shortForm=n,this.body=i}),gt=M.extends("foreach",function(a,t,e,i,n,s,r){M.apply(this,["foreach",s,r]),this.source=a,this.key=t,this.value=e,this.shortForm=n,this.body=i}),Nt=X.extends("function",function(a,t,e,i,n,s,r){X.apply(this,["function",a,s,r]),this.arguments=t,this.byref=e,this.type=i,this.nullable=n,this.body=null}),Ct=M.extends("global",function(n,t,e){M.apply(this,["global",t,e]),this.items=n}),St=M.extends("goto",function(n,t,e){M.apply(this,["goto",t,e]),this.label=n}),bt=M.extends("halt",function(n,t,e){M.apply(this,["halt",t,e]),this.after=n}),Lt=I.extends("identifier",function(n,t,e){I.apply(this,["identifier",t,e]),this.name=n}),Ot=M.extends("if",function(o,t,e,a,n,i){M.apply(this,["if",n,i]),this.test=o,this.body=t,this.alternate=e,this.shortForm=a}),It=R.extends("include",function(o,t,e,a,n){R.apply(this,["include",a,n]),this.once=o,this.require=t,this.target=e}),Rt=G.extends("inline",function(o,t,e,a){G.apply(this,["inline",o,t,e,a])}),wt=X.extends("interface",function(o,t,e,a,n){X.apply(this,["interface",o,a,n]),this.extends=t,this.body=e}),Dt=R.extends("isset",function(n,t,e){R.apply(this,["isset",t,e]),this.variables=n}),Pt=M.extends("label",function(n,t,e){M.apply(this,["label",t,e]),this.name=n}),Ut=R.extends("list",function(o,t,e,a){R.apply(this,["list",e,a]),this.items=o,this.shortForm=t}),Bt=R.extends("lookup",function(o,t,e,a,n){R.apply(this,[o||"lookup",a,n]),this.what=t,this.offset=e}),Ft=G.extends("magic",function(o,t,e,a){G.apply(this,["magic",o,t,e,a])}),Mt=Nt.extends("method",function(){Nt.apply(this,arguments),this.kind="method"}),Ht=I.extends("reference",function(n,t,e){I.apply(this,[n||"reference",t,e])}),Gt=Ht.extends("name",function o(t,e,a,n){Ht.apply(this,["name",a,n]),this.resolution=e?o.RELATIVE_NAME:1===t.length?o.UNQUALIFIED_NAME:t[0]?o.QUALIFIED_NAME:o.FULL_QUALIFIED_NAME,this.name=t.join("\\")});Gt.UNQUALIFIED_NAME="uqn",Gt.QUALIFIED_NAME="qn",Gt.FULL_QUALIFIED_NAME="fqn",Gt.RELATIVE_NAME="rn";var Vt=H.extends("namespace",function(o,t,e,a,n){H.apply(this,["namespace",t,a,n]),this.name=o,this.withBrackets=e||!1}),Qt=R.extends("new",function(o,t,e,a){R.apply(this,["new",e,a]),this.what=o,this.arguments=t}),Yt=I.extends("noop",function(n,t){I.apply(this,["noop",n,t])}),jt=G.extends("nowdoc",function(o,t,e,a,n){G.apply(this,["nowdoc",o,t,a,n]),this.label=e}),$t=I.extends("nullkeyword",function(n,t,e){I.apply(this,["nullkeyword",t,e]),this.raw=n}),zt=G.extends("number",function(o,t,e,a){G.apply(this,["number",o,t,e,a])}),Kt=Bt.extends("offsetlookup",function(o,t,e,a){Bt.apply(this,["offsetlookup",o,t,e,a])}),Xt=X.extends("parameter",function(a,t,e,i,n,s,r,o){X.apply(this,["parameter",a,r,o]),this.value=e,this.type=t,this.byref=i,this.variadic=n,this.nullable=s}),Jt=Ht.extends("parentreference",function(n,t,e){Ht.apply(this,["parentreference",t,e]),this.raw=n}),qt=B.extends("post",function(o,t,e,a){B.apply(this,["post",e,a]),this.type=o,this.what=t}),Zt=B.extends("pre",function(o,t,e,a){B.apply(this,["pre",e,a]),this.type=o,this.what=t}),te=R.extends("print",function(n,t,e){R.apply(this,["print",t,e]),this.expression=n}),ee=H.extends("program",function(o,t,e,a,n,i){H.apply(this,["program",o,n,i]),this.errors=t,e&&(this.comments=e),a&&(this.tokens=a)}),ie=M.extends("property",function(o,t,e,a,n,i){M.apply(this,["property",n,i]),this.name=o,this.value=t,this.nullable=e,this.type=a}),ne=Bt.extends("propertylookup",function(o,t,e,a){Bt.apply(this,["propertylookup",o,t,e,a])}),se=M.extends("propertystatement",function(o,t,e,a,n){M.apply(this,["propertystatement",a,n]),this.properties=t,this.parseFlags(e)});se.prototype.parseFlags=function(e){-1===e[0]?this.visibility="":null===e[0]?this.visibility=null:0===e[0]?this.visibility="public":1===e[0]?this.visibility="protected":2===e[0]&&(this.visibility="private"),this.isStatic=1===e[1]};var re=R.extends("retif",function(o,t,e,a,n){R.apply(this,["retif",a,n]),this.test=o,this.trueExpr=t,this.falseExpr=e}),he=M.extends("return",function(n,t,e){M.apply(this,["return",t,e]),this.expr=n}),ae=Ht.extends("selfreference",function(n,t,e){Ht.apply(this,["selfreference",t,e]),this.raw=n}),le=R.extends("silent",function(n,t,e){R.apply(this,["silent",t,e]),this.expr=n}),ce=M.extends("static",function(n,t,e){M.apply(this,["static",t,e]),this.variables=n}),ue=I.extends("staticvariable",function(o,t,e,a){I.apply(this,["staticvariable",e,a]),this.variable=o,this.defaultValue=t}),_e=Bt.extends("staticlookup",function(o,t,e,a){Bt.apply(this,["staticlookup",o,t,e,a])}),de=Ht.extends("staticreference",function(n,t,e){Ht.apply(this,["staticreference",t,e]),this.raw=n}),pe=G.extends("string",function(o,t,e,a,n,i){G.apply(this,["string",t,a,n,i]),this.unicode=e,this.isDoubleQuote=o}),fe=M.extends("switch",function(o,t,e,a,n){M.apply(this,["switch",a,n]),this.test=o,this.body=t,this.shortForm=e}),Te=M.extends("throw",function(n,t,e){M.apply(this,["throw",t,e]),this.what=n}),ke=X.extends("trait",function(o,t,e,a){X.apply(this,["trait",o,e,a]),this.body=t}),xe=I.extends("traitalias",function(o,t,e,a,n,i){I.apply(this,["traitalias",n,i]),this.trait=o,this.method=t,this.as=e,this.visibility="",a&&(0===a[0]?this.visibility="public":1===a[0]?this.visibility="protected":2===a[0]&&(this.visibility="private"))}),Ee=I.extends("traitprecedence",function(o,t,e,a,n){I.apply(this,["traitprecedence",a,n]),this.trait=o,this.method=t,this.instead=e}),me=I.extends("traituse",function(o,t,e,a){I.apply(this,["traituse",e,a]),this.traits=o,this.adaptations=t}),ye=M.extends("try",function(o,t,e,a,n){M.apply(this,["try",a,n]),this.body=o,this.catches=t,this.always=e}),ve=Ht.extends("typereference",function(o,t,e,a){Ht.apply(this,["typereference",e,a]),this.name=o,this.raw=t});ve.types=["int","float","string","bool","object","array","callable","iterable","void"];var Ae=B.extends("unary",function(o,t,e,a){B.apply(this,["unary",e,a]),this.type=o,this.what=t}),Ne=M.extends("unset",function(n,t,e){M.apply(this,["unset",t,e]),this.variables=n}),Ce=M.extends("usegroup",function(o,t,e,a,n){M.apply(this,["usegroup",a,n]),this.name=o,this.type=t,this.items=e}),Se=M.extends("useitem",function(o,t,e,a,n){M.apply(this,["useitem",a,n]),this.name=o,this.alias=t,this.type=e});Se.TYPE_CONST="const",Se.TYPE_FUNCTION="function";var be=R.extends("variable",function(o,t,e,a){R.apply(this,["variable",e,a]),this.name=o,this.curly=t||!1}),Oe=R.extends("variadic",function(n,t,e){R.apply(this,["variadic",t,e]),this.what=n}),Ie=M.extends("while",function(o,t,e,a,n){M.apply(this,["while",a,n]),this.test=o,this.body=t,this.shortForm=e}),Re=R.extends("yield",function(o,t,e,a){R.apply(this,["yield",e,a]),this.value=o,this.key=t}),we=R.extends("yieldfrom",function(n,t,e){R.apply(this,["yieldfrom",t,e]),this.value=n}),De=function(n,t){this.withPositions=n,this.withSource=t};De.prototype.position=function(e){return new L(e.lexer.yylloc.first_line,e.lexer.yylloc.first_column,e.lexer.yylloc.first_offset)},De.precedence={},[["or"],["xor"],["and"],["="],["?"],["??"],["||"],["&&"],["|"],["^"],["&"],["==","!=","===","!==","<=>"],["<","<=",">",">="],["<<",">>"],["+","-","."],["*","/","%"],["!"],["instanceof"],["cast","silent"],["**"]].forEach(function(n,o){n.forEach(function(e){De.precedence[e]=o+1})}),De.prototype.isRightAssociative=function(e){return"**"===e||"??"===e},De.prototype.swapLocations=function(o,t,e,a){this.withPositions&&(o.loc.start=t.loc.start,o.loc.end=e.loc.end,this.withSource&&(o.loc.source=a.lexer._input.substring(o.loc.start.offset,o.loc.end.offset)))},De.prototype.resolveLocations=function(o,t,e,a){this.withPositions&&(o.loc.start.offset>t.loc.start.offset&&(o.loc.start=t.loc.start),o.loc.end.offset<e.loc.end.offset&&(o.loc.end=e.loc.end),this.withSource&&(o.loc.source=a.lexer._input.substring(o.loc.start.offset,o.loc.end.offset)))},De.prototype.resolvePrecedence=function(o,a){var e,r,l;return"call"===o.kind?this.resolveLocations(o,o.what,o,a):"propertylookup"===o.kind||"staticlookup"===o.kind||"offsetlookup"===o.kind&&o.offset?this.resolveLocations(o,o.what,o.offset,a):"bin"===o.kind?o.right&&!o.right.parenthesizedExpression&&("bin"===o.right.kind?(r=De.precedence[o.type],l=De.precedence[o.right.type],r&&l&&l<=r&&!this.isRightAssociative(o.type)&&(e=o.right,o.right=o.right.left,this.swapLocations(o,o.left,o.right,a),e.left=this.resolvePrecedence(o,a),this.swapLocations(e,e.left,e.right,a),o=e)):"retif"===o.right.kind&&(r=De.precedence[o.type],l=De.precedence["?"],r&&l&&l<=r&&(e=o.right,o.right=o.right.test,this.swapLocations(o,o.left,o.right,a),e.test=this.resolvePrecedence(o,a),this.swapLocations(e,e.test,e.falseExpr,a),o=e))):"silent"!==o.kind&&"cast"!==o.kind||!o.expr||o.expr.parenthesizedExpression?"unary"===o.kind?o.what&&!o.what.parenthesizedExpression&&("bin"===o.what.kind?(e=o.what,o.what=o.what.left,this.swapLocations(o,o,o.what,a),e.left=this.resolvePrecedence(o,a),this.swapLocations(e,e.left,e.right,a),o=e):"retif"===o.what.kind&&(e=o.what,o.what=o.what.test,this.swapLocations(o,o,o.what,a),e.test=this.resolvePrecedence(o,a),this.swapLocations(e,e.test,e.falseExpr,a),o=e)):"retif"===o.kind?o.falseExpr&&"retif"===o.falseExpr.kind&&!o.falseExpr.parenthesizedExpression&&(e=o.falseExpr,o.falseExpr=e.test,this.swapLocations(o,o.test,o.falseExpr,a),e.test=this.resolvePrecedence(o,a),this.swapLocations(e,e.test,e.falseExpr,a),o=e):"assign"===o.kind?o.right&&"bin"===o.right.kind&&!o.right.parenthesizedExpression&&(r=De.precedence["="],l=De.precedence[o.right.type],r&&l&&l<r&&(e=o.right,o.right=o.right.left,e.left=o,this.swapLocations(e,e.left,o.right,a),o=e)):"expressionstatement"===o.kind&&this.swapLocations(o,o.expression,o,a):"bin"===o.expr.kind?(e=o.expr,o.expr=o.expr.left,this.swapLocations(o,o,o.expr,a),e.left=this.resolvePrecedence(o,a),this.swapLocations(e,e.left,e.right,a),o=e):"retif"===o.expr.kind&&(e=o.expr,o.expr=o.expr.test,this.swapLocations(o,o,o.expr,a),e.test=this.resolvePrecedence(o,a),this.swapLocations(e,e.test,e.falseExpr,a),o=e),o},De.prototype.prepare=function(_,d,e){var i=null;(this.withPositions||this.withSource)&&(i=this.position(e));var p=this,o=function t(){var n=null,r=Array.prototype.slice.call(arguments);if(r.push(d),p.withPositions||p.withSource){var s=null;p.withSource&&(s=e.lexer._input.substring(i.offset,e.prev[2])),n=new b(s,i,new L(e.prev[0],e.prev[1],e.prev[2])),r.push(n)}_||(_=r.shift());var T=p[_];if("function"!=typeof T)throw new Error("Undefined node \""+_+"\"");var l=Object.create(T.prototype);return T.apply(l,r),t.instance=l,t.trailingComments&&(l.trailingComments=t.trailingComments),"function"==typeof t.postBuild&&t.postBuild(l),e.debug&&delete De.stack[t.stackUid],p.resolvePrecedence(l,e)};return e.debug&&(De.stack||(De.stack={},De.stackUid=1),De.stack[++De.stackUid]={position:i,stack:new Error().stack.split("\n").slice(3,5)},o.stackUid=De.stackUid),o.setTrailingComments=function(e){o.instance?o.instance.setTrailingComments(e):o.trailingComments=e},o.destroy=function(n){d&&(n?n.leadingComments?n.leadingComments=d.concat(n.leadingComments):n.leadingComments=d:e._docIndex=e._docs.length-d.length),e.debug&&delete De.stack[o.stackUid]},o},De.prototype.checkNodes=function(){var n=[];for(var t in De.stack)De.stack.hasOwnProperty(t)&&n.push(De.stack[t]);return De.stack={},n},[w,D,P,U,F,H,V,W,Q,Y,j,$,z,J,Z,tt,it,nt,st,rt,ot,q,ht,X,at,lt,ut,_t,dt,pt,ft,kt,xt,Et,mt,R,yt,At,gt,Nt,Ct,St,bt,Lt,Ot,It,Rt,wt,Dt,Pt,Ut,G,Bt,Ft,Mt,Gt,Vt,Qt,I,Yt,jt,$t,zt,Kt,B,Xt,Jt,qt,Zt,te,ee,ie,ne,se,Ht,re,he,ae,le,M,ce,ue,_e,de,pe,fe,Te,ke,xe,Ee,me,ye,ve,Ae,Ne,Ce,Se,be,Oe,Ie,Re,we].forEach(function(e){De.prototype[e.kind]=e});var Pe=De,Ue=function(n){if("function"==typeof this)return new this(n);if(this.tokens=S,this.lexer=new c(this),this.ast=new Pe,this.parser=new C(this.lexer,this.ast),n&&"object"==_typeof(n)){if(n.parser&&(n.lexer||(n.lexer={}),n.parser.version)){if("string"==typeof n.parser.version){var t=n.parser.version.split(".");if(t=100*parseInt(t[0])+parseInt(t[1]),isNaN(t))throw new Error("Bad version number : "+n.parser.version);n.parser.version=t}else if("number"!=typeof n.parser.version)throw new Error("Expecting a number for version");if(500>n.parser.version||704<n.parser.version)throw new Error("Can only handle versions between 5.x to 7.x")}k(n,this),this.lexer.version=this.parser.version}},Fe=function(e){return"function"==typeof e.write?e.toString():e};Ue.create=function(e){return new Ue(e)},Ue.parseEval=function(n,t){return new Ue(t).parseEval(n)},Ue.prototype.parseEval=function(e){return this.lexer.mode_eval=!0,this.lexer.all_tokens=!1,e=Fe(e),this.parser.parse(e,"eval")},Ue.parseCode=function(n,t,o){return"object"!=_typeof(t)||o||(o=t,t="unknown"),new Ue(o).parseCode(n,t)},Ue.prototype.parseCode=function(n,o){return this.lexer.mode_eval=!1,this.lexer.all_tokens=!1,n=Fe(n),this.parser.parse(n,o)},Ue.tokenGetAll=function(n,t){return new Ue(t).tokenGetAll(n)},Ue.prototype.tokenGetAll=function(o){this.lexer.mode_eval=!1,this.lexer.all_tokens=!0,o=Fe(o);var a=this.lexer.EOF,e=this.tokens.values;this.lexer.setInput(o);for(var i,l=this.lexer.lex()||a,_=[];l!=a;)i=this.lexer.yytext,e.hasOwnProperty(l)&&(i=[e[l],i,this.lexer.yylloc.first_line]),_.push(i),l=this.lexer.lex()||a;return _};var Me=Ue;Me.tokens=S,Me.lexer=c,Me.AST=Pe,Me.parser=C,Me.combine=k,Me.default=Ue;var He=function(a,l,e){var i=e&&"markdown"===e.parentParser;if(!a&&i)return"";a=a.replace(/\?>\r?\n<\?/g,"?>\n___PSEUDO_INLINE_PLACEHOLDER___<?");var n,_=new Me({parser:{extractDoc:!0},ast:{withPositions:!0,withSource:!0}}),r=-1!==a.indexOf("<?php"),o=i&&!r;try{n=o?_.parseEval(a):_.parseCode(a)}catch(e){throw e instanceof SyntaxError&&"lineNumber"in e&&(e.loc={start:{line:e.lineNumber,column:e.columnNumber}},delete e.lineNumber,delete e.columnNumber),e}return n.extra={parseAsEval:o},n.comments.forEach(function(e){"\r"===e.value[e.value.length-1]&&(e.value=e.value.slice(0,-1),--e.loc.end.offset),"\n"===e.value[e.value.length-1]&&(e.value=e.value.slice(0,-1),--e.loc.end.offset)}),n},$e=t.util,ze=$e.hasNewline,Ke=$e.skipEverythingButNewLine,Xe=$e.skipNewline,Je=$e.isNextLineEmpty,qe=$e.isPreviousLineEmpty,Ze=$e.getNextNonSpaceNonCommentCharacterIndex,Ro=t.version,vo={};[["or"],["xor"],["and"],["=","+=","-=","*=","**=","/=",".=","%=","&=","|=","^=","<<=",">>="],["??"],["||"],["&&"],["|"],["^"],["&"],["==","===","!=","!==","<>","<=>"],["<",">","<=",">="],[">>","<<"],["+","-","."],["*","/","%"],["!"],["instanceof"],["++","--","~"],["**"]].forEach(function(n,o){n.forEach(function(e){vo[e]=o})});var Do=["==","!=","===","!==","<>","<=>"],Po=["*","/","%"],Uo=[">>","<<"],wo=["__construct","__destruct","__call","__callStatic","__get","__set","__isset","__unset","__sleep","__wakeup","__toString","__invoke","__set_state","__clone","__debugInfo"].reduce(function(n,t){return n[t.toLowerCase()]=t,n},{}),Bo={printNumber:function(e){return e.toLowerCase().replace(/^([+-]?[\d.]+e)(?:\+|(-))?0*(\d)/,"$1$2$3").replace(/^([+-]?[\d.]+)e[+-]?0+$/,"$1").replace(/^([+-])?\./,"$10.").replace(/(\.\d+?)0+(?=e|$)/,"$1").replace(/\.(?=e)/,"")},getPrecedence:i,isBitwiseOperator:function(e){return!!Uo[e]||"|"===e||"^"===e||"&"===e},shouldFlatten:function(n,t){return i(t)===i(n)&&"**"!==n&&(!Do.includes(n)||!Do.includes(t))&&!("%"===t&&Po.includes(n)||"%"===n&&Po.includes(t))&&(t===n||!Po.includes(t)||!Po.includes(n))&&(!Uo.includes(n)||!Uo.includes(t))},nodeHasStatement:E,getNodeListProperty:y,getParentNodeListProperty:A,getLast:g,getPenultimate:function(e){return 1<e.length?e[e.length-2]:null},isLastStatement:function(n){var t=A(n);if(!t)return!0;var e=n.getValue();return t[t.length-1]===e},getBodyFirstChild:f,lineShouldEndWithSemicolon:function(o){var t=o.getValue(),e=o.getParentNode();if(!e)return!1;if(["for","foreach","while","do","if","switch"].includes(e.kind)&&"block"!==t.kind&&"if"!==t.kind&&(e.body===t||e.alternate===t))return!0;if(!E(e))return!1;if("echo"===t.kind&&t.shortForm)return!1;if("traituse"===t.kind)return!t.adaptations;if("method"===t.kind&&t.isAbstract)return!0;if("method"===t.kind){var a=o.getParentNode();if(a&&"interface"===a.kind)return!0}return["expressionstatement","do","usegroup","classconstant","propertystatement","traitprecedence","traitalias","goto","constantstatement","global","static","echo","unset","return","break","continue","throw"].includes(t.kind)},fileShouldEndWithHardline:function(o){var t=o.getValue(),e="program"===t.kind,a=t.children&&g(t.children);if(!e)return!1;if(a&&["halt","inline"].includes(a.kind))return!1;if(a&&("declare"===a.kind||"namespace"===a.kind)){var n=0<a.children.length&&g(a.children);if(n&&["halt","inline"].includes(n.kind))return!1}return!0},maybeStripLeadingSlashFromUse:function(n){var t=n.replace(/^\\/,"");return-1===t.indexOf("\\")?n:t},hasDanglingComments:function(e){return e.comments&&e.comments.some(function(e){return!e.leading&&!e.trailing})},hasLeadingComment:function(e){return e.comments&&e.comments.some(function(e){return e.leading})},hasTrailingComment:function(e){return e.comments&&e.comments.some(function(e){return e.trailing})},docShouldHaveTrailingNewline:function y(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=t.getNode(e),n=t.getNode(e+1),s=t.getNode(e+2);if(!n)return!1;if(s&&["call","new","echo"].includes(s.kind)&&!["call","array"].includes(n.kind)||"parameter"===n.kind){var r=s.arguments.length-1,o=s.arguments.indexOf(n);return o!==r}if(s&&"for"===s.kind){var h=s.init.indexOf(n);if(-1!==h)return h!==s.init.length-1;var a=s.test.indexOf(n);if(-1!==a)return a!==s.test.length-1;var l=s.increment.indexOf(n);if(-1!==l)return l!==s.increment.length-1}if("bin"===n.kind)return n.left===i||y(t,e+1);if("case"===n.kind&&n.test===i)return!0;if("staticvariable"===n.kind){var c=s.variables.length-1,u=s.variables.indexOf(n);return u!==c}if("entry"===n.kind){if(n.key===i)return!0;var _=s.items.length-1,d=s.items.indexOf(n);return d!==_}if(["call","new"].includes(n.kind)){var p=n.arguments.length-1,f=n.arguments.indexOf(i);return f!==p}if("echo"===n.kind){var T=n.expressions.length-1,k=n.expressions.indexOf(i);return k!==T}if("array"===n.kind){var x=n.items.length-1,E=n.items.indexOf(i);return E!==x}return"retif"===n.kind&&y(t,e+1)},isLookupNode:function(e){return"propertylookup"===e.kind||"staticlookup"===e.kind||"offsetlookup"===e.kind},isFirstChildrenInlineNode:v,shouldPrintHardLineAfterStartInControlStructure:function(n){var t=n.getValue();return!["try","catch"].includes(t.kind)&&v(n)},shouldPrintHardLineBeforeEndInControlStructure:function(o){var t=o.getValue();if(["try","catch"].includes(t.kind))return!0;if("switch"===t.kind){var e=y(t.body);if(0===e.length)return!0;var a=g(e);if(!a.body)return!0;var n=y(a.body);return 0===n.length||"inline"!==n[0].kind}return!v(o)},getAlignment:function(n){var t=n.split("\n").pop();return t.length-t.trimLeft().length+1},isProgramLikeNode:function(e){return["program","declare","namespace"].includes(e.kind)},isReferenceLikeNode:function(e){return["name","parentreference","selfreference","staticreference"].includes(e.kind)},getNodeKindIncludingLogical:function(e){return"bin"===e.kind&&["||","&&"].includes(e.type)?"logical":e.kind},useDoubleQuote:function(n,t){return n.isDoubleQuote&&t.singleQuote?n.raw.slice("b"===n.raw[0]?2:1,-1).match(/\\([$nrtfve]|[xX][0-9a-fA-F]{1,2}|[0-7]{1,3}|u{([0-9a-fA-F]+)})|\r?\n|'|"/):n.isDoubleQuote},hasEmptyBody:function(n){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"body",e=n.getValue();return e[t]&&e[t].children&&0===e[t].children.length&&(!e[t].comments||0===e[t].comments.length)},isNextLineEmptyAfterNamespace:function(o,t,e){var a=e(t);return a=Ke(o,a),a=Xe(o,a),ze(o,a)},shouldPrintHardlineBeforeTrailingComma:function(e){return"nowdoc"===e.kind||"encapsed"===e.kind&&"heredoc"===e.type||"entry"===e.kind&&("nowdoc"===e.value.kind||"encapsed"===e.value.kind&&"heredoc"===e.value.type)},isDocNode:function(e){return"nowdoc"===e.kind||"encapsed"===e.kind&&"heredoc"===e.type},getAncestorNode:function(n,t){var e=function(o,t){for(var e,a=[].concat(t),n=-1;e=o.getParentNode(++n);)if(-1!==a.indexOf(e.kind))return n;return-1}(n,t);return-1===e?null:n.getParentNode(e)},getNextNode:function(o,t){var e=o.getParentNode(),a=y(e);if(!a)return null;var n=a.indexOf(t);return-1===n?null:e.children[n+1]},normalizeMagicMethodName:function(n){var t=n.toLowerCase();return wo[t]?wo[t]:n},isPreviousLineEmpty:function(n,t,e){return qe(n,t,x(e,"locStart"))},isNextLineEmpty:function(n,t,e){return Je(n,t,x(e,"locEnd"))},getNextNonSpaceNonCommentCharacterIndex:function(n,t,e){return Ze(n,t,x(e,"locEnd"))}},Fo=t.util,Mo=Fo.addLeadingComment,Ho=Fo.addDanglingComment,Go=Fo.addTrailingComment,Vo=Fo.skipNewline,Wo=Fo.hasNewline,Qo=Fo.hasNewlineInRange,Yo=t.doc.builders,$o=Yo.concat,zo=Yo.join,Ko=Yo.indent,Xo=Yo.hardline,jo=Yo.cursor,Jo=Yo.lineSuffix,qo=Yo.breakParent,Zo=Bo.getNextNonSpaceNonCommentCharacterIndex,ea=Bo.isNextLineEmpty,ta=Bo.isPreviousLineEmpty,na=Bo.isLookupNode,oa={handleOwnLineComment:function(o,t,e){var a=o.precedingNode,n=o.enclosingNode,i=o.followingNode;return Be(t,a,n,i,o,e)||function(n,t,e){return!!(n&&na(n)&&t&&["identifier","variable","encapsed"].includes(t.kind))&&(Mo(n,e),!0)}(n,i,o)||Ge(t,a,n,i,o,e)||vt(t,a,n,i,o,e)||et(n,i,o)||Ve(n,i,o)||Qe(t,a,n,i,o)||We(t,n,i,o,e)||function(o,t,e,a){return!(e||!o||"for"!==o.kind&&"foreach"!==o.kind)&&(o.body&&"block"!==o.body.kind?Mo(e,a):Mo(o,a),!0)}(n,0,i,o)||je(n,a,i,o)||Tt(n,a,i,o)},handleEndOfLineComment:function(o,t,e){var a=o.precedingNode,n=o.enclosingNode,i=o.followingNode;return function(o,t,e,a,n){return!(t||a||!e||"array"!==e.kind)&&(Go(e,n),!0)}(0,a,n,i,o)||function(o,t,e,a,n){return!(!e||"return"!==e.kind||e.expr)&&(Go(e,n),!0)}(0,0,n,0,o)||Be(t,a,n,i,o,e)||function(a,t,e,i,n,s){var r=t&&!Qo(n,s.locEnd(t),s.locStart(i));return!(t&&r||!a||"retif"!==a.kind||!e)&&(Mo(e,i),!0)}(n,a,i,o,t,e)||Ge(t,a,n,i,o,e)||vt(t,a,n,i,o,e)||et(n,i,o)||Ve(n,i,o)||Qe(t,a,n,i,o)||We(t,n,i,o,e)||function(n,t){return!!(n&&"entry"===n.kind)&&(Mo(n,t),!0)}(n,o)||function(n,t,e){return!!(t&&"call"===t.kind&&n&&t.what===n&&0<t.arguments.length)&&(Mo(t.arguments[0],e),!0)}(a,n,o)||function(n,t,e){return!!(n&&"assign"===n.kind&&t&&("array"===t.kind||"string"===t.kind||"encapsed"===t.kind))&&(Mo(t,e),!0)}(n,i,o)||je(n,a,i,o)||ct(n,a,i,o)||Tt(n,a,i,o)||Ye(n,o)},handleRemainingComment:function(o,t,e){var a=o.precedingNode,n=o.enclosingNode,i=o.followingNode;return Ge(t,a,n,i,o,e)||vt(t,a,n,i,o,e)||function(o,t,e,a){var n=Zo(o,e,a);return!(")"!==o.charAt(n))&&!!(t&&("function"===t.kind||"closure"===t.kind||"method"===t.kind||"call"===t.kind||"new"===t.kind)&&0===t.arguments.length)&&(Ho(t,e),!0)}(t,n,o,e)||Ve(n,i,o)||function(n,t,e){return!!(n&&"traituse"===n.kind&&n.adaptations&&!n.adaptations.length)&&(Ho(n,e),!0)}(n,0,o)||Qe(t,a,n,i,o)||We(t,n,i,o,e)||Ye(n,o)||function(o,t,e,a){return t&&"halt"===t.kind?(Ho(t,a),!0):!!(o&&"halt"===o.kind)&&(Ho(o,a),!0)}(a,n,0,o)||function(n,t){return!(!n||"continue"!==n.kind&&"break"!==n.kind||n.label)&&(Go(n,t),!0)}(n,o)||je(n,a,i,o)||ct(n,a,i,o)},getCommentChildNodes:function(e){return"object"==_typeof(e)?function(n){return Object.keys(n).filter(function(e){return"kind"!==e&&"loc"!==e&&"errors"!==e&&"extra"!==e&&"comments"!==e&&"leadingComments"!==e&&"enclosingNode"!==e&&"precedingNode"!==e&&"followingNode"!==e}).map(function(t){return n[t]})}(e):[]},canAttachComment:function(e){return e.kind&&"commentblock"!==e.kind&&"commentline"!==e.kind},isBlockComment:function(e){return"commentblock"===e.kind},printDanglingComments:function(o,a,e,l){var n=[],t=o.getValue();return t&&t.comments?(o.each(function(e){var t=e.getValue();!t||t.leading||t.trailing||l&&!l(t)||n.push(Wt(e,a))},"comments"),0===n.length?"":e?zo(Xo,n):Ko($o([Xo,zo(Xo,n)]))):""},hasLeadingComment:function(e){return e.comments&&e.comments.some(function(e){return e.leading})},hasTrailingComment:function(e){return e.comments&&e.comments.some(function(e){return e.trailing})},hasLeadingOwnLineComment:function(n,t,o){return t.comments&&t.comments.some(function(t){return t.leading&&Wo(n,o.locEnd(t))})},printComments:function(n,o){var e=[];return n.forEach(function(a,t,n){a.printed=!0;var i=n.length===t+1;e.push(a.value),i||e.push(Xo),ea(o.originalText,a,o)&&!i&&e.push(Xo)}),$o(e)},printAllComments:function(l,t,_,e){var n=l.getValue(),i=t(l),r=n&&n.comments;if(!r||0===r.length)return eo(l,_,i);var s=[],d=[e?";":"",i];return l.each(function(a){var t=a.getValue(),e=t.leading,n=t.trailing;if(e){var i=function(o,t,e){var a=o.getValue(),n=Wt(o,e);if(!n)return"";var i=e.printer.isBlockComment&&e.printer.isBlockComment(a);return $o(i?[n,Wo(e.originalText,e.locEnd(a))?Xo:" "]:[n,Xo])}(a,0,_);if(!i)return;s.push(i);var r=_.originalText;Wo(r,Vo(r,_.locEnd(t)))&&s.push(Xo)}else n&&d.push(function(a,t,e){var i=a.getValue(),n=Wt(a,e);if(!n)return"";var s=e.printer.isBlockComment&&e.printer.isBlockComment(i);if(Wo(e.originalText,e.locStart(i),{backwards:!0})){var r=ta(e.originalText,i,e);return Jo($o([Xo,r?Xo:"",n]))}return $o(s?[" ",n]:[Jo($o([" ",n])),s?"":qo])}(a,0,_))},"comments"),eo(l,_,$o(s.concat(d)))}};to.strictEqual=function(){};var aa,ra=Bo.getPrecedence,ia=Bo.shouldFlatten,tn=Bo.isBitwiseOperator,en=function(a){var t=a.getParentNode();if(!t)return!1;var e=a.getName(),i=a.getNode();if(["program","expressionstatement","namespace","declare","block","include","print","return","echo"].includes(t.kind))return!1;switch(i.kind){case"pre":case"post":if("unary"===t.kind)return"pre"===i.kind&&("+"===i.type&&"+"===t.type||"-"===i.type&&"-"===t.type);case"unary":switch(t.kind){case"unary":return i.type===t.type&&("+"===i.type||"-"===i.type);case"propertylookup":case"staticlookup":case"offsetlookup":case"call":return"what"===e&&t.what===i;case"bin":return"**"===t.type&&"left"===e;default:return!1;}case"bin":switch(t.kind){case"assign":case"retif":return["and","xor","or"].includes(i.type);case"silent":case"cast":return i.parenthesizedExpression;case"pre":case"post":case"unary":return!0;case"call":case"propertylookup":case"staticlookup":case"offsetlookup":return"what"===e&&t.what===i;case"bin":var n=t.type,s=ra(n),r=i.type,o=ra(r);return s>o||"||"===n&&"&&"===r||(s===o&&"right"===e?(to.strictEqual(t.right,i),!0):s===o&&!ia(n,r)||(s<o&&"%"===r?"+"===n||"-"===n:!!tn(n)));default:return!1;}case"propertylookup":case"staticlookup":switch(t.kind){case"call":return"what"===e&&t.what===i&&i.parenthesizedExpression;default:return!1;}case"clone":case"new":switch(t.kind){case"propertylookup":case"staticlookup":case"offsetlookup":case"call":return"what"===e&&t.what===i;default:return!1;}case"yield":switch(t.kind){case"propertylookup":case"staticlookup":case"offsetlookup":case"call":return"what"===e&&t.what===i;case"retif":return t.test===i;default:return i.key||i.value;}case"assign":return("for"!==t.kind||!t.init.includes(i)&&!t.increment.includes(i))&&"assign"!==t.kind&&"static"!==t.kind&&!["if","do","while","foreach","switch"].includes(t.kind)&&"silent"!==t.kind&&"call"!==t.kind;case"retif":switch(t.kind){case"cast":return!0;case"unary":case"bin":case"retif":return"test"!==e||t.trueExpr;case"propertylookup":case"staticlookup":case"offsetlookup":case"call":return"what"===e&&t.what===i;default:return!1;}case"closure":return"call"===t.kind&&"what"===e&&t.what===i;case"silence":case"cast":return i.parenthesizedExpression;case"string":case"array":switch(t.kind){case"propertylookup":case"staticlookup":case"offsetlookup":case"call":return(!["string","array"].includes(i.kind)||"offsetlookup"!==t.kind)&&"what"===e&&t.what===i;default:return!1;}case"print":case"include":return"bin"===t.kind;}return!1},nn=t.doc.builders,sn=nn.breakParent,rn=nn.concat,on=nn.join,hn=nn.line,an=nn.lineSuffix,ln=nn.group,cn=nn.conditionalGroup,un=nn.indent,_n=nn.dedent,dn=nn.ifBreak,pn=nn.hardline,fn=nn.softline,Tn=nn.literalline,kn=nn.align,xn=nn.dedentToRoot,En=t.doc.utils.willBreak,mn=t.util,yn=mn.isNextLineEmptyAfterIndex,vn=mn.hasNewline,An=mn.hasNewlineInRange,gn=Bo.getLast,Nn=Bo.getPenultimate,Cn=Bo.isLastStatement,Sn=Bo.lineShouldEndWithSemicolon,bn=Bo.printNumber,Ln=Bo.shouldFlatten,On=Bo.maybeStripLeadingSlashFromUse,In=Bo.fileShouldEndWithHardline,Rn=Bo.hasDanglingComments,wn=Bo.hasLeadingComment,Dn=Bo.hasTrailingComment,Pn=Bo.docShouldHaveTrailingNewline,Un=Bo.isLookupNode,Bn=Bo.isFirstChildrenInlineNode,Fn=Bo.shouldPrintHardLineAfterStartInControlStructure,Mn=Bo.shouldPrintHardLineBeforeEndInControlStructure,Hn=Bo.getAlignment,Gn=Bo.isProgramLikeNode,Vn=Bo.getNodeKindIncludingLogical,Wn=Bo.useDoubleQuote,Qn=Bo.hasEmptyBody,Yn=Bo.isNextLineEmptyAfterNamespace,jn=Bo.shouldPrintHardlineBeforeTrailingComma,$n=Bo.isDocNode,zn=Bo.getAncestorNode,Kn=Bo.isReferenceLikeNode,Xn=Bo.getNextNode,Jn=Bo.normalizeMagicMethodName,qn=Bo.getNextNonSpaceNonCommentCharacterIndex,Zn=Bo.isNextLineEmpty,sa=function(a,t,e){var i=a.getValue();if(!i)return"";if("string"==typeof i)return i;var n=function(x,f,e){var t=x.getValue();switch(t.kind){case"program":return ln(rn([mo(x,f,e),oa.printDanglingComments(x,f,!0,function(e){return!e.printed})]));case"expressionstatement":return x.call(e,"expression");case"block":return rn([mo(x,f,e),oa.printDanglingComments(x,f,!0)]);case"declare":var n=function(n){return on(", ",n.map(function(n){return rn([e(n)])},"directives"))};if(["block","short"].includes(t.mode))return rn(["declare(",n(x),")","block"===t.mode?" {":":",0<t.children.length?un(rn([pn,mo(x,f,e)])):"",oa.printDanglingComments(x,f),pn,"block"===t.mode?"}":"enddeclare;"]);var i=Xn(x,t);return rn(["declare(",n(x),")",i&&"inline"===i.kind?"":";"]);case"declaredirective":return rn([x.call(e,"key"),"=",x.call(e,"value")]);case"namespace":return rn(["namespace ",t.name&&"string"==typeof t.name?rn([t.name,t.withBrackets?" ":""]):"",t.withBrackets?"{":";",Rn(t)?rn([" ",oa.printDanglingComments(x,f,!0)]):"",0<t.children.length?t.withBrackets?un(rn([pn,mo(x,f,e)])):rn(["inline"===t.children[0].kind?"":rn([pn,Yn(f.originalText,t,f.locStart)?pn:""]),mo(x,f,e)]):"",t.withBrackets?rn([pn,"}"]):""]);case"usegroup":return ln(rn(["use ",t.type?rn([t.type," "]):"",un(rn([t.name?rn([On(t.name),"\\{",fn]):"",on(rn([",",hn]),x.map(function(n){return rn([e(n)])},"items"))])),t.name?rn([dn(oo(f,"7.2")?",":""),fn,"}"]):""]));case"useitem":return rn([t.type?rn([t.type," "]):"",On(t.name),Rn(t)?rn([" ",oa.printDanglingComments(x,f,!0)]):"",t.alias?rn([" as ",x.call(e,"alias")]):""]);case"class":case"interface":case"trait":return function(l,t,e){var i=l.getValue(),n=[];i.isFinal&&n.push("final "),i.isAbstract&&n.push("abstract ");var s="class"===i.kind&&i.isAnonymous;n.push(s?"":i.kind),i.name&&n.push(" ",l.call(e,"name")),i.extends&&i.implements?n.push(cn([rn([ho(l,t,e,"extends"),ho(l,t,e,"implements")]),rn([ho(l,t,e,"extends"),ho(l,t,e,"implements"," ",pn)]),rn([ho(l,t,e,"extends",pn," "),ho(l,t,e,"implements",pn,1<i.implements.length?pn:" ")])],{shouldBreak:Rn(i.extends)})):(i.extends&&n.push(cn([ho(l,t,e,"extends"),ho(l,t,e,"extends"," ",pn),ho(l,t,e,"extends",pn,1<i.extends.length?pn:" ")])),i.implements&&n.push(cn([ho(l,t,e,"implements"),ho(l,t,e,"implements"," ",pn),ho(l,t,e,"implements",pn,1<i.implements.length?pn:" ")])));var r=ln(rn([ln(rn(n)),ao(t)?s?hn:pn:" "])),o=i.body&&0===i.body.length&&!Rn(i),_=rn(["{",un(rn([o?"":pn,yo(l,t,e,"body")])),oa.printDanglingComments(l,t,!0),s&&o?fn:pn,"}"]);return rn([r,_])}(x,f,e);case"traitprecedence":return rn([x.call(e,"trait"),"::",x.call(e,"method")," insteadof ",on(", ",x.map(e,"instead"))]);case"traitalias":return rn([t.trait?rn([x.call(e,"trait"),"::"]):"",t.method?x.call(e,"method"):""," as ",on(" ",[].concat(p(t.visibility?[t.visibility]:[]),p(t.as?[x.call(e,"as")]:[])))]);case"traituse":return ln(rn(["use ",un(ln(on(rn([",",hn]),x.map(e,"traits")))),t.adaptations?rn([" {",0<t.adaptations.length?rn([un(rn([pn,yo(x,f,e,"adaptations")])),pn]):Rn(t)?rn([hn,oa.printDanglingComments(x,f,!0),hn]):"","}"]):""]));case"function":case"closure":case"method":return function(a,l,e){var t=a.getValue(),n=[];t.isFinal&&n.push("final "),t.isAbstract&&n.push("abstract "),t.visibility&&n.push(t.visibility," "),t.isStatic&&n.push("static "),n.push("function "),t.byref&&n.push("&"),t.name&&n.push(a.call(e,"name")),n.push(co(a,l,e)),t.uses&&0<t.uses.length&&n.push(ln(rn([" use ",co(a,l,e,"uses")]))),t.type&&n.push(rn([": ",Rn(t.type)?rn([a.call(function(e){return oa.printDanglingComments(e,l,!0)},"type")," "]):"",t.nullable?"?":"",a.call(e,"type")]));var i=rn(n);if(!t.body)return i;var r="closure"===t.kind,o=rn(["{",un(rn([Qn(a)?"":pn,a.call(e,"body")])),r&&Qn(a)?"":pn,"}"]);return r?rn([i," ",o]):0===t.arguments.length?rn([i,ao(l)?pn:" ",o]):n.some(En)?rn([i," ",o]):cn([rn([i,ao(l)?pn:" ",o]),rn([i," ",o])])}(x,f,e);case"arrowfunc":return rn([t.isStatic?"static ":"","fn",co(x,f,e),t.type?rn([": ",t.nullable?"?":"",x.call(e,"type")]):""," => ",x.call(e,"body")]);case"parameter":var r=rn([t.nullable?"?":"",t.type?rn([x.call(e,"type")," "]):"",t.byref?"&":"",t.variadic?"...":"","$",x.call(e,"name")]);return t.value?ln(rn([r,Rn(t)?" ":"",oa.printDanglingComments(x,f,!0),rn([" =",No(t.name,t.value,x.call(e,"value"),!1,f)])])):r;case"variadic":return rn(["...",x.call(e,"what")]);case"property":return ln(rn([t.type?rn([t.nullable?"?":"",x.call(e,"type")," "]):"","$",x.call(e,"name"),t.value?rn([" =",No(t.name,t.value,x.call(e,"value"),!1,f)]):""]));case"propertystatement":var o,s=x.map(function(n){return e(n)},"properties"),a=t.properties.some(function(e){return e.value});if(1!==s.length||t.properties[0].comments)0<s.length&&(o=un(s[0]));else{var l=oe(s,1);o=l[0]}var c=t.visibility||null===t.visibility;return ln(rn([c?rn([null===t.visibility?"var":t.visibility,""]):"",t.isStatic?rn([c?" ":"","static"]):"",o?rn([" ",o]):"",un(rn(s.slice(1).map(function(e){return rn([",",a?pn:hn,e])})))]));case"if":var u=[],_=Ao(x,f,e,"body"),d=ln(rn(["if (",ln(rn([un(rn([fn,x.call(e,"test")])),fn])),")",_]));if(u.push(d,Bn(x)||!t.body?"":pn),t.alternate){u.push(t.shortForm?"":"} ");var T=Dn(t.body)&&t.body.comments.some(function(e){return e.trailing&&!oa.isBlockComment(e)})||function(n){if(!n.comments)return!1;var t=gn(n.comments.filter(function(e){return!e.leading&&!e.trailing}));return t&&!oa.isBlockComment(t)}(t);u.push(!T?"":pn),Rn(t)&&u.push(Zn(f.originalText,t.body,f)?pn:"",oa.printDanglingComments(x,f,!0),T?pn:" "),u.push("else",ln("if"===t.alternate.kind?x.call(e,"alternate"):Ao(x,f,e,"alternate")))}else u.push(t.body?t.shortForm?"endif;":"}":"");return rn(u);case"do":return rn(["do",Ao(x,f,e,"body")," while (",ln(rn([un(rn([fn,x.call(e,"test")])),fn])),")"]);case"while":case"switch":return ln(rn([t.kind," (",ln(rn([un(rn([fn,x.call(e,"test")])),fn])),")",Ao(x,f,e,"body")]));case"for":var k=Ao(x,f,e,"body"),E=oa.printDanglingComments(x,f,!0),m=E?rn([E,fn]):"";return t.init.length||t.test.length||t.increment.length?rn([m,ln(rn(["for (",ln(rn([un(rn([fn,ln(rn([on(rn([",",hn]),x.map(e,"init"))])),";",hn,ln(rn([on(rn([",",hn]),x.map(e,"test"))])),";",hn,ln(on(rn([",",hn]),x.map(e,"increment")))])),fn])),")",k]))]):rn([m,ln(rn(["for (;;)",k]))]);case"foreach":var y=Ao(x,f,e,"body"),v=oa.printDanglingComments(x,f,!0),A=v?rn([v,fn]):"";return rn([A,ln(rn(["foreach (",ln(rn([un(rn([fn,x.call(e,"source"),hn,"as ",ln(t.key?un(on(rn([" =>",hn]),[x.call(e,"key"),x.call(e,"value")])):x.call(e,"value"))])),fn])),")",y]))]);case"try":var g=[];return g.push("try",Ao(x,f,e,"body")),t.catches&&g.push(rn(x.map(e,"catches"))),t.always&&g.push(" finally",Ao(x,f,e,"always")),rn(g);case"catch":return rn([" catch",t.what?rn([" (",on(" | ",x.map(e,"what"))," ",x.call(e,"variable"),")"]):"",Ao(x,f,e,"body")]);case"case":return rn([t.test?rn(["case ",t.test.comments?un(x.call(e,"test")):x.call(e,"test"),":"]):"default:",t.body&&t.body.children&&t.body.children.length?un(rn([Bn(x)?"":pn,x.call(e,"body")])):""]);case"break":case"continue":return t.level&&"number"===t.level.kind&&"1"!==t.level.value?rn(["".concat(t.kind," "),x.call(e,"level")]):t.kind;case"call":return 1===t.arguments.length&&So(t.arguments[0],f.originalText,f)?rn([x.call(e,"what"),rn(["(",on(", ",x.map(e,"arguments")),")"])]):Un(t.what)?function(A,g,e){function i(e){var t=g.originalText,o=qn(t,e,g);return")"===t.charAt(o)?yn(t,o+1,g):Zn(t,e,g)}function s(n){for(var t=[],e=0;e<n.length;e++)n[e+1]&&n[e+1].needsParens?(t.push("(",n[e].printed,n[e+1].printed,")"),e++):t.push(n[e].printed);return rn(t)}var _=[],t=A.getValue();_.unshift({node:t,printed:co(A,g,e)}),A.call(function(n){return function n(t){var a=t.getValue();if(!("call"!==a.kind||!Un(a.what)&&"call"!==a.what.kind))_.unshift({node:a,printed:rn([oa.printAllComments(t,function(){return rn([co(t,g,e)])},g),i(a)?pn:""])}),t.call(function(t){return n(t)},"what");else if(Un(a)){var o=null;o="propertylookup"===a.kind?ro(t,g,e):"staticlookup"===a.kind?io(t,g,e):so(t,g,e),_.unshift({node:a,needsParens:en(t),printed:oa.printAllComments(t,function(){return o},g)}),t.call(function(t){return n(t)},"what")}else _.unshift({node:a,printed:t.call(e)})}(n)},"what");for(var n=0;n<_.length;++n)"call"===_[n].node.kind&&_[n-1]&&["propertylookup","staticlookup"].includes(_[n-1].node.kind)&&_[n-1].needsParens&&(_[0].printed=rn(["(",_[0].printed]),_[n-1].printed=rn([_[n-1].printed,")"]));for(var r=[],h=[_[0]],N=1;N<_.length&&("call"===_[N].node.kind||Un(_[N].node)&&_[N].node.offset&&"number"===_[N].node.offset.kind);++N)h.push(_[N]);if("call"!==_[0].node.kind)for(;N+1<_.length&&Un(_[N].node)&&Un(_[N+1].node);++N)h.push(_[N]);r.push(h),h=[];for(var C=!1;N<_.length;++N){if(C&&Un(_[N].node)){if("offsetlookup"===_[N].node.kind&&_[N].node.offset&&"number"===_[N].node.offset.kind){h.push(_[N]);continue}r.push(h),h=[],C=!1}"call"===_[N].node.kind&&(C=!0),h.push(_[N]),_[N].node.comments&&oa.hasTrailingComment(_[N].node)&&(r.push(h),h=[],C=!1)}0<h.length&&r.push(h);var S=2<=r.length&&!r[1][0].node.comments&&function(o){var t=o[1].length&&"offsetlookup"===o[1][0].node.kind;if(1===o[0].length){var e=o[0][0].node;return"variable"===e.kind&&"this"===e.name||Kn(e)}var a=gn(o[0]).node;return Un(a)&&("identifier"===a.offset.kind||"variable"===a.offset.kind)&&t}(r),u=r.map(s),d=rn(u),p=S?3:2,f=r.slice(0,p).reduce(function(n,t){return n.concat(t)},[]),T=f.slice(1,-1).some(function(e){return oa.hasLeadingComment(e.node)})||f.slice(0,-1).some(function(e){return oa.hasTrailingComment(e.node)})||r[p]&&oa.hasLeadingComment(r[p][0].node),k=zn(A,"encapsed");if(r.length<=p&&!T||k)return ln(d);var x=gn(S?r.slice(1,2)[0]:r[0]).node,E="call"!==x.kind&&i(x),m=rn([s(r[0]),S?rn(r.slice(1,2).map(s)):"",E?pn:"",function(e){return 0===e.length?"":un(ln(rn([pn,on(pn,e.map(s))])))}(r.slice(S?2:1))]),y=_.filter(function(e){return"call"===e.node.kind}).length;return T||3<=y||u.slice(0,-1).some(En)?ln(m):rn([En(d)||E?sn:"",cn([d,m])])}(x,f,e):rn([x.call(e,"what"),co(x,f,e)]);case"new":var N=t.what&&"class"===t.what.kind&&t.what.isAnonymous;if(!N&&1===t.arguments.length&&So(t.arguments[0],f.originalText,f))return rn(["new ",x.call(e,"what"),"(",on(", ",x.map(e,"arguments")),")"]);var C=[];if(C.push("new "),N)C.push("class",0<t.arguments.length?co(x,f,e):"",ln(x.call(e,"what")));else{var S=rn([x.call(e,"what"),co(x,f,e)]);C.push(wn(t.what)?un(S):S)}return rn(C);case"clone":return rn(["clone ",t.what.comments?un(x.call(e,"what")):x.call(e,"what")]);case"propertylookup":case"staticlookup":case"offsetlookup":var b,ee=x.getParentNode(),O=0;do b=x.getParentNode(O),O++;while(b&&Un(b));var te=zn(x,"encapsed")||b&&("new"===b.kind||"assign"===b.kind&&"variable"!==b.left.kind)||"offsetlookup"===t.kind||(Kn(t.what)||"variable"===t.what.kind)&&["identifier","variable","encapsedpart"].includes(t.offset.kind)&&ee&&!Un(ee);return rn([x.call(e,"what"),te?uo(x,f,e):ln(un(rn([fn,uo(x,f,e)])))]);case"exit":return ln(rn([t.useDie?"die":"exit","(",t.expression?So(t.expression,f.originalText,f)?x.call(e,"expression"):rn([un(rn([fn,x.call(e,"expression")])),fn]):oa.printDanglingComments(x,f),")"]));case"global":return ln(rn(["global ",un(rn([on(rn([",",hn]),x.map(e,"items"))]))]));case"include":return rn([t.require?"require":"include",t.once?"_once":""," ",t.target.comments?un(x.call(e,"target")):x.call(e,"target")]);case"label":return rn([x.call(e,"name"),":"]);case"goto":return rn(["goto ",x.call(e,"label")]);case"throw":return rn(["throw ",t.what.comments?un(x.call(e,"what")):x.call(e,"what")]);case"silent":return rn(["@",x.call(e,"expr")]);case"halt":return rn([Rn(t)?rn([oa.printDanglingComments(x,f,!0),pn]):"","__halt_compiler();",t.after]);case"eval":return ln(rn(["eval(",So(t.source,f.originalText,f)?x.call(e,"source"):rn([un(rn([fn,x.call(e,"source")])),fn]),")"]));case"echo":var R,ne=x.map(function(n){return e(n)},"expressions");if(1!==ne.length||t.expressions[0].comments)0<ne.length&&(R=$n(t.expressions[0])||t.expressions[0].comments?un(ne[0]):_n(ne[0]));else{var D=oe(ne,1);R=D[0]}return ln(rn([t.shortForm?"":"echo ",R||"",un(rn(ne.slice(1).map(function(e){return rn([",",hn,e])})))]));case"print":return rn(["print ",t.expression.comments?un(x.call(e,"expression")):x.call(e,"expression")]);case"return":var P=[];if(P.push("return"),t.expr){var U=x.call(e,"expr");P.push(" ",t.expr.comments?un(U):U)}return Rn(t)&&P.push(" ",oa.printDanglingComments(x,f,!0)),rn(P);case"isset":case"unset":return ln(rn([t.kind,co(x,f,e,"variables")]));case"empty":return ln(rn(["empty(",un(rn([fn,x.call(e,"expression")])),fn,")"]));case"variable":var B=x.getParentNode(),F=x.getParentNode(1),M="assign"===B.kind?"":t.byref?"&":"",H="encapsedpart"===B.kind&&"simple"===B.syntax&&B.curly||F&&"offsetlookup"===B.kind&&"encapsedpart"===F.kind&&"simple"===F.syntax&&F.curly?"":"$",G=t.curly?"{":"",V=t.curly?"}":"";return rn([M,H,G,x.call(e,"name"),V]);case"constantstatement":case"classconstant":var W,ae=x.map(function(n){return e(n)},"constants");if(1!==ae.length||t.constants[0].comments)0<ae.length&&(W=un(ae[0]));else{var Y=oe(ae,1);W=Y[0]}return ln(rn([t.visibility?rn([t.visibility," "]):"","const",W?rn([" ",W]):"",un(rn(ae.slice(1).map(function(e){return rn([",",pn,e])})))]));case"constant":return go(t.name,x.call(e,"name")," =",t.value,x.call(e,"value"),!1,f);case"static":var j,re=x.map(function(n){return e(n)},"variables"),z=t.variables.some(function(e){return e.defaultValue});if(1!==re.length||t.variables[0].comments)0<re.length&&(j=un(re[0]));else{var K=oe(re,1);j=K[0]}return ln(rn(["static",j?rn([" ",j]):"",un(rn(re.slice(1).map(function(e){return rn([",",z?pn:hn,e])})))]));case"staticvariable":return go(t.variable,x.call(e,"variable")," =",t.defaultValue,x.call(e,"defaultValue"),!1,f);case"list":case"array":var X="array"===t.kind&&no(f.phpVersion,"5.4")||"list"===t.kind&&t.shortForm,J=X?"[":rn([t.kind,"("]),q=X?"]":")";if(0===t.items.length)return Rn(t)?ln(rn([J,oa.printDanglingComments(x,f),fn,q])):rn([J,q]);var Z=gn(t.items),ie=Z&&"noop"===Z.kind,se=oe(t.items.filter(function(e){return"noop"!==e.kind}).sort(function(e,t){return f.locStart(e)-f.locStart(t)}),1)[0],le=se&&se.key&&se&&An(f.originalText,f.locStart(t),f.locStart(se));return ln(rn([J,un(rn([fn,Eo(x,f,e)])),ie?",":"",dn(!ie&&oo(f,"5.0")?rn([Z&&jn(Z)?pn:"",","]):""),oa.printDanglingComments(x,f,!0),fn,q]),{shouldBreak:le});case"entry":var _e=t.byRef?"&":"",de=t.unpack?"...":"";return t.key?go(t.key,x.call(e,"key")," =>",t.value,x.call(e,"value"),_e,f):rn([_e,de,x.call(e,"value")]);case"yield":var pe=rn([t.key?rn([x.call(e,"key")," => "]):"",x.call(e,"value")]);return rn(["yield",t.key||t.value?" ":"",t.value&&t.value.comments?un(pe):pe]);case"yieldfrom":return rn(["yield from ",t.value.comments?un(x.call(e,"value")):x.call(e,"value")]);case"unary":return rn([t.type,x.call(e,"what")]);case"pre":return rn([t.type+t.type,x.call(e,"what")]);case"post":return rn([x.call(e,"what"),t.type+t.type]);case"cast":return rn(["(",t.type,") ",t.expr.comments?un(x.call(e,"expr")):x.call(e,"expr")]);case"assignref":case"assign":var ce="assignref"===t.kind;return go(t.left,x.call(e,"left"),rn([" ",ce?"=":t.operator]),t.right,x.call(e,"right"),ce,f);case"bin":var Te=x.getParentNode(),ke=x.getParentNode(1),ue=t!==Te.body&&("if"===Te.kind||"while"===Te.kind||"switch"===Te.kind||"do"===Te.kind),xe=function d(t,p,i,e,n){var r=[],s=t.getValue();if("bin"===s.kind){Ln(s.type,s.left.type)?r=r.concat(t.call(function(t){return d(t,p,i,!0,n)},"left")):r.push(t.call(p,"left"));var T=ko(s),a=rn(T?[s.type," ",t.call(p,"right")]:[s.type,hn,t.call(p,"right")]),l=t.getParentNode(),c=!(n&&["||","&&"].includes(s.type))&&Vn(l)!==Vn(s)&&Vn(s.left)!==Vn(s)&&Vn(s.right)!==Vn(s),k=$n(s.left)||"bin"===s.left.kind&&$n(s.left.right);r.push(k?"":" ",c?ln(a):a),e&&s.comments&&(r=oa.printAllComments(t,function(){return rn(r)},i))}else r.push(t.call(p));return r}(x,e,f,!1,ue);if(ue)return rn(xe);if("unary"===Te.kind||Un(Te)&&"offsetlookup"!==Te.kind)return ln(rn([un(rn([fn,rn(xe)])),fn]));var Ee=t!==Te.body&&"for"===Te.kind||"retif"===Te.kind&&ke&&"return"!==ke.kind,fe=["assign","property","constant","staticvariable","entry"].includes(Te.kind),me="bin"===t.left.kind&&Ln(t.type,t.left.type);if(Ee||ko(t)&&!me||!ko(t)&&fe)return ln(rn(xe));var ye=rn(xe.slice(1));return ln(rn([0<xe.length?xe[0]:"",un(ye)]));case"retif":var he,Ae=[],ge=x.getParentNode(),Ne=0;do he=x.getParentNode(Ne),Ne++;while(he&&"retif"===he.kind);var Ce=he||ge,Se="bin"===t.falseExpr.kind?un(x.call(e,"falseExpr")):x.call(e,"falseExpr"),Le=rn([t.trueExpr?hn:" ","?",t.trueExpr?rn([" ","bin"===t.trueExpr.kind?un(x.call(e,"trueExpr")):x.call(e,"trueExpr"),hn]):"",":",t.trueExpr?rn([" ",Se]):rn([To(t.falseExpr)?" ":hn,Se])]);Ae.push(Le);var Ie=function(e){return ge===Ce?ln(e):e},Oe=x.getParentNode(1),be="cast"===ge.kind&&Oe?Oe:ge,Re=["propertylookup","staticlookup"].includes(be.kind),ve=x.call(e,"test");if(!t.trueExpr){var De=rn([ve,"bin"===be.kind||["print","echo","return","include"].includes(Ce.kind)?un(rn(Ae)):rn(Ae)]);return"call"===be.kind&&be.what===t||"unary"===be.kind||Un(be)&&"offsetlookup"!==be.kind?ln(rn([un(rn([fn,De])),fn])):Ie(De)}return Ie(rn(["retif"===t.test.kind?un(ve):ve,un(rn(Ae)),Re?fn:""]));case"boolean":return t.value?"true":"false";case"number":return bn(t.value);case"string":if("encapsedpart"===x.getParentNode().kind){var Pe=x.getParentNode(1),Ue=0;if("heredoc"===Pe.type){var we=Pe.raw.split(/\r?\n/g);Ue=we[we.length-1].search(/\S/)}return on(Tn,t.raw.split(/\r?\n/g).map(function(e){return e.substring(Ue)}))}var Be=Wn(t,f)?"\"":"'",Fe=t.raw;return"b"===t.raw[0]&&(Fe=Fe.slice(1)),["\"","'"].includes(Fe[0])&&(Fe=Fe.substr(1)),["\"","'"].includes(Fe[Fe.length-1])&&(Fe=Fe.substr(0,Fe.length-1)),rn(["b"===t.raw[0]?"b":"",Be,on(Tn,Fe.split(/\r?\n/g)),Be]);case"encapsedpart":var Me="simple"===t.syntax&&t.curly||"complex"===t.syntax?rn([t.curly?"$":"","{"]):"",He="simple"===t.syntax&&t.curly||"complex"===t.syntax?"}":"";return rn([Me,x.call(e,"expression"),He]);case"encapsed":switch(t.type){case"string":case"shell":case"heredoc":return rn([xo(t),"heredoc"===t.type?Tn:"",rn(x.map(e,"value")),xo(t,{opening:!1}),"heredoc"===t.type&&Pn(x)?pn:""]);default:return"Have not implemented kind ".concat(t.type," yet.");}case"inline":return on(Tn,t.raw.replace("___PSEUDO_INLINE_PLACEHOLDER___","").split(/\r?\n/g));case"magic":return t.value;case"nowdoc":var Ge=no(f.phpVersion,"7.3")?pn:Tn;return rn(["<<<'",t.label,"'",Ge,on(Ge,t.value.split(/\r?\n/g)),Ge,t.label,Pn(x)?pn:""]);case"name":return rn(["rn"===t.resolution?"namespace\\":"",t.name]);case"literal":return x.call(e,"value");case"parentreference":return"parent";case"selfreference":return"self";case"staticreference":return"static";case"typereference":return t.name;case"nullkeyword":return"null";case"identifier":return"method"===x.getParentNode().kind&&(t.name=Jn(t.name)),x.call(e,"name");case"noop":return t.comments?oa.printComments(x.getValue().comments,f):"";case"error":default:return"Have not implemented kind ".concat(t.kind," yet.");}}(a,t,e),s=[],r=en(a);return r&&s.unshift("("),s.push(n),r&&s.push(")"),Sn(a)&&s.push(";"),In(a)&&s.push(pn),rn(s)},la=function(n,o){if(["loc","range","raw","comments","leadingComments","trailingComments","parenthesizedExpression","parent","prev","start","end","tokens","errors","extra"].forEach(function(e){delete o[e]}),"string"===n.kind&&delete o.isDoubleQuote,"array"===n.kind&&delete o.shortForm,"inline"===n.kind){if(n.value.includes("___PSEUDO_INLINE_PLACEHOLDER___"))return null;o.value=o.value.replace(/\r\n?|\n/g,"")}if(("continue"===n.kind||"break"===n.kind)&&n.level){var e=o.level;"number"===e.kind&&(o.level="1"===e.value?null:e)}if("block"===n.kind&&1===n.children.length&&"block"===n.children[0].kind)for(;"block"===o.children[0].kind;)o.children=o.children[0].children;return("number"===n.kind&&(o.value=Bo.printNumber(n.value)),["foreach","for","if","while","do"].includes(n.kind)&&(o.body=n.body&&"block"!==n.body.kind?{kind:"block",children:[o.body]}:o.body?o.body:null,o.alternate=n.alternate&&"block"!==n.alternate.kind?{kind:"block",children:[o.alternate]}:o.alternate?o.alternate:null),"usegroup"===n.kind&&"string"==typeof n.name&&(o.name=o.name.replace(/^\\/,"")),"useitem"===n.kind&&(o.name=o.name.replace(/^\\/,"")),"method"===n.kind&&"identifier"===n.name.kind&&(o.name.name=Bo.normalizeMagicMethodName(o.name.name)),"noop"===n.kind)?null:void 0},_a=function(o,t,e,a){if("length"!==e&&"prototype"!==e){var n=Object.getOwnPropertyDescriptor(o,e),i=Object.getOwnPropertyDescriptor(t,e);!da(n,i)&&a||Object.defineProperty(o,e,i)}},da=function(n,t){return void 0===n||n.configurable||n.writable===t.writable&&n.enumerable===t.enumerable&&n.configurable===t.configurable&&(n.writable||n.value===t.value)},pa=function(n,t){var e=Object.getPrototypeOf(t);e!==Object.getPrototypeOf(n)&&Object.setPrototypeOf(n,e)},ca=function(n,t){return"/* Wrapped ".concat(n,"*/\n").concat(t)},Ta=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),ka=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),ua=function(o,t,e){var r=""===e?"":"with ".concat(e.trim(),"() "),n=ca.bind(null,r,t.toString());Object.defineProperty(n,"name",ka),Object.defineProperty(o,"toString",function(n){for(var t,o=1;o<arguments.length;o++)t=null==arguments[o]?{}:arguments[o],o%2?s(Object(t),!0).forEach(function(o){a(n,o,t[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach(function(o){Object.defineProperty(n,o,Object.getOwnPropertyDescriptor(t,o))});return n}({},Ta,{value:n}))},xa=function(r,t){var e,l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=l.ignoreNonConfigurable,s=r.name,o=d(Reflect.ownKeys(t));try{for(o.s();!(e=o.n()).done;){var _=e.value;_a(r,t,_,void 0!==n&&n)}}catch(e){o.e(e)}finally{o.f()}return pa(r,t),ua(r,t,s),r},Ea="undefined"==typeof globalThis?"undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?{}:self:global:window:globalThis,fa=function(){var n={};return n.promise=new Promise(function(t,e){n.resolve=t,n.reject=e}),n},ma=function(n,t){return n(t={exports:{}},t.exports),t.exports}(function(o,t){function e(p){var t,s,_,i=this,T=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"maxAge",o=function(){return a(i,void 0,void 0,regeneratorRuntime.mark(function e(){var n,r,i,k,x=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t){e.next=2;break}return e.abrupt("return");case 2:n=function(e){return a(x,void 0,void 0,regeneratorRuntime.mark(function n(){var o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(_=l.default(),!(0>=(o=e[1][T]-Date.now()))){n.next=6;break}return p.delete(e[0]),_.resolve(),n.abrupt("return");case 6:return t=e[0],"function"==typeof(s=setTimeout(function(){p.delete(e[0]),_&&_.resolve()},o)).unref&&s.unref(),n.abrupt("return",_.promise);case 10:case"end":return n.stop();}},n)}))},e.prev=3,r=d(p),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return k=i.value,e.next=11,n(k);case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:e.next=25;break;case 23:e.prev=23,e.t1=e.catch(3);case 25:t=void 0;case 26:case"end":return e.stop();}},e,null,[[3,23],[5,15,18,21]])}))},k=function(){t=void 0,void 0!==s&&(clearTimeout(s),s=void 0),void 0!==_&&(_.reject(void 0),_=void 0)},u=p.set.bind(p);return p.set=function(e,a){p.has(e)&&p.delete(e);var n=u(e,a);return t&&t===e&&k(),o(),n},o(),p}var a=Ea&&Ea.__awaiter||function(l,t,e,_){return new(e||(e=Promise))(function(n,i){function r(e){try{s(_.next(e))}catch(e){i(e)}}function o(e){try{s(_.throw(e))}catch(e){i(e)}}function s(a){a.done?n(a.value):new e(function(t){t(a.value)}).then(r,o)}s((_=_.apply(l,t||[])).next())})},r=Ea&&Ea.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=r(fa);t.default=e,o.exports=e,o.exports.default=e});(aa=ma)&&aa.__esModule&&Object.prototype.hasOwnProperty.call(aa,"default")&&aa.default;var ya=new WeakMap,ha=function(l){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=t.cacheKey,_=void 0===e?function(e){return oe(e,1)[0]}:e,n=t.cache,d=void 0===n?new Map:n,r=t.maxAge;"number"==typeof r&&ma(d);var o=function t(){for(var n=arguments.length,e=Array(n),o=0;o<n;o++)e[o]=arguments[o];var t=_(e);if(d.has(t))return d.get(t).data;var i=l.apply(this,e);return d.set(t,{data:i,maxAge:r?Date.now()+r:1/0}),i};try{xa(o,l)}catch(e){}return ya.set(o,d),o};ha.clear=function(n){if(!ya.has(n))throw new Error("Can't clear a function that was not memoized!");var t=ya.get(n);"function"==typeof t.clear&&t.clear()};var Aa=/@prettier|@format/,ga=ha(function(o){var t=He(o),e=oe(t.children,1)[0],a=oe(t.comments.filter(function(e){return"commentblock"===e.kind}),1)[0];if(e&&a&&a.loc.start.line<e.loc.start.line)return a}),Na=function(n){if(!Aa.test(n))return!1;var t=ga(n);if(t){var e=t.value;return Aa.test(e)}return!1},Ca=function(_){var t=ga(_);if(t){var e=t.loc,i=e.start.offset,n=e.end.offset,s=_.substring(0,i),r=_.substring(n);return"".concat(s).concat(function(o,t){var e=o.split(/\r?\n/g);if(1===e.length){var a=oe(/\/*\*\*(.*)\*\//.exec(e[0]),2)[1];e=["/**"," * ".concat(a.trim())," */"]}var n=e.findIndex(function(e){return /@\S/.test(e)})||1;return e.splice(n,0," * @format"),e.join(function(n){var t=n.indexOf("\n");return 0<=t&&"\r"===n.charAt(t-1)?"\r\n":"\n"}(t))}(t.value,_)).concat(r)}if(!_.startsWith("<?php"))return _;var o=_.substring(0,5),a=_.substring(5);return"".concat(o,"\n/** \n * @format \n */\n").concat(a)},Sa=[".php",".aw",".ctp",".fcgi",".inc",".php3",".php4",".php5",".phps",".phpt"],La=[".php",".php_cs",".php_cs.dist","Phakefile"],Ia=["php"],Oa=["inc"],ba=Object.freeze({__proto__:null,name:"PHP",type:"programming",tmScope:"text.html.php",aceMode:"php",codemirrorMode:"php",codemirrorMimeType:"application/x-httpd-php",color:"#4F5D95",extensions:Sa,filenames:La,interpreters:Ia,aliases:Oa,languageId:272,default:{name:"PHP",type:"programming",tmScope:"text.html.php",aceMode:"php",codemirrorMode:"php",codemirrorMimeType:"application/x-httpd-php",color:"#4F5D95",extensions:Sa,filenames:La,interpreters:Ia,aliases:Oa,languageId:272}}),Ra=[".phtml"],va=Object.freeze({__proto__:null,name:"HTML+PHP",type:"markup",tmScope:"text.html.php",group:"HTML",extensions:Ra,aceMode:"php",codemirrorMode:"php",codemirrorMimeType:"application/x-httpd-php",languageId:151,default:{name:"HTML+PHP",type:"markup",tmScope:"text.html.php",group:"HTML",extensions:Ra,aceMode:"php",codemirrorMode:"php",codemirrorMimeType:"application/x-httpd-php",languageId:151}}),Da=Lo(ba),Pa=Lo(va),Ua=t.doc.builders,wa=Ua.join,Ba=Ua.hardline,Fa=[Io(Da,{override:{parsers:["php"],vscodeLanguageIds:["php"]}}),Io(Pa,{override:{parsers:["php"],vscodeLanguageIds:["php"]}})],Ma=function(n){return function(t){return t.loc&&t.loc[n]&&t.loc[n].offset}},Ha={php:{parse:He,astFormat:"php",locStart:Ma("start"),locEnd:Ma("end"),hasPragma:Na}},Ga={languages:Fa,printers:{php:{print:sa,insertPragma:Ca,massageAstNode:la,getCommentChildNodes:oa.getCommentChildNodes,canAttachComment:oa.canAttachComment,isBlockComment:oa.isBlockComment,handleComments:{ownLine:oa.handleOwnLineComment,endOfLine:oa.handleEndOfLineComment,remaining:oa.handleRemainingComment},willPrintOwnComments:function(n){var t=n.getValue();return t&&"noop"===t.kind},printComment:function(n){var t=n.getValue();switch(t.kind){case"commentblock":if(!t.value.includes("\n"))return t.value;var o=t.value.split(/\r?\n/g);return o.slice(1,o.length-1).every(function(e){return"*"===e.trim()[0]})?wa(Ba,o.map(function(n,t){return(0<t?" ":"")+(t<o.length-1?n.trim():n.trimLeft())})):t.value;case"commentline":return t.value.trimRight();default:throw new Error("Not a comment: ".concat(JSON.stringify(t)));}},hasPrettierIgnore:function(n){var t=n.getNode();return t&&t.comments&&0<t.comments.length&&t.comments.some(function(e){return e.value.includes("prettier-ignore")&&!e.value.includes("prettier-ignore-start")&&!e.value.includes("prettier-ignore-end")})}}},parsers:Ha,options:{phpVersion:{since:"0.13.0",category:"PHP",type:"choice",default:"5.4",description:"Minimum target PHP version.",choices:[{value:"5.0"},{value:"5.1"},{value:"5.2"},{value:"5.3"},{value:"5.4"},{value:"5.5"},{value:"5.6"},{value:"7.0"},{value:"7.1"},{value:"7.2"},{value:"7.3"},{value:"7.4"}]},trailingCommaPHP:{since:"0.0.0",category:"PHP",type:"boolean",default:!0,description:"Print trailing commas wherever possible when multi-line."},braceStyle:{since:"0.10.0",category:"PHP",type:"choice",default:"psr-2",description:"Print one space or newline for code blocks (classes and functions).",choices:[{value:"psr-2",description:"Use PSR-2 brace style."},{value:"1tbs",description:"Use 1tbs brace style."}]}},defaultOptions:{tabWidth:4}},Va=Ga.languages,Wa=Ga.printers,Qa=Ga.parsers,Ya=Ga.options,$a=Ga.defaultOptions;n.default=Ga,n.defaultOptions=$a,n.languages=Va,n.options=Ya,n.parsers=Qa,n.printers=Wa,Object.defineProperty(n,"__esModule",{value:!0})});